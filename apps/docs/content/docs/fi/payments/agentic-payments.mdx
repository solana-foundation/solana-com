---
title: Agenttipohjaiset maksut
description:
  Mahdollista tekoälyagenttien itsenäinen maksaminen palveluista, API:sta ja
  resursseista x402-protokollalla.
---

Tekoälyagentit ovat yhä itsenäisempiä työnkuluissaan: ne kirjoittavat koodia,
hakevat dataa, varaavat resursseja ja paljon muuta. Toimiakseen täysin
itsenäisesti niiden täytyy pystyä suorittamaan "mikromaksuja" palveluista
ohjelmallisesti, reaaliajassa, mahdollisimman alhaisin kustannuksin. Perinteiset
maksujärjestelmät eivät toimi mikromaksuille. Solanan alle sentin maksut ja alle
sekunnin lopullisuus tekevät tästä teknisesti ja taloudellisesti mahdollista.

## Miksi tämä on tärkeää?

Kuvittele esimerkiksi kehittäjä, joka käyttää LLM:ää sovelluksen rakentamiseen
ja tarvitsee dataa maksullisesta API:sta. Tärkeän datan hakemiseksi kehittäjän
täytyisi keskeyttää työnkulkunsa, tutkia API:ja, valita palveluntarjoaja, luoda
tili, lisätä maksutapa, generoida API-avain, kopioida avain ympäristöönsä ja
sitten jatkaa työnkulkuaan. Tämä kitka rikkoo flow-tilan. Tekoälyavusteisissa
työnkuluissa se on este.

Sen sijaan agenttipohjaisilla maksuilla agentti voi tehdä pyynnön, maksaa siitä
ja jatkaa työnkulkuaan. Ei tilejä. Ei API-avaimia. Ei manuaalista toimintaa.

## x402-protokolla

Agenttipohjaiset maksut tarvitsevat tavan, jolla asiakkaat ja palvelimet voivat
neuvotella maksuehdoista standardin web-infrastruktuurin yli häiritsemättä
perinteisiä web-käyttöliittymiä. Mikromaksutila on vielä alkuvaiheessa ja uusia
työkaluja ja standardeja todennäköisesti syntyy alan kehittyessä.
[x402-protokolla](https://www.x402.org/) on kuitenkin noussut varhaiseksi
standardiksi vahvalla ekosysteemin tuella. x402 käyttää
[HTTP:n 402 "Payment Required"](https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Status/402)
-tilakoodia—standardia HTTP/1.1:stä lähtien, joka tuli käytännölliseksi vasta
blockchain-selvityksen myötä.

### Miten se toimii

Asiakas tekee pyynnön, vastaanottaa 402-vastauksen maksuehdoilla ja yrittää
sitten uudelleen allekirjoitetulla maksulla. Palvelin delegoi vahvistuksen ja
selvityksen fasilitaattorille, valinnaiselle välittäjälle, joka käsittelee
ketjussa tapahtuvan transaktion lähettämisen. Kun fasilitaattori vahvistaa
selvityksen, palvelin palauttaa pyydetyn sisällön. Tämä erottelu mahdollistaa
API-tarjoajien maksujen vastaanottamisen ilman, että heidän tarvitsee hallita
ketjussa olevaa infrastruktuuria suoraan.

![x402-vuokaavio](/assets/guides/x402/x402-flow-solana.png)

Protokolla on tilaton (ei istuntoja tai API-avaimia), toimii standardin
HTTP-infrastruktuurin kanssa ja tukee mitä tahansa SPL-tokenia, jonka palvelin
hyväksyy. Tässä on koodinpätkä siitä, miten Express-palvelin konfiguroidaan
käyttämällä x402-middlewarea:

```ts
app.use(
  paymentMiddleware(
    {
      "GET /costly-data": {
        accepts: [
          {
            scheme: "exact",
            price: "$0.001",
            network: "solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",
            payTo: svmAddress
          }
        ],
        description: "Costly data",
        mimeType: "application/json"
      }
    },
    new x402ResourceServer(facilitatorClient).register(
      "solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",
      new ExactSvmScheme()
    )
  )
);

app.get("/costly-data", (req, res) => {
  res.send({
    report: {
      data: "costly data"
    }
  });
});
```

Lisätietoja x402:sta löydät oppaistamme:

<Cards>
  <Card
    title="Johdatus x402:een"
    href="/developers/guides/getstarted/intro-to-x402"
    description="Protokollan perusteet ja SDK-vaihtoehdot maksullisten API:en rakentamiseen."
  />
  <Card
    title="Rakenna Koran kanssa"
    href="/developers/guides/getstarted/build-a-x402-facilitator"
    description="Toteuta gasless x402 -maksut käyttämällä Koran allekirjoitusinfrastruktuuria."
  />
</Cards>

### x402-työkalut

| SDK                                                             | Kuvaus                                 |
| --------------------------------------------------------------- | -------------------------------------- |
| [Corbits](https://corbits.dev/)                                 | Solana-ensisijainen x402-toteutus      |
| [MCPay.tech](https://mcpay.tech/)                               | Pyyntökohtainen maksu MCP-palvelimille |
| [PayAI](https://payai.network/)                                 | x402-fasilitaattori Solana-tuella      |
| [x402 GitHub](https://github.com/coinbase/x402)                 | Referenssitoteutus                     |
| [ACK](https://github.com/agentcommercekit/ack)                  | Agent Commerce Kit                     |
| [A2A x402](https://github.com/google-agentic-commerce/a2a-x402) | Googlen agentilta agentille -maksut    |
