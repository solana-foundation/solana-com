---
title: Thanh toán cơ bản
description: Tìm hiểu cách gửi một lần chuyển token giữa các ví.
---

Solana cho phép chuyển token toàn cầu tức thì với phí dưới $0.001. Cho dù bạn
đang xây dựng chuyển tiền xuyên biên giới, giải ngân lương, hay các hoạt động
quản lý quỹ, một khoản thanh toán stablecoin cơ bản được thanh toán trong vòng
chưa đầy một giây và chỉ tốn một phần nhỏ của một xu.

## Cách hoạt động

Một khoản thanh toán chuyển stablecoin từ token account của người gửi đến token
account của người nhận. Nếu người nhận đang nhận token này lần đầu tiên, token
account của họ có thể được tạo như một phần của cùng giao dịch đó.

<Callout>
  Xem [How Payments Work on Solana](/docs/payments/how-payments-work) để hiểu
  các khái niệm thanh toán cốt lõi.
</Callout>

Hàm trợ giúp `splToken` từ
[`@solana/client`](https://solana.com/docs/frontend/client) tự động xử lý việc
suy ra ATA, chuyển đổi số thập phân và xây dựng giao dịch. Điều này lý tưởng cho
các lần chuyển thanh toán đơn lẻ.

Các bước dưới đây cho thấy luồng cốt lõi. Xem [Demo](#demo) để có mã hoàn chỉnh
có thể chạy được.

<ScrollyCoding>

## !!steps Tạo Token Helper

Cấu hình hàm trợ giúp `splToken()` bằng cách gọi `client.splToken()` với địa chỉ
mint. Hàm trợ giúp cung cấp các phương thức cho các thao tác token phổ biến.

Đặt `tokenProgram: "auto"` tự động phát hiện xem mint account có thuộc sở hữu
của chương trình Token hay Token-2022.

<CodePlaceholder title="Thanh toán cơ bản" />

```ts !! title="Basic Payment"
const client = createClient({
  endpoint: "http://localhost:8899",
  websocketEndpoint: "ws://localhost:8900",
  commitment: "confirmed"
});

// !focus(1:4)
const splToken = client.splToken({
  mint: mint.address,
  tokenProgram: "auto"
});
```

## !!steps Gửi thanh toán

Sử dụng `sendTransfer()` để chuyển token giữa các ví. Phương thức này xử lý:

- **Phân giải ATA**: Tự động suy ra Associated Token Accounts (ATA) cho người
  gửi và người nhận. Nếu ATA của người nhận không tồn tại, lệnh tạo tài khoản sẽ
  tự động được thêm vào cùng giao dịch.
- **Chuyển đổi số thập phân**: Chấp nhận số lượng token và tự động chuyển đổi
  sang đơn vị cơ sở dựa trên số thập phân của mint (ví dụ: 0.25 token -> 250000
  đơn vị cơ sở, nếu mint có 6 số thập phân)
- **Xây dựng giao dịch**: Tạo, ký và gửi giao dịch với lệnh chuyển

<CodePlaceholder title="Basic Payment" />

```ts !! title="Basic Payment"
const client = createClient({
  endpoint: "http://localhost:8899",
  websocketEndpoint: "ws://localhost:8900",
  commitment: "confirmed"
});

const splToken = client.splToken({
  mint: mint.address,
  tokenProgram: "auto"
});

// !focus(1:5)
const signature = await splToken.sendTransfer({
  amount: 0.25,
  authority: sender,
  destinationOwner: recipient.address
});
```

## !!steps Xác minh số dư

Sau khi hoàn tất chuyển khoản, sử dụng `fetchBalance()` để xác minh số dư token.
Phương thức này nhận địa chỉ ví và tự động suy ra ATA tương ứng để lấy số dư.

<CodePlaceholder title="Basic Payment" />

```ts !! title="Basic Payment"
const client = createClient({
  endpoint: "http://localhost:8899",
  websocketEndpoint: "ws://localhost:8900",
  commitment: "confirmed"
});

const splToken = client.splToken({
  mint: mint.address,
  tokenProgram: "auto"
});

const signature = await splToken.sendTransfer({
  amount: 0.25,
  authority: sender,
  destinationOwner: recipient.address
});

// !focus(1:2)
const senderBalance = await splToken.fetchBalance(sender.address);
const recipientBalance = await splToken.fetchBalance(recipient.address);
```

</ScrollyCoding>

### Demo

<CodeTabs flags="r">

```ts !! title="Demo"
// !collapse(1:13) collapsed
// Click ">" icon on left to expand demo imports
import { createClient, lamports } from "@solana/client";
import { generateKeypair } from "@solana/client/server";
import type { ServerKeypair } from "@solana/client/server";
import { getCreateAccountInstruction } from "@solana-program/system";
import {
  getCreateAssociatedTokenInstructionAsync,
  getInitializeMintInstruction,
  getMintSize,
  findAssociatedTokenPda,
  getMintToInstruction,
  TOKEN_2022_PROGRAM_ADDRESS
} from "@solana-program/token-2022";

// Generate keypairs for sender and recipient
const sender = (await generateKeypair()).signer;
const recipient = (await generateKeypair()).signer;

console.log("Sender Address:", sender.address);
console.log("Recipient Address:", recipient.address);

// Demo Setup: Create client, mint account, token accounts, and fund with initial tokens
const { client, mint } = await demoSetup(sender, recipient);

console.log("\nMint Address:", mint.address);

// =============================================================================
// Basic Token Payment Demo
// =============================================================================

// Create splToken helper for this mint using @solana/client
// !mark(1:4)
const splToken = client.splToken({
  mint: mint.address,
  tokenProgram: "auto"
});

// Transfer tokens from sender to recipient (ATA and decimals handled automatically)
// !mark(1:5)
const signature = await splToken.sendTransfer({
  amount: 0.25,
  authority: sender,
  destinationOwner: recipient.address
});

console.log("\n=== Token Payment Complete ===");
console.log("Transaction Signature:", signature.toString());

// Fetch final token account balances using splToken helper
const senderBalance = await splToken.fetchBalance(sender.address);
const recipientBalance = await splToken.fetchBalance(recipient.address);
console.log("\nSender Token Account Balance:", senderBalance);
console.log("Recipient Token Account Balance:", recipientBalance);

// =============================================================================
// Demo Setup Helper Function
// =============================================================================
// !collapse(1:1000) collapsed

/**
 * Sets up for a token transfer demo:
 * - Creates @solana/client instance
 * - Airdrops SOL to sender for transaction fees
 * - Generates mint keypair and creates/initializes mint account
 * - Creates associated token accounts for sender and recipient
 * - Mints initial tokens to sender
 *
 * @param sender - The sender's keypair (will be funded and used as mint authority)
 * @param recipient - The recipient's keypair
 * @returns Returns client instance and mint address
 */
async function demoSetup(
  sender: ServerKeypair["signer"],
  recipient: ServerKeypair["signer"]
) {
  // Create @solana/client instance pointing to local validator
  const client = createClient({
    endpoint: "http://localhost:8899",
    websocketEndpoint: "ws://localhost:8900",
    commitment: "confirmed",
    logger: () => {} // Disable all logs
  });

  // Fund sender with SOL for transaction fees using @solana/client actions
  await client.actions.requestAirdrop(sender.address, lamports(1_000_000_000n));

  // Generate keypair to use as address of mint
  const mint = (await generateKeypair()).signer;

  // Get default mint account size (in bytes), no extensions enabled
  const space = BigInt(getMintSize());

  // Get minimum balance for rent exemption
  const rent = await client.runtime.rpc
    .getMinimumBalanceForRentExemption(space)
    .send();

  // Instruction to create new account for mint (token program)
  // Invokes the system program
  const createAccountInstruction = getCreateAccountInstruction({
    payer: sender,
    newAccount: mint,
    lamports: rent,
    space,
    programAddress: TOKEN_2022_PROGRAM_ADDRESS
  });

  // Instruction to initialize mint account data
  // Invokes the token 2022 program
  const initializeMintInstruction = getInitializeMintInstruction({
    mint: mint.address,
    decimals: 6,
    mintAuthority: sender.address
  });

  // Derive sender's associated token account address (ATA)
  const [senderAta] = await findAssociatedTokenPda({
    mint: mint.address,
    owner: sender.address,
    tokenProgram: TOKEN_2022_PROGRAM_ADDRESS
  });

  // Create instruction for sender's ATA
  const createSenderAtaInstruction =
    await getCreateAssociatedTokenInstructionAsync({
      payer: sender,
      mint: mint.address,
      owner: sender.address
    });

  // Create instruction for recipient's ATA
  const createRecipientAtaInstruction =
    await getCreateAssociatedTokenInstructionAsync({
      payer: sender,
      mint: mint.address,
      owner: recipient.address
    });

  // Create instruction to mint initial tokens to sender
  const mintToInstruction = getMintToInstruction({
    mint: mint.address,
    token: senderAta,
    mintAuthority: sender.address,
    amount: 1_000_000n // Mint 1.00 tokens (1,000,000 base units with 6 decimals)
  });

  // Combine all instructions and send using @solana/client transaction helper
  const setupInstructions = [
    createAccountInstruction, // Create mint account
    initializeMintInstruction, // Initialize mint
    createSenderAtaInstruction, // Create sender's ATA
    createRecipientAtaInstruction, // Create recipient's ATA
    mintToInstruction // Mint tokens to sender
  ];

  // Prepare and send transaction using @solana/client
  await client.transaction.prepareAndSend({
    authority: sender,
    instructions: setupInstructions,
    version: 0
  });

  return {
    client,
    mint
  };
}
```

</CodeTabs>
