---
title: Взаємодія з Solana
description: Підключення до мережі та дослідження даних блокчейну
---

Перед створенням платіжних потоків вам потрібно підключитися до Solana та
зрозуміти, як запитувати дані мережі. Цей посібник охоплює основи: встановлення
з'єднання та використання RPC-методів, які вам знадобляться для платежів за
допомогою TypeScript SDK
[@solana/kit](https://www.npmjs.com/package/@solana/kit) та
[Solana CLI](https://solana.com/docs/intro/installation). Крім того, ми
розглянемо основні принципи використання
[Solana Explorer](https://explorer.solana.com) для ручної перевірки платежів,
інспектування облікових записів та налагодження проблем.

## Підключення до Solana

RPC API Solana — це основний спосіб програмної взаємодії з мережею. Ваш RPC URL
фактично є API-ключем до мережі.

<Callout type="caution" title="Не використовуйте публічний RPC для продакшену">
  Публічні ендпоінти (`api.mainnet-beta.solana.com`, `api.devnet.solana.com`)
  мають обмеження швидкості, не мають SLA та непридатні для продакшн-платіжних
  потоків. Використовуйте [RPC-провайдера](https://solana.com/rpc), щоб отримати
  приватний RPC- ендпоінт для продакшн-розгортань.
</Callout>

Для розробки та тестування ви можете використовувати публічні ендпоінти з
обмеженням швидкості.

Створіть RPC-клієнт для взаємодії з мережею:

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
import { createSolanaRpc, createSolanaRpcSubscriptions } from "@solana/kit";

const rpc = createSolanaRpc("https://api.mainnet-beta.solana.com");
const rpcSubscriptions = createSolanaRpcSubscriptions(
  "wss://api.mainnet-beta.solana.com"
);
```

```bash !! title="CLI"
solana config set --url https://api.mainnet-beta.solana.com
solana config get # to verify the connection
```

</CodeTabs>

<Callout>
  Для розробки використовуйте devnet (`https://api.devnet.solana.com`) або
  локальний validator, як-от
  [Surfpool](/docs/intro/installation/surfpool-cli-basics).
</Callout>

## Поширені RPC-методи

[JSON-RPC API](/docs/rpc) Solana надає методи для запитів до мережі. Ось ті, які
ви найчастіше використовуватимете для платіжних потоків.

### Отримання інформації про обліковий запис

Усі облікові записи в Solana адресуються за їхнім публічним ключем.
Використовуйте RPC-метод [`getAccountInfo`](/docs/rpc/http/getaccountinfo) для
отримання інформації про будь-який обліковий запис. Метод `getAccountInfo`
повертає об'єкт `AccountInfo`, який містить публічний ключ облікового запису,
баланс SOL, дані та деякі інші метадані.

Поле `data` є base64-закодованим рядком даних облікового запису. Ви можете
перетворити його на байти за допомогою методу `getBase64Codec` з пакета
`@solana/kit`, а потім декодувати його в читабельний об'єкт, використовуючи
очікуваний кодек (якщо відомий) для даних облікового запису (наприклад,
`getTokenCodec` для токен-акаунтів).

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const accountInfo = await rpc
  .getAccountInfo(address("7EcDhSYGxXyscszYEp35KHN8vvw3svAuLKTzXwCFLtV"), {
    encoding: "base64"
  })
  .send();
const dataBytes = getBase64Codec().encode(accountInfo.value.data);
const parsedTokenData = getTokenCodec().decode(dataBytes);

console.log(parsedTokenData);
```

```bash !! title="CLI"
solana account 7EcDhSYGxXyscszYEp35KHN8vvw3svAuLKTzXwCFLtV
```

</CodeTabs>

### Отримання балансів токенів

Перевірте баланс токен-акаунта за допомогою RPC-методу
[`getTokenAccountBalance`](/docs/rpc/http/gettokenaccountbalance):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const balance = await rpc.getTokenAccountBalance(tokenAccountAddress).send();

console.log(balance.value.uiAmount); // Human-readable (e.g., 100.50)
console.log(balance.value.amount); // Base units (e.g., "100500000")
```

```bash !! title="CLI"
spl-token balance --address 7v45FoihixmfocS3LbANUrEGZQKEJ7QQUg8K9jtZd3St
```

</CodeTabs>

### Створення транзакцій

Кожна транзакція потребує свіжого хешу блоку, щоб бути дійсною (а не
застарілою). Отримайте його перед створенням платіжної транзакції за допомогою
RPC-методу [`getLatestBlockhash`](/docs/rpc/http/getlatestblockhash):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const { value: latestBlockhash } = await rpc.getLatestBlockhash().send();
```

```bash !! title="CLI"
solana block-height
```

</CodeTabs>

> Хеші блоків втрачають чинність приблизно через 60 секунд. Отримайте свіжий
> безпосередньо перед підписанням і відправленням.

### Перевірка статусу транзакції

Перевірте, чи завершилася транзакція, за допомогою RPC-методу
[`getSignatureStatuses`](/docs/rpc/http/getsignaturestatuses):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const status = await rpc.getSignatureStatuses([signature]).send();

const result = status.value[0];
// result.confirmationStatus: "processed" | "confirmed" | "finalized"
```

```bash !! title="CLI"
solana confirm <SIGNATURE>
# For more details:
solana confirm <SIGNATURE> -v
```

</CodeTabs>

### Отримання деталей транзакції

Отримайте повну інформацію про підтверджену транзакцію за допомогою RPC-методу
[`getTransaction`](/docs/rpc/http/gettransaction):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const transaction = await rpc
  .getTransaction(signature, { maxSupportedTransactionVersion: 0 })
  .send();
```

```bash !! title="CLI"
solana transaction-history <ADDRESS> --limit 1 -v
# Or decode a specific transaction:
solana confirm <SIGNATURE> -v
```

</CodeTabs>

### Історія транзакцій

Отримайте останні транзакції для адреси за допомогою RPC-методу
[`getSignaturesForAddress`](/docs/rpc/http/getsignaturesforaddress):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const signatures = await rpc
  .getSignaturesForAddress(walletAddress, { limit: 10 })
  .send();
```

```bash !! title="CLI"
solana transaction-history <ADDRESS> --limit 10
```

</CodeTabs>

> Для комплексного моніторингу платежів дивіться розділ
> [Прийом платежів](/docs/payments/accept-payments), який охоплює вебхуки та
> виявлення транзакцій у реальному часі.

## Дослідження публічних даних

Публічний реєстр Solana означає, що кожна транзакція, токен-акаунт і mint є
повністю доступними для аудиту. Блок-експлорери дозволяють вручну перевіряти
платежі, переглядати акаунти та виправляти помилки без написання коду.

**Що ви можете знайти:**

- Перевірити, чи платіж виконано
- Переглянути баланси токен-акаунтів
- Виправити невдалі транзакції
- Знайти деталі mint (емісія, десяткові знаки, повноваження)

**Популярні експлорери:** [Solana Explorer](https://explorer.solana.com),
[SolanaFM](https://solana.fm), [Solscan](https://solscan.io),
[Orb](https://www.orbmarkets.io/)

**Приклади посилань:**

- [USDC Token Mint](https://explorer.solana.com/address/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v)
  — Емісія, ринки, власники та транзакції для USDC
- [USDC Token Transfer](https://explorer.solana.com/tx/3d2mQChCbqM5iogAN5PZw7KGZuVtQq3LbwU8hk55u4iUvYH1XJ7SQVQpWwoZj43MtthBqGBoqGBe9fn4Bo1VznjG)
  — Деталі транзакції платежу USDC
- [USDG Token Account](https://explorer.solana.com/address/7v45FoihixmfocS3LbANUrEGZQKEJ7QQUg8K9jtZd3St)
  — Баланс USDG користувача та історія транзакцій
