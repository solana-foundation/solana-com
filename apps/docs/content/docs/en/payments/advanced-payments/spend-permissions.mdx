---
title: Spend Permissions
description: Delegate token spending to third parties for automated and escrowed payments
---

Solana's Token Programs support **delegation**—granting another account permission to transfer tokens from your token account up to a specified limit. This enables use cases like automated payments, escrow services, and third-party payment processing without giving up custody of your funds.

## How Delegation Works

When you approve a delegate, you're authorizing a specific account to transfer tokens on your behalf:

- **Owner retains custody**: You still own the tokens and can transfer or revoke at any time
- **Capped spending**: The delegate can only transfer up to the approved amount
- **Single delegate per account**: Each token account can only have one active delegate
- **New approval replaces old**: Approving a new delegate automatically revokes the previous one

<Callout type="info">
Delegation is non-custodial. The delegate can spend tokens up to the limit, but cannot access or drain the account beyond the approved amount. The owner can revoke at any time.
</Callout>

## Business Use Cases

| Use Case | How Delegation Helps |
|----------|---------------------|
| **Payment processors** | Merchant grants processor permission to settle transactions |
| **Automated payroll** | Treasury approves payroll service to disburse salaries |
| **Escrow services** | Buyer delegates to escrow agent for conditional release |
| **Trading platforms** | User approves exchange to execute trades on their behalf |

## Approving a Delegate

Grant another account permission to spend tokens from your account:

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
import { getApproveCheckedInstruction } from "@solana-program/token";

// Approve delegate to spend up to 1,000 USDC (6 decimals)
const approveInstruction = getApproveCheckedInstruction({
  source: tokenAccountAddress,    // Your token account
  mint: usdcMintAddress,          // USDC mint
  delegate: delegateAddress,      // Account receiving permission
  owner: ownerKeypair,            // You (must sign)
  amount: 1_000_000_000n,         // 1,000 USDC in base units
  decimals: 6
});
```

```bash !! title="CLI"
spl-token approve <TOKEN_ACCOUNT> <AMOUNT> <DELEGATE_ADDRESS>
# Example: Approve 1000 USDC to a delegate
spl-token approve 7v45Foih... 1000 DeLe9ate...
```

</CodeTabs>

**Parameters:**
- `source`: The token account granting permission
- `delegate`: The account that will have spending permission
- `owner`: Current owner of the token account (must sign the transaction)
- `amount`: Maximum tokens the delegate can transfer
- `decimals`: Token decimals for validation (prevents decimal errors)

## Revoking a Delegate

Remove all spending permissions from the current delegate:

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
import { getRevokeInstruction } from "@solana-program/token";

const revokeInstruction = getRevokeInstruction({
  source: tokenAccountAddress,    // Your token account
  owner: ownerKeypair             // You (must sign)
});
```

```bash !! title="CLI"
spl-token revoke <TOKEN_ACCOUNT>
```

</CodeTabs>

<Callout type="caution">
Revoke removes **all** delegate permissions—there's no partial revoke. If you need to reduce the limit, approve the same delegate with a lower amount.
</Callout>

## Checking Delegation Status

Query a token account to see its current delegate and remaining allowance:

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
import { fetchToken } from "@solana-program/token";

const tokenAccount = await fetchToken(rpc, tokenAccountAddress);

if (tokenAccount.data.delegate) {
  console.log("Delegate:", tokenAccount.data.delegate);
  console.log("Remaining allowance:", tokenAccount.data.delegatedAmount);
} else {
  console.log("No delegate set");
}
```

```bash !! title="CLI"
spl-token display <TOKEN_ACCOUNT>
# Look for "Delegate" and "Delegated Amount" fields
```

</CodeTabs>

## Transferring as a Delegate

When acting as the delegate, use a standard transfer but sign with the delegate keypair instead of the owner:

```ts title="Transfer as Delegate"
import { getTransferCheckedInstruction } from "@solana-program/token";

const transferInstruction = getTransferCheckedInstruction({
  source: ownerTokenAccount,      // The account you have permission to spend from
  mint: usdcMintAddress,
  destination: recipientTokenAccount,
  authority: delegateKeypair,     // You (the delegate) sign, not the owner
  amount: 100_000_000n,           // 100 USDC
  decimals: 6
});
```

The transfer will succeed if:
- The source account has sufficient balance
- The delegate signs the transaction

Each transfer reduces the remaining allowance. When the allowance reaches zero, the delegate can no longer transfer tokens.

## Security Considerations

**For account owners:**
- Only approve trusted delegates
- Set the minimum necessary spending limit
- Revoke delegations when no longer needed
- Monitor your accounts for unexpected transfers

**For service providers (delegates):**
- Clearly communicate the requested spending limit to users
- Implement proper key management for your delegate account
- Track allowance consumption to request re-approval before limits are exhausted

## Delegation vs. Custody

| Aspect | Delegation | Full Custody |
|--------|-----------|--------------|
| Token ownership | User retains | User transfers to custodian |
| Spending control | Capped at approved amount | Full access to transferred funds |
| Revocation | Instant, by owner | Requires custodian cooperation |
| Risk exposure | Limited to approved amount | Entire balance |
| Trust required | Limited | High |

Delegation provides a middle ground—enabling automated payments while limiting risk exposure to the approved amount.

## Related Resources

- [Approve Delegate](/docs/tokens/basics/approve-delegate) — Technical details on the approve instruction
