---
title: Lecture depuis le réseau
description:
  Apprenez à lire des données depuis le réseau blockchain Solana. Ce guide
  couvre la récupération des comptes de portefeuille, des comptes de programme
  et des comptes de jetons en utilisant JavaScript/TypeScript, avec des exemples
  pratiques utilisant la bibliothèque Solana web3.js.
---

Lisez des données du réseau Solana en récupérant différents comptes. Cette
section vous aidera à comprendre la structure des [comptes](/docs/core/accounts)
Solana. Chaque compte Solana possède une
[adresse](/docs/core/accounts#account-address) unique qui est utilisée pour
localiser ses données correspondantes sur la chaîne. Les comptes contiennent
soit des
[données d'état ou un programme exécutable](/docs/core/accounts#types-of-accounts).

## Récupérer un compte de portefeuille

<WithMentions>

Un portefeuille est un compte détenu par le
[System Program](/docs/core/programs#the-system-program). Les portefeuilles sont
principalement utilisés pour détenir des SOL et signer des transactions. Lorsque
des SOL sont envoyés à une nouvelle adresse pour la première fois, un compte
système est automatiquement créé.

L'exemple ci-dessous génère une [nouvelle keypair](mention:keypair),
[demande des SOL](mention:airdrop) pour financer la nouvelle adresse de clé
publique, et [récupère les données du compte](mention:info) pour le portefeuille
nouvellement financé.

<CodeTabs flags="r">

```ts !! title="Fetch account"
import { Keypair, Connection, LAMPORTS_PER_SOL } from "@solana/web3.js";

// !mention keypair
const keypair = Keypair.generate();
console.log(`Public Key: ${keypair.publicKey}`);

const connection = new Connection("http://localhost:8899", "confirmed");

// Funding an address with SOL automatically creates an account
// !mention airdrop
const signature = await connection.requestAirdrop(
  keypair.publicKey,
  LAMPORTS_PER_SOL
);
await connection.confirmTransaction(signature, "confirmed");

// !mention info
const accountInfo = await connection.getAccountInfo(keypair.publicKey);
console.log(JSON.stringify(accountInfo, null, 2));
```

</CodeTabs>
</WithMentions>

<ScrollyCoding>

## !!steps

Lorsque vous récupérez un compte de portefeuille, la réponse inclut les champs
présentés dans l'exemple de sortie à droite.

<CodePlaceholder title="Exemple de sortie" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

Le champ `data` contient les données du compte stockées sous forme d'octets.
Pour les comptes de portefeuille, ce champ est vide (0 octet).

<CodePlaceholder title="Exemple de sortie" />

```json !! title="Example output"
{
  // !focus(1:4)
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

Le champ `executable` indique si le champ `data` du compte contient du code de
programme exécutable. Pour les comptes de portefeuille, ce champ est `false`.

<CodePlaceholder title="Exemple de sortie" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  // !focus
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

Le champ `lamports` contient le solde en SOL du compte, en
[lamports](/docs/references/terminology#lamport).

<CodePlaceholder title="Exemple de sortie" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  // !focus
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

Le champ `owner` indique le programme qui possède le compte. Pour les
portefeuilles, le propriétaire est toujours le System Program, avec l'adresse
`11111111111111111111111111111111`.

<CodePlaceholder title="Exemple de sortie" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  // !focus
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

Le champ `rentEpoch` est un champ hérité d'un mécanisme de rent obsolète. (Ce
champ est inclus pour la rétrocompatibilité.)

<CodePlaceholder title="Exemple de sortie" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  // !focus
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

Le champ `space` indique le nombre d'octets contenus dans le champ `data`. Ce
n'est pas un champ dans le [type Account](/docs/core/accounts#account-structure)
lui-même, mais il est inclus dans la réponse.

Dans cet exemple, le champ `space` est à 0 car le champ `data` contient 0 octets
de données.

<CodePlaceholder title="Exemple de sortie" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  // !focus
  "space": 0
}
```

</ScrollyCoding>

## Récupérer le Token Program

L'exemple ci-dessous récupère le Token Program pour démontrer la différence
entre les comptes de portefeuille et les program accounts. Le program account
stocke le bytecode compilé du
[code source](https://github.com/solana-program/token/tree/main/program) du
Token Program. Vous pouvez consulter ce program account sur
[Solana Explorer](https://explorer.solana.com/address/TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA).

<CodeTabs flags="r">

```ts !! title="Fetch program account"
import { Connection, PublicKey } from "@solana/web3.js";

const connection = new Connection(
  "https://api.mainnet.solana.com",
  "confirmed"
);
// !mark(1:2)
const address = new PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");
const accountInfo = await connection.getAccountInfo(address);

// !collapse(1:17) collapsed
console.log(
  JSON.stringify(
    accountInfo,
    (key, value) => {
      if (key === "data" && value && value.length > 1) {
        return [
          value[0],
          "...truncated, total bytes: " + value.length + "...",
          value[value.length - 1]
        ];
      }
      return value;
    },
    2
  )
);
```

</CodeTabs>

<ScrollyCoding>

## !!steps

Le Token Program est un program account exécutable. Les programmes ont les mêmes
champs sous-jacents que tous les
[comptes](/docs/core/accounts#account-structure), mais avec des différences
clés.

<CodePlaceholder title="Token program account" />

```json !! title="Token program account"
{
  "data": {
    "type": "Buffer",
    "data": [127, "...truncated, total bytes: 134080...", 0]
  },
  "executable": true,
  "lamports": 4522329612,
  "owner": "BPFLoader2111111111111111111111111111111111",
  "rentEpoch": 18446744073709552000,
  "space": 134080
}
```

## !!steps

Le champ `executable` est défini sur `true`, ce qui indique que le champ `data`
du compte contient du code exécutable.

<CodePlaceholder title="Compte du Token Program" />

```json !! title="Token program account"
{
  "data": {
    "type": "Buffer",
    "data": [127, "...truncated, total bytes: 134080...", 0]
  },
  // !focus
  "executable": true,
  "lamports": 4522329612,
  "owner": "BPFLoader2111111111111111111111111111111111",
  "rentEpoch": 18446744073709552000,
  "space": 134080
}
```

## !!steps

Le champ `data` stocke le code exécutable du programme.

<CodePlaceholder title="Compte du Token Program" />

```json !! title="Token program account"
{
  // !focus(1:4)
  "data": {
    "type": "Buffer",
    "data": [127, "...truncated, total bytes: 134080...", 0]
  },
  "executable": true,
  "lamports": 4522329612,
  "owner": "BPFLoader2111111111111111111111111111111111",
  "rentEpoch": 18446744073709552000,
  "space": 134080
}
```

## !!steps

Chaque program account appartient à son
[programme chargeur](/docs/core/programs#loader-programs). Dans cet exemple, le
`owner` est le programme BPFLoader2.

<CodePlaceholder title="Compte du Token Program" />

```json !! title="Token program account"
{
  "data": {
    "type": "Buffer",
    "data": [127, "...truncated, total bytes: 134080...", 0]
  },
  "executable": true,
  "lamports": 4522329612,
  // !focus
  "owner": "BPFLoader2111111111111111111111111111111111",
  "rentEpoch": 18446744073709552000,
  "space": 134080
}
```

</ScrollyCoding>

## Récupérer un mint account

Un
[mint account](https://github.com/solana-program/token/blob/program%40v8.0.0/program/src/state.rs#L16-L30)
est un compte appartenant au Token Program qui stocke les métadonnées globales
pour un jeton spécifique. Cela inclut l'offre totale, le nombre de décimales et
les comptes qui sont autorisés à créer ou geler des jetons. L'adresse du mint
account identifie de manière unique un jeton sur le réseau Solana.

L'exemple ci-dessous récupère le mint account de l'USD Coin pour démontrer
comment l'état d'un programme est stocké dans un compte séparé.

<CodeTabs flags="r">

```ts !! title="Fetch program account"
import { Connection, PublicKey } from "@solana/web3.js";

const connection = new Connection(
  "https://api.mainnet.solana.com",
  "confirmed"
);

// !mark(1:2)
const address = new PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v");
const accountInfo = await connection.getAccountInfo(address);

// !collapse(1:17) collapsed
console.log(
  JSON.stringify(
    accountInfo,
    (key, value) => {
      if (key === "data" && value && value.length > 1) {
        return [
          value[0],
          "...truncated, total bytes: " + value.length + "...",
          value[value.length - 1]
        ];
      }
      return value;
    },
    2
  )
);
```

</CodeTabs>

<ScrollyCoding>

## !!steps

Les mint accounts stockent l'état, pas de code exécutable. Ils appartiennent au
Token Program, qui inclut des instructions définissant comment créer et mettre à
jour les mint accounts.

<CodePlaceholder title="Mint account" />

```json !! title="Mint account"
{
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  "executable": false,
  "lamports": 407438077149,
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

## !!steps

Le champ `data` du mint account stocke l'état, et non du code exécutable, donc
le champ `executable` est `false`.

Le Token Program définit le type de données `Mint`, qui est stocké dans le champ
`data`.

<CodePlaceholder title="Mint account" />

```json !! title="Mint account"
{
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  // !focus
  "executable": false,
  "lamports": 407438077149,
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

## !!steps

Le champ `data` contient l'état sérialisé du compte `Mint`, comme l'autorité de
frappe, l'offre totale, le nombre de décimales.

Pour lire un Mint account, vous devez désérialiser le champ `data` dans le type
de données `Mint`, ce qui est montré dans
l'[exemple suivant](#deserialize-mint-account).

<CodePlaceholder title="Mint account" />

```json !! title="Mint account"
{
  // !focus(1:4)
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  "executable": false,
  "lamports": 407438077149,
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

## !!steps

Le mint account appartient au
[Token Program](/docs/references/terminology#token-program). Cela signifie que
son champ `data` ne peut être modifié que par les instructions du Token Program.

<CodePlaceholder title="Mint Account" />

```json !! title="Mint Account"
{
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  "executable": false,
  "lamports": 407438077149,
  // !focus
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

</ScrollyCoding>

## Désérialiser un mint account

Avant que les octets bruts dans le champ `data` d'un compte puissent être
interprétés de manière significative, ils doivent être désérialisés. Le type de
données approprié est défini par le programme qui possède le compte. La plupart
des programmes Solana fournissent des bibliothèques client avec des fonctions
auxiliaires qui abstraient le processus de désérialisation. Ces fonctions
convertissent les octets bruts du compte en types de données structurées,
facilitant ainsi le travail avec les données du compte.

<WithMentions>

Par exemple, la bibliothèque _shell`@solana/spl-token`_ inclut la fonction
[_ts`getMint()`_](mention:one) pour aider à désérialiser le champ `data` d'un
mint account dans le type de données
[Mint](https://github.com/solana-program/token/blob/program%40v8.0.0/program/src/state.rs#L16-L30)
défini par le Token Program.

<CodeTabs flags="r">

```ts !! title="Deserialize mint account data"
import { PublicKey, Connection } from "@solana/web3.js";
import { getMint } from "@solana/spl-token";

const connection = new Connection(
  "https://api.mainnet.solana.com",
  "confirmed"
);

const address = new PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v");
// !mention one
const mintData = await getMint(connection, address, "confirmed");

// !collapse(1:17) collapsed
console.log(
  JSON.stringify(
    mintData,
    (key, value) => {
      // Convert BigInt to String
      if (typeof value === "bigint") {
        return value.toString();
      }
      // Handle Buffer objects
      if (Buffer.isBuffer(value)) {
        return `<Buffer ${value.toString("hex")}>`;
      }
      return value;
    },
    2
  )
);
```

</CodeTabs>

</WithMentions>

```rs title="Mint account type"
pub struct Mint {
    /// Optional authority used to mint new tokens. The mint authority may only
    /// be provided during mint creation. If no mint authority is present
    /// then the mint has a fixed supply and no further tokens may be
    /// minted.
    pub mint_authority: COption<Pubkey>,
    /// Total supply of tokens.
    pub supply: u64,
    /// Number of base 10 digits to the right of the decimal place.
    pub decimals: u8,
    /// Is `true` if this structure has been initialized
    pub is_initialized: bool,
    /// Optional authority to freeze token accounts.
    pub freeze_authority: COption<Pubkey>,
}
```

<ScrollyCoding>

## !!steps

La fonction _ts`getMint()`_ désérialise le champ `data` d'un mint account dans
le type de compte Mint.

```json title="Mint account"
{
  // !focus(1:4)
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  "executable": false,
  "lamports": 407438077149,
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

Vous pouvez consulter les données entièrement désérialisées du
[mint account](https://explorer.solana.com/address/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v?cluster=mainnet-beta)
sur le Solana Explorer.

<CodePlaceholder title="Données du mint désérialisées" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Le champ `address` contient l'adresse du mint account.

<CodePlaceholder title="Données du mint désérialisées" />

```json !! title="Deserialized mint data"
{
  // !focus
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Le champ `mintAuthority` indique le seul compte qui peut créer de nouvelles
unités du token.

<CodePlaceholder title="Données du mint désérialisées" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  // !focus
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Le champ `supply` indique le nombre total de tokens qui ont été créés. Cette
valeur est mesurée dans la plus petite unité du token. Pour obtenir l'offre
totale en unités standard, ajustez la valeur du champ `supply` par le
`decimals`.

<CodePlaceholder title="Données du mint désérialisées" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  // !focus
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Le champ `decimals` indique le nombre de décimales pour le token.

<CodePlaceholder title="Données du mint désérialisées" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  // !focus
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Le champ `isInitialized` indique si le mint account a été initialisé. Ce champ
est une vérification de sécurité utilisée dans le Token Program.

<CodePlaceholder title="Données du mint désérialisées" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  // !focus
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Le champ `freezeAuthority` indique le compte ayant l'autorité de geler les token
accounts. Un token account gelé ne peut pas transférer ou brûler le token qu'il
contient.

<CodePlaceholder title="Données du mint désérialisées" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  // !focus
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Le champ `tlvData` contient des données supplémentaires pour les Token
Extensions et nécessite une désérialisation supplémentaire. Ce champ n'est
pertinent que pour les comptes créés par le
[Programme Token Extension](/docs/tokens/extensions) (Token2022).

<CodePlaceholder title="Données du mint désérialisées" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  // !focus(1:4)
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

</ScrollyCoding>
