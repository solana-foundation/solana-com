---
title: Interagir avec Solana
description: Connectez-vous au réseau et explorez les données de la blockchain
---

Avant de créer des flux de paiement, vous devez vous connecter à Solana et
comprendre comment interroger les données du réseau. Ce guide couvre les bases :
établir une connexion et utiliser les méthodes RPC dont vous aurez besoin pour
les paiements en utilisant le SDK TypeScript
[@solana/kit](https://www.npmjs.com/package/@solana/kit) et la
[CLI Solana](https://solana.com/docs/intro/installation). De plus, nous
aborderons les bases de l'utilisation du
[Solana Explorer](https://explorer.solana.com) pour vérifier manuellement les
paiements, inspecter les comptes et déboguer les problèmes.

## Se connecter à Solana

L'API RPC de Solana est le principal moyen d'interagir de manière programmatique
avec le réseau. Votre URL RPC est en fait une clé API pour accéder au réseau.

<Callout type="caution" title="N'utilisez pas le RPC public en production">
  Les points de terminaison publics (`api.mainnet-beta.solana.com`,
  `api.devnet.solana.com`) sont limités en débit, n'ont aucun SLA et ne
  conviennent pas aux flux de paiement en production. Utilisez un [fournisseur
  RPC](https://solana.com/rpc) pour sécuriser un point de terminaison RPC privé
  pour les déploiements en production.
</Callout>

Pour le développement et les tests, vous pouvez utiliser des points de
terminaison publics avec limitation de débit.

Créez un client RPC pour interagir avec le réseau :

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
import { createSolanaRpc, createSolanaRpcSubscriptions } from "@solana/kit";

const rpc = createSolanaRpc("https://api.mainnet-beta.solana.com");
const rpcSubscriptions = createSolanaRpcSubscriptions(
  "wss://api.mainnet-beta.solana.com"
);
```

```bash !! title="CLI"
solana config set --url https://api.mainnet-beta.solana.com
solana config get # to verify the connection
```

</CodeTabs>

<Callout>
  Pour le développement, utilisez devnet (`https://api.devnet.solana.com`) ou un
  validateur local comme
  [Surfpool](/docs/intro/installation/surfpool-cli-basics).
</Callout>

## Méthodes RPC courantes

L'[API JSON-RPC](/docs/rpc) de Solana expose des méthodes pour interroger le
réseau. Voici celles que vous utiliserez le plus pour les flux de paiement.

### Obtenir les informations d'un compte

Tous les comptes sur Solana sont adressables par leur clé publique. Utilisez la
méthode RPC [`getAccountInfo`](/docs/rpc/http/getaccountinfo) pour récupérer les
informations sur n'importe quel compte. La méthode `getAccountInfo` renvoie un
objet `AccountInfo`, qui contient la clé publique du compte, le solde SOL, les
données et d'autres métadonnées.

Le champ `data` est une chaîne encodée en base64 des données du compte. Vous
pouvez l'encoder en octets en utilisant la méthode `getBase64Codec` du package
`@solana/kit` et ensuite le décoder en un objet lisible en utilisant le codec
attendu (si connu) pour les données du compte (par exemple, `getTokenCodec` pour
les token accounts).

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const accountInfo = await rpc
  .getAccountInfo(address("7EcDhSYGxXyscszYEp35KHN8vvw3svAuLKTzXwCFLtV"), {
    encoding: "base64"
  })
  .send();
const dataBytes = getBase64Codec().encode(accountInfo.value.data);
const parsedTokenData = getTokenCodec().decode(dataBytes);

console.log(parsedTokenData);
```

```bash !! title="CLI"
solana account 7EcDhSYGxXyscszYEp35KHN8vvw3svAuLKTzXwCFLtV
```

</CodeTabs>

### Obtenir les soldes de tokens

Vérifiez le solde d'un token account en utilisant la méthode RPC
[`getTokenAccountBalance`](/docs/rpc/http/gettokenaccountbalance) :

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const balance = await rpc.getTokenAccountBalance(tokenAccountAddress).send();

console.log(balance.value.uiAmount); // Human-readable (e.g., 100.50)
console.log(balance.value.amount); // Base units (e.g., "100500000")
```

```bash !! title="CLI"
spl-token balance --address 7v45FoihixmfocS3LbANUrEGZQKEJ7QQUg8K9jtZd3St
```

</CodeTabs>

### Construire des transactions

Chaque transaction nécessite un blockhash récent pour garantir sa validité (et
qu'elle n'est pas obsolète). Récupérez-en un avant de créer une transaction de
paiement en utilisant la méthode RPC
[`getLatestBlockhash`](/docs/rpc/http/getlatestblockhash) :

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const { value: latestBlockhash } = await rpc.getLatestBlockhash().send();
```

```bash !! title="CLI"
solana block-height
```

</CodeTabs>

> Les blockhashes expirent après ~60 secondes. Récupérez-en un nouveau
> immédiatement avant de signer et d'envoyer.

### Vérifier le statut d'une transaction

Vérifiez qu'une transaction est réglée en utilisant la méthode RPC
[`getSignatureStatuses`](/docs/rpc/http/getsignaturestatuses) :

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const status = await rpc.getSignatureStatuses([signature]).send();

const result = status.value[0];
// result.confirmationStatus: "processed" | "confirmed" | "finalized"
```

```bash !! title="CLI"
solana confirm <SIGNATURE>
# For more details:
solana confirm <SIGNATURE> -v
```

</CodeTabs>

### Obtenir les détails d'une transaction

Récupérez les détails complets d'une transaction confirmée en utilisant la
méthode RPC [`getTransaction`](/docs/rpc/http/gettransaction) :

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const transaction = await rpc
  .getTransaction(signature, { maxSupportedTransactionVersion: 0 })
  .send();
```

```bash !! title="CLI"
solana transaction-history <ADDRESS> --limit 1 -v
# Or decode a specific transaction:
solana confirm <SIGNATURE> -v
```

</CodeTabs>

### Historique des transactions

Obtenez les transactions récentes pour une adresse en utilisant la méthode RPC
[`getSignaturesForAddress`](/docs/rpc/http/getsignaturesforaddress) :

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const signatures = await rpc
  .getSignaturesForAddress(walletAddress, { limit: 10 })
  .send();
```

```bash !! title="CLI"
solana transaction-history <ADDRESS> --limit 10
```

</CodeTabs>

> Pour une surveillance complète des paiements, consultez
> [Accepter les paiements](/docs/payments/accept-payments) qui couvre les
> webhooks et la détection des transactions en temps réel.

## Explorer les données publiques

Le registre public de Solana signifie que chaque transaction, token account et
mint est entièrement vérifiable. Les explorateurs de blocs vous permettent de
vérifier manuellement les paiements, d'inspecter les comptes et de déboguer les
problèmes sans écrire de code.

**Ce que vous pouvez rechercher :**

- Vérifier qu'un paiement a été réglé
- Inspecter les soldes des token accounts
- Déboguer les transactions échouées
- Rechercher les détails d'un mint (supply, décimales, autorité)

**Explorateurs courants :** [Solana Explorer](https://explorer.solana.com),
[SolanaFM](https://solana.fm), [Solscan](https://solscan.io),
[Orb](https://www.orbmarkets.io/)

**Exemples de liens :**

- [USDC Token Mint](https://explorer.solana.com/address/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v)
  — Supply, marchés, détenteurs et transactions pour l'USDC
- [Transfert de token USDC](https://explorer.solana.com/tx/3d2mQChCbqM5iogAN5PZw7KGZuVtQq3LbwU8hk55u4iUvYH1XJ7SQVQpWwoZj43MtthBqGBoqGBe9fn4Bo1VznjG)
  — Détails d'une transaction de paiement en USDC
- [Token account USDG](https://explorer.solana.com/address/7v45FoihixmfocS3LbANUrEGZQKEJ7QQUg8K9jtZd3St)
  — Solde USDG d'un utilisateur et historique des transactions
