---
title: Δικαιώματα δαπάνης
description:
  Εξουσιοδοτήστε τρίτους για δαπάνη tokens για αυτοματοποιημένες και εγγυημένες
  πληρωμές
---

Τα Token Programs του Solana υποστηρίζουν **εξουσιοδότηση**—παραχώρηση άδειας σε
άλλο λογαριασμό να μεταφέρει tokens από το token account σας μέχρι ένα
καθορισμένο όριο. Αυτό επιτρέπει περιπτώσεις χρήσης όπως αυτοματοποιημένες
πληρωμές, υπηρεσίες εγγύησης και επεξεργασία πληρωμών από τρίτους χωρίς να
παραδώσετε την κατοχή των κεφαλαίων σας.

## Πώς λειτουργεί η εξουσιοδότηση

Όταν εγκρίνετε έναν εξουσιοδοτημένο, εξουσιοδοτείτε έναν συγκεκριμένο λογαριασμό
να μεταφέρει tokens εκ μέρους σας:

- **Ο κάτοχος διατηρεί την κατοχή**: Εξακολουθείτε να κατέχετε τα tokens και
  μπορείτε να τα μεταφέρετε ή να ανακαλέσετε την εξουσιοδότηση ανά πάσα στιγμή
- **Περιορισμένη δαπάνη**: Ο εξουσιοδοτημένος μπορεί να μεταφέρει μόνο μέχρι το
  εγκεκριμένο ποσό
- **Ένας εξουσιοδοτημένος ανά λογαριασμό**: Κάθε token account μπορεί να έχει
  μόνο έναν ενεργό εξουσιοδοτημένο
- **Η νέα έγκριση αντικαθιστά την παλιά**: Η έγκριση νέου εξουσιοδοτημένου
  ανακαλεί αυτόματα τον προηγούμενο

<Callout type="info">
  Η εξουσιοδότηση δεν μεταβιβάζει την κατοχή. Ο εξουσιοδοτημένος μπορεί να
  δαπανήσει tokens μέχρι το όριο, αλλά δεν μπορεί να αποκτήσει πρόσβαση ή να
  αδειάσει τον λογαριασμό πέρα από το εγκεκριμένο ποσό. Ο κάτοχος μπορεί να
  ανακαλέσει ανά πάσα στιγμή.
</Callout>

## Επιχειρηματικές περιπτώσεις χρήσης

| Περίπτωση χρήσης                | Πώς βοηθά η εξουσιοδότηση                                                    |
| ------------------------------- | ---------------------------------------------------------------------------- |
| **Επεξεργαστές πληρωμών**       | Ο έμπορος παραχωρεί άδεια στον επεξεργαστή να διευθετεί συναλλαγές           |
| **Αυτοματοποιημένη μισθοδοσία** | Το ταμείο εγκρίνει την υπηρεσία μισθοδοσίας να καταβάλει μισθούς             |
| **Υπηρεσίες εγγύησης**          | Ο αγοραστής εξουσιοδοτεί τον πράκτορα εγγύησης για υπό όρους απελευθέρωση    |
| **Πλατφόρμες συναλλαγών**       | Ο χρήστης εγκρίνει το ανταλλακτήριο να εκτελεί συναλλαγές εκ μέρους του      |
| **Έκδοση καρτών**               | Ο χρήστης εγκρίνει τον εκδότη κάρτας να χρεώνει αγορές στο token account του |

## Έγκριση εξουσιοδοτημένου

Παραχωρήστε σε έναν άλλο λογαριασμό άδεια να ξοδέψει tokens από τον λογαριασμό
σας:

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
import { getApproveCheckedInstruction } from "@solana-program/token";

// Approve delegate to spend up to 1,000 USDC (6 decimals)
const approveInstruction = getApproveCheckedInstruction({
  source: tokenAccountAddress, // Your token account
  mint: usdcMintAddress, // USDC mint
  delegate: delegateAddress, // Account receiving permission
  owner: ownerKeypair, // You (must sign)
  amount: 1_000_000_000n, // 1,000 USDC in base units
  decimals: 6
});
```

```bash !! title="CLI"
spl-token approve <TOKEN_ACCOUNT> <AMOUNT> <DELEGATE_ADDRESS>
# Example: Approve 1000 USDC to a delegate
spl-token approve 7v45Foih... 1000 DeLe9ate...
```

</CodeTabs>

**Παράμετροι:**

- `source`: Ο λογαριασμός token που παραχωρεί την άδεια
- `delegate`: Ο λογαριασμός που θα έχει άδεια δαπάνης
- `owner`: Τρέχων κάτοχος του λογαριασμού token (πρέπει να υπογράψει τη
  συναλλαγή)
- `amount`: Μέγιστος αριθμός tokens που μπορεί να μεταφέρει ο εκπρόσωπος
- `decimals`: Δεκαδικά ψηφία του token για επικύρωση (αποτρέπει σφάλματα
  δεκαδικών)

### Επίδειξη

<CodeTabs flags="r">

```ts !! title="Approve Delegate"
// !collapse(1:15) collapsed
// Click ">" icon on left to expand demo imports
import { createClient, lamports } from "@solana/client";
import { generateKeypair } from "@solana/client/server";
import type { ServerKeypair } from "@solana/client/server";
import { getCreateAccountInstruction } from "@solana-program/system";
import {
  getCreateAssociatedTokenInstructionAsync,
  getInitializeMintInstruction,
  getMintSize,
  findAssociatedTokenPda,
  getMintToInstruction,
  getApproveCheckedInstruction,
  fetchToken,
  TOKEN_2022_PROGRAM_ADDRESS
} from "@solana-program/token-2022";

// Generate keypairs for sender and delegate
const sender = (await generateKeypair()).signer;
const delegate = (await generateKeypair()).signer;

console.log("Sender Address:", sender.address);
console.log("Delegate Address:", delegate.address);

// Demo Setup: Create client, mint account, token account, and fund with initial tokens
const { client, mint, senderAta } = await demoSetup(sender);

console.log("\nMint Address:", mint.address);
console.log("Sender ATA:", senderAta);

// =============================================================================
// Approve Delegate
// =============================================================================

// Create instruction to approve delegate
// !mark(1:8)
const approveInstruction = getApproveCheckedInstruction({
  source: senderAta,
  mint: mint.address,
  delegate: delegate.address,
  owner: sender,
  amount: 1_000_000n, // 1.0 tokens with 6 decimals
  decimals: 6
});

// Send approve transaction
// !mark(1:4)
const signature = await client.transaction.prepareAndSend({
  authority: sender,
  instructions: [approveInstruction]
});

console.log("\n=== Approve Delegate ===");
console.log("Transaction Signature:", signature);

// Fetch token account data to show delegate is set
const tokenData = await fetchToken(client.runtime.rpc, senderAta);
console.log("\nSender Token Account Data:", tokenData.data);

// =============================================================================
// Demo Setup Helper Function
// =============================================================================
// !collapse(1:1000) collapsed

/**
 * Sets up for a delegate demo:
 * - Creates @solana/client instance
 * - Airdrops SOL to sender for transaction fees
 * - Generates mint keypair and creates/initializes mint account
 * - Creates associated token account for sender
 * - Mints initial tokens to sender
 *
 * @param sender - The sender's keypair (will be funded and used as mint authority)
 * @returns Returns client instance, mint, and ATA address
 */
async function demoSetup(sender: ServerKeypair["signer"]) {
  // Create @solana/client instance pointing to local validator
  const client = createClient({
    endpoint: "http://localhost:8899",
    websocketEndpoint: "ws://localhost:8900",
    commitment: "confirmed",
    logger: () => {} // Disable all logs
  });

  // Fund sender with SOL for transaction fees
  await client.actions.requestAirdrop(sender.address, lamports(1_000_000_000n));

  // Generate keypair to use as address of mint
  const mint = (await generateKeypair()).signer;

  // Get default mint account size (in bytes), no extensions enabled
  const space = BigInt(getMintSize());

  // Get minimum balance for rent exemption
  const rent = await client.runtime.rpc
    .getMinimumBalanceForRentExemption(space)
    .send();

  // Instruction to create new account for mint (token program)
  // Invokes the system program
  const createAccountInstruction = getCreateAccountInstruction({
    payer: sender,
    newAccount: mint,
    lamports: rent,
    space,
    programAddress: TOKEN_2022_PROGRAM_ADDRESS
  });

  // Instruction to initialize mint account data
  // Invokes the token 2022 program
  const initializeMintInstruction = getInitializeMintInstruction({
    mint: mint.address,
    decimals: 6,
    mintAuthority: sender.address
  });

  // Derive sender's associated token account address (ATA)
  const [senderAta] = await findAssociatedTokenPda({
    mint: mint.address,
    owner: sender.address,
    tokenProgram: TOKEN_2022_PROGRAM_ADDRESS
  });

  // Create instruction for sender's ATA
  const createSenderAtaInstruction =
    await getCreateAssociatedTokenInstructionAsync({
      payer: sender,
      mint: mint.address,
      owner: sender.address
    });

  // Create instruction to mint initial tokens to sender
  const mintToInstruction = getMintToInstruction({
    mint: mint.address,
    token: senderAta,
    mintAuthority: sender.address,
    amount: 2_000_000n // Mint 2.00 tokens (2,000,000 base units with 6 decimals)
  });

  // Combine all instructions and send using @solana/client transaction helper
  const setupInstructions = [
    createAccountInstruction, // Create mint account
    initializeMintInstruction, // Initialize mint
    createSenderAtaInstruction, // Create sender's ATA
    mintToInstruction // Mint tokens to sender
  ];

  // Prepare and send transaction using @solana/client
  await client.transaction.prepareAndSend({
    authority: sender,
    instructions: setupInstructions
  });

  return {
    client,
    mint,
    senderAta
  };
}
```

</CodeTabs>

## Ανάκληση εκπροσώπου

Αφαιρέστε όλες τις άδειες δαπάνης από τον τρέχοντα εκπρόσωπο:

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
import { getRevokeInstruction } from "@solana-program/token";

const revokeInstruction = getRevokeInstruction({
  source: tokenAccountAddress, // Your token account
  owner: ownerKeypair // You (must sign)
});
```

```bash !! title="CLI"
spl-token revoke <TOKEN_ACCOUNT>
```

</CodeTabs>

<Callout type="caution">
  Η ανάκληση αφαιρεί **όλες** τις άδειες εκπροσώπου—δεν υπάρχει μερική ανάκληση.
  Αν χρειάζεται να μειώσετε το όριο, εγκρίνετε τον ίδιο εκπρόσωπο με χαμηλότερο
  ποσό.
</Callout>

### Επίδειξη

<CodeTabs flags="r">

```ts !! title="Revoke Delegate"
// !collapse(1:16) collapsed
// Click ">" icon on left to expand demo imports
import { createClient, lamports } from "@solana/client";
import { generateKeypair } from "@solana/client/server";
import type { ServerKeypair } from "@solana/client/server";
import { getCreateAccountInstruction } from "@solana-program/system";
import {
  getCreateAssociatedTokenInstructionAsync,
  getInitializeMintInstruction,
  getMintSize,
  findAssociatedTokenPda,
  getMintToInstruction,
  getApproveCheckedInstruction,
  getRevokeInstruction,
  fetchToken,
  TOKEN_2022_PROGRAM_ADDRESS
} from "@solana-program/token-2022";

// Generate keypairs for sender and delegate
const sender = (await generateKeypair()).signer;
const delegate = (await generateKeypair()).signer;

console.log("Sender Address:", sender.address);
console.log("Delegate Address:", delegate.address);

// Demo Setup: Create client, mint account, token account, and fund with initial tokens
const { client, mint, senderAta } = await demoSetup(sender);

console.log("\nMint Address:", mint.address);
console.log("Sender ATA:", senderAta);

// =============================================================================
// Transaction 1: Approve Delegate
// =============================================================================

// Create instruction to approve delegate
// !mark(1:8)
const approveInstruction = getApproveCheckedInstruction({
  source: senderAta,
  mint: mint.address,
  delegate: delegate.address,
  owner: sender,
  amount: 1_000_000n, // 1.0 tokens with 6 decimals
  decimals: 6
});

// Send approve transaction
// !mark(1:5)
const approveSignature = await client.transaction.prepareAndSend({
  authority: sender,
  instructions: [approveInstruction]
});

console.log("\n=== Transaction 1: Approve Delegate ===");
console.log("Transaction Signature:", approveSignature);

// Fetch token account data to show delegate is set
const tokenDataAfterApprove = await fetchToken(client.runtime.rpc, senderAta);
console.log("\nSender Token Account Data:", tokenDataAfterApprove.data);

// =============================================================================
// Transaction 2: Revoke Delegate
// =============================================================================

// Create instruction to revoke delegate
// !mark(1:4)
const revokeInstruction = getRevokeInstruction({
  source: senderAta,
  owner: sender
});

// Send revoke transaction
// !mark(1:5)
const revokeSignature = await client.transaction.prepareAndSend({
  authority: sender,
  instructions: [revokeInstruction]
});

console.log("\n=== Transaction 2: Revoke Delegate ===");
console.log("Transaction Signature:", revokeSignature);

// Fetch token account data to show delegate is revoked
const tokenDataAfterRevoke = await fetchToken(client.runtime.rpc, senderAta);
console.log("\nSender Token Account Data:", tokenDataAfterRevoke.data);

// =============================================================================
// Demo Setup Helper Function
// =============================================================================
// !collapse(1:1000) collapsed

/**
 * Sets up for a delegate demo:
 * - Creates @solana/client instance
 * - Airdrops SOL to sender for transaction fees
 * - Generates mint keypair and creates/initializes mint account
 * - Creates associated token account for sender
 * - Mints initial tokens to sender
 *
 * @param sender - The sender's keypair (will be funded and used as mint authority)
 * @returns Returns client instance, mint, and ATA address
 */
async function demoSetup(sender: ServerKeypair["signer"]) {
  // Create @solana/client instance pointing to local validator
  const client = createClient({
    endpoint: "http://localhost:8899",
    websocketEndpoint: "ws://localhost:8900",
    commitment: "confirmed",
    logger: () => {} // Disable all logs
  });

  // Fund sender with SOL for transaction fees
  await client.actions.requestAirdrop(sender.address, lamports(1_000_000_000n));

  // Generate keypair to use as address of mint
  const mint = (await generateKeypair()).signer;

  // Get default mint account size (in bytes), no extensions enabled
  const space = BigInt(getMintSize());

  // Get minimum balance for rent exemption
  const rent = await client.runtime.rpc
    .getMinimumBalanceForRentExemption(space)
    .send();

  // Instruction to create new account for mint (token program)
  // Invokes the system program
  const createAccountInstruction = getCreateAccountInstruction({
    payer: sender,
    newAccount: mint,
    lamports: rent,
    space,
    programAddress: TOKEN_2022_PROGRAM_ADDRESS
  });

  // Instruction to initialize mint account data
  // Invokes the token 2022 program
  const initializeMintInstruction = getInitializeMintInstruction({
    mint: mint.address,
    decimals: 6,
    mintAuthority: sender.address
  });

  // Derive sender's associated token account address (ATA)
  const [senderAta] = await findAssociatedTokenPda({
    mint: mint.address,
    owner: sender.address,
    tokenProgram: TOKEN_2022_PROGRAM_ADDRESS
  });

  // Create instruction for sender's ATA
  const createSenderAtaInstruction =
    await getCreateAssociatedTokenInstructionAsync({
      payer: sender,
      mint: mint.address,
      owner: sender.address
    });

  // Create instruction to mint initial tokens to sender
  const mintToInstruction = getMintToInstruction({
    mint: mint.address,
    token: senderAta,
    mintAuthority: sender.address,
    amount: 2_000_000n // Mint 2.00 tokens (2,000,000 base units with 6 decimals)
  });

  // Combine all instructions and send using @solana/client transaction helper
  const setupInstructions = [
    createAccountInstruction, // Create mint account
    initializeMintInstruction, // Initialize mint
    createSenderAtaInstruction, // Create sender's ATA
    mintToInstruction // Mint tokens to sender
  ];

  // Prepare and send transaction using @solana/client
  await client.transaction.prepareAndSend({
    authority: sender,
    instructions: setupInstructions
  });

  return {
    client,
    mint,
    senderAta
  };
}
```

</CodeTabs>

## Μεταφορά ως εκπρόσωπος

Όταν ενεργείτε ως εκπρόσωπος, χρησιμοποιήστε μια τυπική μεταφορά αλλά υπογράψτε
με το keypair του εκπροσώπου αντί του κατόχου:

```ts title="Transfer as Delegate"
import { getTransferCheckedInstruction } from "@solana-program/token";

const transferInstruction = getTransferCheckedInstruction({
  source: ownerTokenAccount, // The account you have permission to spend from
  mint: usdcMintAddress,
  destination: recipientTokenAccount,
  authority: delegateKeypair, // You (the delegate) sign, not the owner
  amount: 100_000_000n, // 100 USDC
  decimals: 6
});
```

Η μεταφορά θα επιτύχει αν:

- Ο λογαριασμός προέλευσης έχει επαρκές υπόλοιπο
- Ο εκπρόσωπος υπογράφει τη συναλλαγή

Κάθε μεταφορά μειώνει το υπόλοιπο επιτρεπόμενο ποσό. Όταν το επιτρεπόμενο ποσό
φτάσει στο μηδέν, ο εκπρόσωπος δεν μπορεί πλέον να μεταφέρει tokens.

### Επίδειξη

<CodeTabs flags="r">

```ts !! title="Transfer as Delegate"
// !collapse(1:16) collapsed
// Click ">" icon on left to expand demo imports
import { createClient, lamports } from "@solana/client";
import { generateKeypair } from "@solana/client/server";
import type { ServerKeypair } from "@solana/client/server";
import { getCreateAccountInstruction } from "@solana-program/system";
import {
  getCreateAssociatedTokenInstructionAsync,
  getInitializeMintInstruction,
  getMintSize,
  findAssociatedTokenPda,
  getMintToInstruction,
  getApproveCheckedInstruction,
  getTransferCheckedInstruction,
  fetchToken,
  TOKEN_2022_PROGRAM_ADDRESS
} from "@solana-program/token-2022";

// Generate keypairs for sender, delegate, and recipient
const sender = (await generateKeypair()).signer;
const delegate = (await generateKeypair()).signer;
const recipient = (await generateKeypair()).signer;

console.log("Sender Address:", sender.address);
console.log("Delegate Address:", delegate.address);
console.log("Recipient Address:", recipient.address);

// Demo Setup: Create client, mint account, token accounts, and fund with initial tokens
const { client, mint, senderAta, recipientAta } = await demoSetup(
  sender,
  delegate,
  recipient
);

console.log("\nMint Address:", mint.address);
console.log("Sender ATA:", senderAta);
console.log("Recipient ATA:", recipientAta);

// =============================================================================
// Transaction 1: Approve Delegate
// =============================================================================

// Create instruction to approve delegate
// !mark(1:8)
const approveInstruction = getApproveCheckedInstruction({
  source: senderAta,
  mint: mint.address,
  delegate: delegate.address,
  owner: sender,
  amount: 1_000_000n, // 1.0 tokens with 6 decimals
  decimals: 6
});

// Send approve transaction
const approveSignature = await client.transaction.prepareAndSend({
  authority: sender,
  instructions: [approveInstruction]
});

console.log("\n=== Transaction 1: Approve Delegate ===");
console.log("Delegate Address:", delegate.address);
console.log("Transaction Signature:", approveSignature);

// =============================================================================
// Fetch Token Account Data to Demonstrate Delegate is Set
// =============================================================================

const tokenAccountData = await fetchToken(client.runtime.rpc, senderAta);
console.log("\nSender Token Account Data:", tokenAccountData.data);

// =============================================================================
// Transaction 2: Transfer Using Delegate
// =============================================================================

// Create instruction to transfer tokens using delegate
// Note: delegate is the authority here, not the owner
const transferInstruction = getTransferCheckedInstruction({
  source: senderAta,
  mint: mint.address,
  destination: recipientAta,
  // !mark
  authority: delegate, // Delegate signs this transaction
  amount: 500_000n, // 0.5 tokens with 6 decimals
  decimals: 6
});

// Send transfer transaction
// Delegate pays for the transaction and authorizes the transfer (sender not needed)
const transferSignature = await client.transaction.prepareAndSend({
  // !mark
  authority: delegate, // Delegate pays fee and signs
  instructions: [transferInstruction]
});

// =============================================================================
// Fetch Final Token Account Balances
// =============================================================================

const finalSenderToken = await fetchToken(client.runtime.rpc, senderAta);
const finalRecipientToken = await fetchToken(client.runtime.rpc, recipientAta);

console.log("\n=== Transaction 2: Transfer Using Delegate ===");
console.log("Transaction Signature:", transferSignature);
console.log("\nSender Token Account Data:", finalSenderToken.data);
console.log("\nRecipient Token Account Data:", finalRecipientToken.data);

// =============================================================================
// Demo Setup Helper Function
// =============================================================================
// !collapse(1:1000) collapsed

/**
 * Sets up for a delegate transfer demo:
 * - Creates @solana/client instance
 * - Airdrops SOL to sender and delegate for transaction fees
 * - Generates mint keypair and creates/initializes mint account
 * - Creates associated token accounts for sender and recipient
 * - Mints initial tokens to sender
 *
 * @param sender - The sender's keypair (will be funded and used as mint authority)
 * @param delegate - The delegate's keypair (will be funded for transaction fees)
 * @param recipient - The recipient's keypair
 * @returns Returns client instance, mint, and ATA addresses
 */
async function demoSetup(
  sender: ServerKeypair["signer"],
  delegate: ServerKeypair["signer"],
  recipient: ServerKeypair["signer"]
) {
  // Create @solana/client instance pointing to local validator
  const client = createClient({
    endpoint: "http://localhost:8899",
    websocketEndpoint: "ws://localhost:8900",
    commitment: "confirmed",
    logger: () => {} // Disable all logs
  });

  // Fund sender and delegate with SOL for transaction fees
  await client.actions.requestAirdrop(sender.address, lamports(1_000_000_000n));
  await client.actions.requestAirdrop(
    delegate.address,
    lamports(1_000_000_000n)
  );

  // Generate keypair to use as address of mint
  const mint = (await generateKeypair()).signer;

  // Get default mint account size (in bytes), no extensions enabled
  const space = BigInt(getMintSize());

  // Get minimum balance for rent exemption
  const rent = await client.runtime.rpc
    .getMinimumBalanceForRentExemption(space)
    .send();

  // Instruction to create new account for mint (token program)
  // Invokes the system program
  const createAccountInstruction = getCreateAccountInstruction({
    payer: sender,
    newAccount: mint,
    lamports: rent,
    space,
    programAddress: TOKEN_2022_PROGRAM_ADDRESS
  });

  // Instruction to initialize mint account data
  // Invokes the token 2022 program
  const initializeMintInstruction = getInitializeMintInstruction({
    mint: mint.address,
    decimals: 6,
    mintAuthority: sender.address
  });

  // Derive sender's associated token account address (ATA)
  const [senderAta] = await findAssociatedTokenPda({
    mint: mint.address,
    owner: sender.address,
    tokenProgram: TOKEN_2022_PROGRAM_ADDRESS
  });

  // Derive recipient's associated token account address (ATA)
  const [recipientAta] = await findAssociatedTokenPda({
    mint: mint.address,
    owner: recipient.address,
    tokenProgram: TOKEN_2022_PROGRAM_ADDRESS
  });

  // Create instruction for sender's ATA
  const createSenderAtaInstruction =
    await getCreateAssociatedTokenInstructionAsync({
      payer: sender,
      mint: mint.address,
      owner: sender.address
    });

  // Create instruction for recipient's ATA
  const createRecipientAtaInstruction =
    await getCreateAssociatedTokenInstructionAsync({
      payer: sender,
      mint: mint.address,
      owner: recipient.address
    });

  // Create instruction to mint initial tokens to sender
  const mintToInstruction = getMintToInstruction({
    mint: mint.address,
    token: senderAta,
    mintAuthority: sender.address,
    amount: 2_000_000n // Mint 2.00 tokens (2,000,000 base units with 6 decimals)
  });

  // Combine all instructions and send using @solana/client transaction helper
  const setupInstructions = [
    createAccountInstruction, // Create mint account
    initializeMintInstruction, // Initialize mint
    createSenderAtaInstruction, // Create sender's ATA
    createRecipientAtaInstruction, // Create recipient's ATA
    mintToInstruction // Mint tokens to sender
  ];

  // Prepare and send transaction using @solana/client
  await client.transaction.prepareAndSend({
    authority: sender,
    instructions: setupInstructions
  });

  return {
    client,
    mint,
    senderAta,
    recipientAta
  };
}
```

</CodeTabs>

## Έλεγχος κατάστασης εξουσιοδότησης

Ερωτήστε έναν λογαριασμό token για να δείτε τον τρέχοντα εκπρόσωπό του και το
υπόλοιπο όριο:

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
import { fetchToken } from "@solana-program/token";

const tokenAccount = await fetchToken(rpc, tokenAccountAddress);

if (tokenAccount.data.delegate) {
  console.log("Delegate:", tokenAccount.data.delegate);
  console.log("Remaining allowance:", tokenAccount.data.delegatedAmount);
} else {
  console.log("No delegate set");
}
```

```bash !! title="CLI"
spl-token display <TOKEN_ACCOUNT>
# Look for "Delegate" and "Delegated Amount" fields
```

</CodeTabs>

### Demo

<CodeTabs flags="r">

```ts !! title="Check Delegation Status"
// !collapse(1:15) collapsed
// Click ">" icon on left to expand demo imports
import { createClient, lamports } from "@solana/client";
import { generateKeypair } from "@solana/client/server";
import type { ServerKeypair } from "@solana/client/server";
import { getCreateAccountInstruction } from "@solana-program/system";
import {
  getCreateAssociatedTokenInstructionAsync,
  getInitializeMintInstruction,
  getMintSize,
  findAssociatedTokenPda,
  getMintToInstruction,
  getApproveCheckedInstruction,
  fetchToken,
  TOKEN_2022_PROGRAM_ADDRESS
} from "@solana-program/token-2022";

// Demo Setup: Create client, mint, two token accounts (one with delegate, one without)
const { client, ataWithDelegate, ataWithoutDelegate } = await demoSetup();

// =============================================================================
// Fetch Token Accounts
// =============================================================================

// Fetch token account with delegate
// !mark
const tokenWithDelegate = await fetchToken(client.runtime.rpc, ataWithDelegate);
console.log("Token Account with Delegate:", tokenWithDelegate);

// Fetch token account without delegate
// !mark
const tokenWithoutDelegate = await fetchToken(
  client.runtime.rpc,
  ataWithoutDelegate
);
console.log("\nToken Account without Delegate:", tokenWithoutDelegate);

// =============================================================================
// Demo Setup Helper Function
// =============================================================================
// !collapse(1:1000) collapsed

/**
 * Sets up two token accounts for comparison:
 * - Creates @solana/client instance
 * - Airdrops SOL to owner for transaction fees
 * - Creates mint and two token accounts
 * - Approves delegate on one token account
 *
 * @returns Returns client and both ATA addresses
 */
async function demoSetup() {
  // Generate keypairs
  const owner = (await generateKeypair()).signer;
  const owner2 = (await generateKeypair()).signer;
  const delegate = (await generateKeypair()).signer;

  // Create @solana/client instance pointing to local validator
  const client = createClient({
    endpoint: "http://localhost:8899",
    websocketEndpoint: "ws://localhost:8900",
    commitment: "confirmed",
    logger: () => {} // Disable all logs
  });

  // Fund owner with SOL for transaction fees
  await client.actions.requestAirdrop(owner.address, lamports(1_000_000_000n));

  // Generate keypair to use as address of mint
  const mint = (await generateKeypair()).signer;

  // Get default mint account size (in bytes), no extensions enabled
  const space = BigInt(getMintSize());

  // Get minimum balance for rent exemption
  const rent = await client.runtime.rpc
    .getMinimumBalanceForRentExemption(space)
    .send();

  // Instruction to create new account for mint (token program)
  const createAccountInstruction = getCreateAccountInstruction({
    payer: owner,
    newAccount: mint,
    lamports: rent,
    space,
    programAddress: TOKEN_2022_PROGRAM_ADDRESS
  });

  // Instruction to initialize mint account data
  const initializeMintInstruction = getInitializeMintInstruction({
    mint: mint.address,
    decimals: 6,
    mintAuthority: owner.address
  });

  // Derive ATAs for both owners
  const [ataWithDelegate] = await findAssociatedTokenPda({
    mint: mint.address,
    owner: owner.address,
    tokenProgram: TOKEN_2022_PROGRAM_ADDRESS
  });

  const [ataWithoutDelegate] = await findAssociatedTokenPda({
    mint: mint.address,
    owner: owner2.address,
    tokenProgram: TOKEN_2022_PROGRAM_ADDRESS
  });

  // Create ATA instructions
  const createAta1Instruction = await getCreateAssociatedTokenInstructionAsync({
    payer: owner,
    mint: mint.address,
    owner: owner.address
  });

  const createAta2Instruction = await getCreateAssociatedTokenInstructionAsync({
    payer: owner,
    mint: mint.address,
    owner: owner2.address
  });

  // Mint tokens to both ATAs
  const mintTo1Instruction = getMintToInstruction({
    mint: mint.address,
    token: ataWithDelegate,
    mintAuthority: owner.address,
    amount: 1_000_000n // 1.0 tokens
  });

  const mintTo2Instruction = getMintToInstruction({
    mint: mint.address,
    token: ataWithoutDelegate,
    mintAuthority: owner.address,
    amount: 1_000_000n // 1.0 tokens
  });

  // Approve delegate on first ATA
  const approveInstruction = getApproveCheckedInstruction({
    source: ataWithDelegate,
    mint: mint.address,
    delegate: delegate.address,
    owner: owner,
    amount: 500_000n, // 0.5 tokens
    decimals: 6
  });

  // Send setup transaction
  await client.transaction.prepareAndSend({
    authority: owner,
    instructions: [
      createAccountInstruction,
      initializeMintInstruction,
      createAta1Instruction,
      createAta2Instruction,
      mintTo1Instruction,
      mintTo2Instruction,
      approveInstruction
    ]
  });

  return {
    client,
    ataWithDelegate,
    ataWithoutDelegate
  };
}
```

</CodeTabs>

## Ζητήματα ασφαλείας

**Για κατόχους λογαριασμών:**

- Εγκρίνετε μόνο αξιόπιστους εκπροσώπους
- Ορίστε το ελάχιστο απαραίτητο όριο δαπανών
- Ανακαλέστε τις εξουσιοδοτήσεις όταν δεν χρειάζονται πλέον
- Παρακολουθείτε τους λογαριασμούς σας για μη αναμενόμενες μεταφορές

**Για παρόχους υπηρεσιών (εκπροσώπους):**

- Επικοινωνήστε με σαφήνεια το ζητούμενο όριο δαπανών στους χρήστες
- Εφαρμόστε κατάλληλη διαχείριση κλειδιών για τον λογαριασμό εκπροσώπου σας
- Παρακολουθείτε την κατανάλωση του ορίου για να ζητήσετε επανέγκριση πριν
  εξαντληθούν τα όρια

## Εξουσιοδότηση έναντι επιμέλειας

| Πτυχή                   | Εξουσιοδότηση                      | Πλήρης επιμέλεια                          |
| ----------------------- | ---------------------------------- | ----------------------------------------- |
| Ιδιοκτησία token        | Ο χρήστης διατηρεί                 | Ο χρήστης μεταφέρει στον επιμελητή        |
| Έλεγχος δαπανών         | Περιορισμένος στο εγκεκριμένο ποσό | Πλήρης πρόσβαση στα μεταφερόμενα κεφάλαια |
| Ανάκληση                | Άμεση, από τον κάτοχο              | Απαιτεί συνεργασία επιμελητή              |
| Έκθεση σε κίνδυνο       | Περιορισμένη στο εγκεκριμένο ποσό  | Ολόκληρο το υπόλοιπο                      |
| Απαιτούμενη εμπιστοσύνη | Περιορισμένη                       | Υψηλή                                     |

Η εξουσιοδότηση παρέχει μια ενδιάμεση λύση—επιτρέποντας αυτοματοποιημένες
πληρωμές ενώ περιορίζει την έκθεση σε κίνδυνο στο εγκεκριμένο ποσό.

## Σχετικοί πόροι

| Πόρος                                                      | Περιγραφή                                                                                |
| ---------------------------------------------------------- | ---------------------------------------------------------------------------------------- |
| [Έγκριση εκπροσώπου](/docs/tokens/basics/approve-delegate) | Πώς να χορηγήσετε σε άλλον λογαριασμό άδεια να δαπανήσει από τον λογαριασμό token σας.   |
| [Ανάκληση εκπροσώπου](/docs/tokens/basics/revoke-delegate) | Πώς να αφαιρέσετε έναν υπάρχοντα εκπρόσωπο και να ανακαλέσετε τα δικαιώματα δαπάνης του. |
| [Μεταφορά token](/docs/tokens/basics/transfer-tokens)      | Πώς να μεταφέρετε tokens μεταξύ λογαριασμών token.                                       |
