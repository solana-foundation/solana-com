---
title: Interagire con Solana
description: Connettiti alla rete ed esplora i dati della blockchain
---

Prima di costruire flussi di pagamento, devi connetterti a Solana e capire come
interrogare i dati della rete. Questa guida copre le basi: stabilire una
connessione e utilizzare i metodi RPC necessari per i pagamenti usando l'SDK
TypeScript [@solana/kit](https://www.npmjs.com/package/@solana/kit) e la
[Solana CLI](https://solana.com/docs/intro/installation). Inoltre, tratteremo le
basi dell'utilizzo di [Solana Explorer](https://explorer.solana.com) per
verificare manualmente i pagamenti, ispezionare gli account e risolvere
problemi.

## Connettersi a Solana

L'API RPC di Solana è il modo principale per interagire programmaticamente con
la rete. Il tuo URL RPC è effettivamente una chiave API per la rete.

<Callout type="caution" title="Non utilizzare RPC pubblici per la produzione">
  Gli endpoint pubblici (`api.mainnet-beta.solana.com`, `api.devnet.solana.com`)
  hanno limiti di velocità, non offrono SLA e non sono adatti per flussi di
  pagamento in produzione. Utilizza un [provider RPC](https://solana.com/rpc)
  per ottenere un endpoint RPC privato per i deployment in produzione.
</Callout>

Per lo sviluppo e il testing, puoi utilizzare endpoint pubblici con limiti di
velocità.

Crea un client RPC per interagire con la rete:

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
import { createSolanaRpc, createSolanaRpcSubscriptions } from "@solana/kit";

const rpc = createSolanaRpc("https://api.mainnet-beta.solana.com");
const rpcSubscriptions = createSolanaRpcSubscriptions(
  "wss://api.mainnet-beta.solana.com"
);
```

```bash !! title="CLI"
solana config set --url https://api.mainnet-beta.solana.com
solana config get # to verify the connection
```

</CodeTabs>

<Callout>
  Per lo sviluppo, utilizza devnet (`https://api.devnet.solana.com`) o un
  validator locale come
  [Surfpool](/docs/intro/installation/surfpool-cli-basics).
</Callout>

## Metodi RPC comuni

L'[API JSON-RPC](/docs/rpc) di Solana espone metodi per interrogare la rete.
Ecco quelli che utilizzerai maggiormente per i flussi di pagamento.

### Ottenere informazioni sull'account

Tutti gli account su Solana sono indirizzabili tramite la loro chiave pubblica.
Utilizza il metodo RPC [`getAccountInfo`](/docs/rpc/http/getaccountinfo) per
recuperare informazioni su qualsiasi account. Il metodo `getAccountInfo`
restituisce un oggetto `AccountInfo`, che contiene la chiave pubblica
dell'account, il saldo SOL, i dati e alcuni altri metadati.

Il campo `data` è una stringa codificata in base64 dei dati dell'account. Puoi
codificarla in byte utilizzando il metodo `getBase64Codec` dal pacchetto
`@solana/kit` e poi decodificarla in un oggetto leggibile utilizzando il codec
previsto (se conosciuto) per i dati dell'account (ad esempio, `getTokenCodec`
per i token account).

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const accountInfo = await rpc
  .getAccountInfo(address("7EcDhSYGxXyscszYEp35KHN8vvw3svAuLKTzXwCFLtV"), {
    encoding: "base64"
  })
  .send();
const dataBytes = getBase64Codec().encode(accountInfo.value.data);
const parsedTokenData = getTokenCodec().decode(dataBytes);

console.log(parsedTokenData);
```

```bash !! title="CLI"
solana account 7EcDhSYGxXyscszYEp35KHN8vvw3svAuLKTzXwCFLtV
```

</CodeTabs>

### Ottenere i saldi dei token

Controlla il saldo di un token account utilizzando il metodo RPC
[`getTokenAccountBalance`](/docs/rpc/http/gettokenaccountbalance):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const balance = await rpc.getTokenAccountBalance(tokenAccountAddress).send();

console.log(balance.value.uiAmount); // Human-readable (e.g., 100.50)
console.log(balance.value.amount); // Base units (e.g., "100500000")
```

```bash !! title="CLI"
spl-token balance --address 7v45FoihixmfocS3LbANUrEGZQKEJ7QQUg8K9jtZd3St
```

</CodeTabs>

### Costruire transazioni

Ogni transazione necessita di un blockhash recente per garantire che sia valida
(e non scaduta). Recuperane uno prima di creare una transazione di pagamento
utilizzando il metodo RPC
[`getLatestBlockhash`](/docs/rpc/http/getlatestblockhash):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const { value: latestBlockhash } = await rpc.getLatestBlockhash().send();
```

```bash !! title="CLI"
solana block-height
```

</CodeTabs>

> I blockhash scadono dopo ~60 secondi. Recuperane uno nuovo immediatamente
> prima di firmare e inviare.

### Verificare lo stato della transazione

Verifica che una transazione sia stata completata utilizzando il metodo RPC
[`getSignatureStatuses`](/docs/rpc/http/getsignaturestatuses):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const status = await rpc.getSignatureStatuses([signature]).send();

const result = status.value[0];
// result.confirmationStatus: "processed" | "confirmed" | "finalized"
```

```bash !! title="CLI"
solana confirm <SIGNATURE>
# For more details:
solana confirm <SIGNATURE> -v
```

</CodeTabs>

### Ottenere i dettagli della transazione

Recupera i dettagli completi di una transazione confermata utilizzando il metodo
RPC [`getTransaction`](/docs/rpc/http/gettransaction):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const transaction = await rpc
  .getTransaction(signature, { maxSupportedTransactionVersion: 0 })
  .send();
```

```bash !! title="CLI"
solana transaction-history <ADDRESS> --limit 1 -v
# Or decode a specific transaction:
solana confirm <SIGNATURE> -v
```

</CodeTabs>

### Cronologia delle transazioni

Ottieni le transazioni recenti per un indirizzo utilizzando il metodo RPC
[`getSignaturesForAddress`](/docs/rpc/http/getsignaturesforaddress):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const signatures = await rpc
  .getSignaturesForAddress(walletAddress, { limit: 10 })
  .send();
```

```bash !! title="CLI"
solana transaction-history <ADDRESS> --limit 10
```

</CodeTabs>

> Per un monitoraggio completo dei pagamenti, consulta
> [Accettare pagamenti](/docs/payments/accept-payments) che copre webhook e
> rilevamento delle transazioni in tempo reale.

## Esplorare i dati pubblici

Il registro pubblico di Solana significa che ogni transazione, token account e
mint è completamente verificabile. Gli explorer di blocchi ti permettono di
verificare manualmente i pagamenti, ispezionare gli account e risolvere problemi
senza scrivere codice.

**Cosa puoi cercare:**

- Verificare che un pagamento sia stato regolato
- Ispezionare i saldi dei token account
- Risolvere transazioni fallite
- Cercare i dettagli dei mint (supply, decimali, authority)

**Explorer comuni:** [Solana Explorer](https://explorer.solana.com),
[SolanaFM](https://solana.fm), [Solscan](https://solscan.io),
[Orb](https://www.orbmarkets.io/)

**Link di esempio:**

- [USDC Token Mint](https://explorer.solana.com/address/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v)
  — Supply, mercati, possessori e transazioni per USDC
- [Trasferimento di token USDC](https://explorer.solana.com/tx/3d2mQChCbqM5iogAN5PZw7KGZuVtQq3LbwU8hk55u4iUvYH1XJ7SQVQpWwoZj43MtthBqGBoqGBe9fn4Bo1VznjG)
  — Dettagli di una transazione di pagamento USDC
- [USDG Token Account](https://explorer.solana.com/address/7v45FoihixmfocS3LbANUrEGZQKEJ7QQUg8K9jtZd3St)
  — Saldo USDG di un utente e cronologia delle transazioni
