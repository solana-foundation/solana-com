---
title: Agentic Payments
description: 让 AI agent 能够使用 x402 协议自主为服务、API 和资源支付费用。
---

AI
agent 在工作流程中变得越来越自主：编写代码、获取数据、配置资源等。要实现完全独立运行，它们需要一种能够以极低成本、实时、自动化地为服务进行“微支付”的方式。传统支付渠道并不适用于微支付。Solana 的亚分币手续费和亚秒级最终性，使这一点在技术和经济上都成为可能。

## 为什么这很重要？

举例来说，假设开发者在用 LLM 构建应用时需要从付费 API 获取数据。为了获取重要数据，开发者需要中断工作流程，查找 API、选择服务商、注册账号、添加支付方式、生成 API 密钥、将密钥复制到环境中，然后才能继续工作。这种繁琐的流程会打断专注状态。对于 AI 辅助的工作流来说，这就是一个阻碍。

而通过 agentic
payments，agent 可以直接发起请求、完成支付，并继续工作流程。无需账号，无需 API 密钥，无需人工干预。

## x402 协议

Agentic
payments 需要一种方式，让客户端和服务器能够在标准 Web 基础设施上协商支付条款，同时不影响传统 Web 接口。微支付领域仍处于早期阶段，随着行业发展，新的工具和标准很可能会不断涌现。不过，[x402 协议](https://www.x402.org/)
已经成为早期标准，并获得了生态系统的广泛支持。x402 利用
[HTTP 的 402 “Payment Required”](https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Status/402)
状态码——自 HTTP/1.1 起就存在的标准，但直到区块链结算出现后才变得实用。

### 工作原理

客户端发起请求，收到带有付款条款的 402 响应后，再次发送带有签名付款的信息。服务器将验证和结算的工作委托给 facilitator（可选的中间方），由其负责链上交易的提交。一旦 facilitator 确认结算完成，服务器就会返回所请求的内容。通过这种分离，API 提供方无需直接管理任何链上基础设施，也能接受支付。

![x402 流程图](/assets/guides/x402/x402-flow-solana.png)

该协议是无状态的（无需会话或 API 密钥），可与标准 HTTP 基础设施配合使用，并支持服务器接受的任何 SPL 代币。以下是如何使用 x402 中间件搭建 Express 服务器的代码片段：

```ts
app.use(
  paymentMiddleware(
    {
      "GET /costly-data": {
        accepts: [
          {
            scheme: "exact",
            price: "$0.001",
            network: "solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",
            payTo: svmAddress
          }
        ],
        description: "Costly data",
        mimeType: "application/json"
      }
    },
    new x402ResourceServer(facilitatorClient).register(
      "solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",
      new ExactSvmScheme()
    )
  )
);

app.get("/costly-data", (req, res) => {
  res.send({
    report: {
      data: "costly data"
    }
  });
});
```

想进一步了解 x402，请参考我们的指南：

<Cards>
  <Card
    title="x402 简介"
    href="/developers/guides/getstarted/intro-to-x402"
    description="协议基础知识及用于构建支持支付 API 的 SDK 选项。"
  />
  <Card
    title="使用 Kora 构建"
    href="/developers/guides/getstarted/build-a-x402-facilitator"
    description="利用 Kora 的签名基础设施实现无 gas 的 x402 支付。"
  />
</Cards>

### x402 工具集

| SDK                                                             | 说明                            |
| --------------------------------------------------------------- | ------------------------------- |
| [Corbits](https://corbits.dev/)                                 | 以 Solana 为主的 x402 实现      |
| [MCPay.tech](https://mcpay.tech/)                               | 针对 MCP 服务器的按请求付费     |
| [PayAI](https://payai.network/)                                 | 支持 Solana 的 x402 facilitator |
| [x402 GitHub](https://github.com/coinbase/x402)                 | 参考实现                        |
| [ACK](https://github.com/agentcommercekit/ack)                  | Agent Commerce Kit              |
| [A2A x402](https://github.com/google-agentic-commerce/a2a-x402) | Google 的 agent-to-agent 支付   |
