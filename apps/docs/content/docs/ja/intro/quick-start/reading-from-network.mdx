---
title: ネットワークからの読み取り
description:
  Solanaブロックチェーンネットワークからデータを読み取る方法を学びます。このガイドでは、JavaScript/TypeScriptを使用してウォレットアカウント、プログラムアカウント、トークンミントアカウントを取得する方法を、Solana
  web3.jsライブラリを使用した実践的な例とともに説明します。
---

Solanaネットワークから異なるアカウントを取得してデータを読み取ります。このセクションでは、Solanaの[アカウント](/docs/core/accounts)の構造を理解するのに役立ちます。各Solanaアカウントには、対応するオンチェーンデータを見つけるために使用される一意の[アドレス](/docs/core/accounts#account-address)があります。アカウントには[状態データまたは実行可能なプログラム](/docs/core/accounts#types-of-accounts)が含まれています。

## ウォレットアカウントの取得

<WithMentions>

ウォレットは[System Program](/docs/core/programs#the-system-program)が所有するアカウントです。ウォレットは主にSOLを保持し、トランザクションに署名するために使用されます。SOLが初めて新しいアドレスに送信されると、システムアカウントが自動的に作成されます。

以下の例では、[新しいキーペア](mention:keypair)を生成し、新しい公開鍵アドレスに資金を提供するために[SOLをリクエスト](mention:airdrop)し、新しく資金提供されたウォレットの[アカウントデータを取得](mention:info)します。

<CodeTabs flags="r">

```ts !! title="Fetch account"
import { Keypair, Connection, LAMPORTS_PER_SOL } from "@solana/web3.js";

// !mention keypair
const keypair = Keypair.generate();
console.log(`Public Key: ${keypair.publicKey}`);

const connection = new Connection("http://localhost:8899", "confirmed");

// Funding an address with SOL automatically creates an account
// !mention airdrop
const signature = await connection.requestAirdrop(
  keypair.publicKey,
  LAMPORTS_PER_SOL
);
await connection.confirmTransaction(signature, "confirmed");

// !mention info
const accountInfo = await connection.getAccountInfo(keypair.publicKey);
console.log(JSON.stringify(accountInfo, null, 2));
```

</CodeTabs>
</WithMentions>

<ScrollyCoding>

## !!steps

ウォレットアカウントを取得すると、右側の例に示すようなフィールドがレスポンスに含まれます。

<CodePlaceholder title="出力例" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

`data`フィールドには、バイトとして保存されたアカウントのデータが含まれます。ウォレットアカウントの場合、このフィールドは空(0バイト)です。

<CodePlaceholder title="出力例" />

```json !! title="Example output"
{
  // !focus(1:4)
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

`executable`フィールドは、アカウントの`data`フィールドに実行可能なプログラムコードが含まれているかどうかを示します。ウォレットアカウントの場合、このフィールドは`false`です。

<CodePlaceholder title="出力例" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  // !focus
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

`lamports`フィールドには、アカウントのSOL残高が[lamports](/docs/references/terminology#lamport)単位で含まれています。

<CodePlaceholder title="出力例" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  // !focus
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

`owner`フィールドは、アカウントを所有するプログラムを示します。ウォレットの場合、所有者は常にSystem
Programであり、アドレスは`11111111111111111111111111111111`です。

<CodePlaceholder title="出力例" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  // !focus
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

`rentEpoch`フィールドは、廃止されたrent機構の従来のフィールドです。(このフィールドは下位互換性のために含まれています。)

<CodePlaceholder title="出力例" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  // !focus
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

`space`フィールドは、`data`フィールドに含まれるバイト数を示します。これは[Account type](/docs/core/accounts#account-structure)自体のフィールドではありませんが、レスポンスに含まれています。

この例では、`data`フィールドに0バイトのデータが含まれているため、`space`フィールドは0です。

<CodePlaceholder title="出力例" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  // !focus
  "space": 0
}
```

</ScrollyCoding>

## Token Programを取得する

以下の例では、ウォレットとプログラムアカウントの違いを示すためにToken
Programを取得します。プログラムアカウントには、Token Programの
[ソースコード](https://github.com/solana-program/token/tree/main/program)のコンパイルされたバイトコードが格納されています。このプログラムアカウントは
[Solana Explorer](https://explorer.solana.com/address/TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA)で確認できます。

<CodeTabs flags="r">

```ts !! title="Fetch program account"
import { Connection, PublicKey } from "@solana/web3.js";

const connection = new Connection(
  "https://api.mainnet.solana.com",
  "confirmed"
);
// !mark(1:2)
const address = new PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");
const accountInfo = await connection.getAccountInfo(address);

// !collapse(1:17) collapsed
console.log(
  JSON.stringify(
    accountInfo,
    (key, value) => {
      if (key === "data" && value && value.length > 1) {
        return [
          value[0],
          "...truncated, total bytes: " + value.length + "...",
          value[value.length - 1]
        ];
      }
      return value;
    },
    2
  )
);
```

</CodeTabs>

<ScrollyCoding>

## !!steps

Token Programは実行可能なprogram
accountです。プログラムは基本的に全ての[アカウント](/docs/core/accounts#account-structure)と同じフィールドを持ちますが、重要な違いがあります。

<CodePlaceholder title="Token program account" />

```json !! title="Token program account"
{
  "data": {
    "type": "Buffer",
    "data": [127, "...truncated, total bytes: 134080...", 0]
  },
  "executable": true,
  "lamports": 4522329612,
  "owner": "BPFLoader2111111111111111111111111111111111",
  "rentEpoch": 18446744073709552000,
  "space": 134080
}
```

## !!steps

`executable`フィールドは`true`に設定されており、アカウントの`data`フィールドに実行可能なコードが含まれていることを示します。

<CodePlaceholder title="Token programアカウント" />

```json !! title="Token program account"
{
  "data": {
    "type": "Buffer",
    "data": [127, "...truncated, total bytes: 134080...", 0]
  },
  // !focus
  "executable": true,
  "lamports": 4522329612,
  "owner": "BPFLoader2111111111111111111111111111111111",
  "rentEpoch": 18446744073709552000,
  "space": 134080
}
```

## !!steps

`data`フィールドには、プログラムの実行可能なコードが保存されます。

<CodePlaceholder title="Token programアカウント" />

```json !! title="Token program account"
{
  // !focus(1:4)
  "data": {
    "type": "Buffer",
    "data": [127, "...truncated, total bytes: 134080...", 0]
  },
  "executable": true,
  "lamports": 4522329612,
  "owner": "BPFLoader2111111111111111111111111111111111",
  "rentEpoch": 18446744073709552000,
  "space": 134080
}
```

## !!steps

すべてのプログラムアカウントは、その[loader program](/docs/core/programs#loader-programs)によって所有されています。この例では、`owner`はBPFLoader2プログラムです。

<CodePlaceholder title="Token programアカウント" />

```json !! title="Token program account"
{
  "data": {
    "type": "Buffer",
    "data": [127, "...truncated, total bytes: 134080...", 0]
  },
  "executable": true,
  "lamports": 4522329612,
  // !focus
  "owner": "BPFLoader2111111111111111111111111111111111",
  "rentEpoch": 18446744073709552000,
  "space": 134080
}
```

</ScrollyCoding>

## mint accountの取得

[mint account](https://github.com/solana-program/token/blob/program%40v8.0.0/program/src/state.rs#L16-L30)は、Token
Programによって所有されるアカウントで、特定のトークンに関するグローバルなメタデータを格納します。これには、総供給量、小数点以下の桁数、トークンの発行や凍結を許可されたアカウントが含まれます。mint
accountのアドレスは、Solanaネットワーク上のトークンを一意に識別します。

以下の例では、USD Coin Mint
accountを取得して、プログラムの状態が別のアカウントにどのように格納されるかを示しています。

<CodeTabs flags="r">

```ts !! title="Fetch program account"
import { Connection, PublicKey } from "@solana/web3.js";

const connection = new Connection(
  "https://api.mainnet.solana.com",
  "confirmed"
);

// !mark(1:2)
const address = new PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v");
const accountInfo = await connection.getAccountInfo(address);

// !collapse(1:17) collapsed
console.log(
  JSON.stringify(
    accountInfo,
    (key, value) => {
      if (key === "data" && value && value.length > 1) {
        return [
          value[0],
          "...truncated, total bytes: " + value.length + "...",
          value[value.length - 1]
        ];
      }
      return value;
    },
    2
  )
);
```

</CodeTabs>

<ScrollyCoding>

## !!steps

mint accountは実行可能コードではなく状態を格納します。これらはToken
Programによって所有され、Token Programにはmint
accountの作成と更新方法を定義するinstructionsが含まれています。

<CodePlaceholder title="Mint account" />

```json !! title="Mint account"
{
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  "executable": false,
  "lamports": 407438077149,
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

## !!steps

mint
accountの`data`フィールドは実行可能なコードではなく状態を保存するため、`executable`フィールドは`false`です。

Token
Programは`Mint`データ型を定義しており、これは`data`フィールドに保存されます。

<CodePlaceholder title="Mint account" />

```json !! title="Mint account"
{
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  // !focus
  "executable": false,
  "lamports": 407438077149,
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

## !!steps

`data`フィールドには、mint
authority、総供給量、小数点以下の桁数などのシリアライズされた`Mint`アカウント状態が含まれています。

mint
accountから読み取るには、`data`フィールドを`Mint`データ型にデシリアライズする必要があります。これは[次の例](#deserialize-mint-account)で示されています。

<CodePlaceholder title="Mint account" />

```json !! title="Mint account"
{
  // !focus(1:4)
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  "executable": false,
  "lamports": 407438077149,
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

## !!steps

mint
accountは[Token Program](/docs/references/terminology#token-program)によって所有されています。つまり、その`data`フィールドはToken
Programのinstructionsによってのみ変更できます。

<CodePlaceholder title="Mint Account" />

```json !! title="Mint Account"
{
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  "executable": false,
  "lamports": 407438077149,
  // !focus
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

</ScrollyCoding>

## Mint accountのデシリアライズ

アカウントの`data`フィールド内の生のバイトを意味のある形で解釈するには、デシリアライズする必要があります。適切なデータ型は、アカウントを所有するプログラムによって定義されます。ほとんどのSolanaプログラムは、デシリアライズプロセスを抽象化するヘルパー関数を含むクライアントライブラリを提供しています。これらの関数は、生のアカウントバイトを構造化されたデータ型に変換し、アカウントデータの操作を容易にします。

<WithMentions>

例えば、*shell`@solana/spl-token`*ライブラリには、mint
accountの`data`フィールドをToken
Programで定義された[Mint](https://github.com/solana-program/token/blob/program%40v8.0.0/program/src/state.rs#L16-L30)データ型にデシリアライズするための[_ts`getMint()`_](mention:one)関数が含まれています。

<CodeTabs flags="r">

```ts !! title="Deserialize mint account data"
import { PublicKey, Connection } from "@solana/web3.js";
import { getMint } from "@solana/spl-token";

const connection = new Connection(
  "https://api.mainnet.solana.com",
  "confirmed"
);

const address = new PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v");
// !mention one
const mintData = await getMint(connection, address, "confirmed");

// !collapse(1:17) collapsed
console.log(
  JSON.stringify(
    mintData,
    (key, value) => {
      // Convert BigInt to String
      if (typeof value === "bigint") {
        return value.toString();
      }
      // Handle Buffer objects
      if (Buffer.isBuffer(value)) {
        return `<Buffer ${value.toString("hex")}>`;
      }
      return value;
    },
    2
  )
);
```

</CodeTabs>

</WithMentions>

```rs title="Mint account type"
pub struct Mint {
    /// Optional authority used to mint new tokens. The mint authority may only
    /// be provided during mint creation. If no mint authority is present
    /// then the mint has a fixed supply and no further tokens may be
    /// minted.
    pub mint_authority: COption<Pubkey>,
    /// Total supply of tokens.
    pub supply: u64,
    /// Number of base 10 digits to the right of the decimal place.
    pub decimals: u8,
    /// Is `true` if this structure has been initialized
    pub is_initialized: bool,
    /// Optional authority to freeze token accounts.
    pub freeze_authority: COption<Pubkey>,
}
```

<ScrollyCoding>

## !!steps

*ts`getMint()`*関数は、mint
accountの`data`フィールドをMintアカウント型にデシリアライズします。

```json title="Mint account"
{
  // !focus(1:4)
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  "executable": false,
  "lamports": 407438077149,
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

完全にデシリアライズされた[mint account](https://explorer.solana.com/address/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v?cluster=mainnet-beta)データはSolana
Explorerで確認できます。

<CodePlaceholder title="デシリアライズされたミントデータ" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

`address`フィールドには、ミントアカウントのアドレスが含まれます。

<CodePlaceholder title="デシリアライズされたミントデータ" />

```json !! title="Deserialized mint data"
{
  // !focus
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

`mintAuthority`フィールドには、トークンの新しい単位を作成できる唯一のアカウントが表示されます。

<CodePlaceholder title="デシリアライズされたミントデータ" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  // !focus
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

`supply`フィールドには、ミントされたトークンの総数が表示されます。この値は、トークンの最小単位で測定されます。標準単位での総供給量を取得するには、`supply`フィールドの値を`decimals`で調整します。

<CodePlaceholder title="デシリアライズされたミントデータ" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  // !focus
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

`decimals`フィールドには、トークンの小数点以下の桁数が表示されます。

<CodePlaceholder title="デシリアライズされたミントデータ" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  // !focus
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

`isInitialized`フィールドは、ミントアカウントが初期化されているかどうかを示します。このフィールドは、Token
Programで使用されるセキュリティチェックです。

<CodePlaceholder title="デシリアライズされたミントデータ" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  // !focus
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

`freezeAuthority`フィールドには、トークンアカウントを凍結する権限を持つアカウントが表示されます。凍結されたトークンアカウントは、含まれているトークンを転送または焼却できません。

<CodePlaceholder title="デシリアライズされたミントデータ" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  // !focus
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

`tlvData`フィールドには、Token
Extensionsの追加データが含まれており、さらなるデシリアライゼーションが必要です。このフィールドは、[Token Extension Program](/docs/tokens/extensions)(Token2022)によって作成されたアカウントにのみ関連します。

<CodePlaceholder title="デシリアライズされたミントデータ" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  // !focus(1:4)
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

</ScrollyCoding>
