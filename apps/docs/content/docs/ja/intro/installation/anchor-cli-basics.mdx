---
title: Anchor CLIの基本
seoTitle: Anchor CLIを始めるための入門コマンド
description:
  このセクションでは、Anchor CLIの一般的なコマンドについて説明します。
---

このセクションでは、[Anchor CLI](https://www.anchor-lang.com/docs)の使用を開始するための一般的なコマンドと例を紹介します。

<Steps>
<Step>

### プロジェクトの初期化

以下のコマンドを実行して、新しいAnchorプロジェクトを作成します。このコマンドは、プロジェクト名の新しいディレクトリを作成し、それを使用して新しいAnchorプロジェクトを初期化します。

```terminal
$ anchor init <project-name>
```

例えば、以下のコマンドは`my-project`という名前のプロジェクトを作成します。`my-project`ディレクトリには、基本的なRustプログラムとTypeScriptテストテンプレートが含まれます。

```terminal
$ anchor init my-project
```

次に、プロジェクトディレクトリに移動します：

```terminal
$ cd <project-name>
```

Anchorの[プロジェクトファイル構造](https://www.anchor-lang.com/docs/quickstart/local#project-file-structure)を参照してください。

</Step>
<Step>

### プログラムのビルド

プロジェクトをビルドするには、次のコマンドを実行します：

```terminal
$ anchor build
```

コンパイルされたプログラムは`/target/deploy`ディレクトリにあります。

<Callout type="warn">

`anchor build`を実行する際に、以下のエラーが発生した場合:

<Accordions>
<Accordion title="error: not a directory">

```
error: not a directory: '.../solana-release/bin/sdk/sbf/dependencies/platform-tools/rust/lib'
```

以下の解決策を試してください：

1. 次のコマンドを使用して強制的にインストールします：

```terminal
$ cargo build-sbf --force-tools-install
```

2. 上記の解決策が機能しない場合は、Solanaキャッシュをクリアします：

```terminal
$ rm -rf ~/.cache/solana/*
```

</Accordion>

<Accordion title="lock file version 4 requires `-Znext-lockfile-bump">
`Cargo.lock`ファイルのversionフィールドを4から3に変更することで修正できます:

```diff title="Cargo.lock"
-version = 4
+version = 3
```

詳細については[この問題](https://github.com/solana-foundation/anchor/issues/3392)を参照してください。

</Accordion>

</Accordions>

上記の解決策を適用した後、再度`anchor build`を実行してください。

</Callout>

</Step>
<Step>

### プログラムのデプロイ

プロジェクトをデプロイするには、次のコマンドを実行します：

```terminal
$ anchor deploy
```

このコマンドは、[`Anchor.toml`](https://www.anchor-lang.com/docs/references/anchor-toml)ファイルで指定された`cluster`にプログラムをデプロイします。

</Step>
<Step>

### プログラムのテスト

プロジェクトをテストするには、次のコマンドを実行します：

```terminal
$ anchor test
```

このコマンドは、プロジェクトのビルド、デプロイ、およびテストの実行を行います。

<Callout>
  `localnet`クラスターを使用する場合、Anchorは自動的にローカルバリデーターを起動し、プログラムをデプロイし、テストを実行してから、バリデーターを停止します。
</Callout>

<Callout type="warn">

以下のいずれかのエラーが表示される場合は、Node.jsまたはYarnがインストールされていない可能性があります：

```
Permission denied (os error 13)
```

```
No such file or directory (os error 2)
```

</Callout>

</Step>
</Steps>
