---
title: Interakcja z Solaną
description: Połącz się z siecią i eksploruj dane blockchain
---

Zanim zaczniesz budować przepływy płatności, musisz połączyć się z Solaną i
zrozumieć, jak pobierać dane z sieci. Ten przewodnik omawia podstawy:
nawiązywanie połączenia oraz korzystanie z metod RPC, które będą potrzebne do
obsługi płatności z użyciem TypeScript SDK
[@solana/kit](https://www.npmjs.com/package/@solana/kit) oraz
[Solana CLI](https://solana.com/docs/intro/installation). Dodatkowo pokażemy
podstawy korzystania z [Solana Explorer](https://explorer.solana.com) do ręcznej
weryfikacji płatności, przeglądania kont i debugowania problemów.

## Łączenie z Solaną

RPC API Solany to podstawowy sposób programistycznej interakcji z siecią. Twój
adres URL RPC działa w praktyce jak klucz API do sieci.

<Callout type="caution" title="Nie używaj publicznego RPC w produkcji">
  Publiczne endpointy (`api.mainnet-beta.solana.com`, `api.devnet.solana.com`)
  mają limity zapytań, nie mają SLA i nie nadają się do produkcyjnych przepływów
  płatności. Użyj [dostawcy RPC](https://solana.com/rpc), aby zabezpieczyć
  prywatny endpoint RPC do wdrożeń produkcyjnych.
</Callout>

Do celów deweloperskich i testowych możesz korzystać z publicznych endpointów z
limitami.

Utwórz klienta RPC, aby komunikować się z siecią:

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
import { createSolanaRpc, createSolanaRpcSubscriptions } from "@solana/kit";

const rpc = createSolanaRpc("https://api.mainnet-beta.solana.com");
const rpcSubscriptions = createSolanaRpcSubscriptions(
  "wss://api.mainnet-beta.solana.com"
);
```

```bash !! title="CLI"
solana config set --url https://api.mainnet-beta.solana.com
solana config get # to verify the connection
```

</CodeTabs>

<Callout>
  Do celów deweloperskich używaj devnetu (`https://api.devnet.solana.com`) lub
  lokalnego validatora, np.
  [Surfpool](/docs/intro/installation/surfpool-cli-basics).
</Callout>

## Najczęstsze metody RPC

[JSON-RPC API Solany](/docs/rpc) udostępnia metody do pobierania danych z sieci.
Oto te, z których najczęściej będziesz korzystać przy obsłudze płatności.

### Pobieranie informacji o koncie

Wszystkie konta w Solanie są adresowane za pomocą klucza publicznego. Użyj
metody RPC [`getAccountInfo`](/docs/rpc/http/getaccountinfo), aby pobrać
informacje o dowolnym koncie. Metoda `getAccountInfo` zwraca obiekt
`AccountInfo`, który zawiera publiczny klucz konta, saldo SOL, dane oraz inne
metadane.

Pole `data` to zakodowany w base64 string z danymi konta. Możesz przekonwertować
go na bajty za pomocą metody `getBase64Codec` z pakietu `@solana/kit`, a
następnie zdekodować do czytelnego obiektu przy użyciu odpowiedniego kodeka
(jeśli znany) dla danych konta (np. `getTokenCodec` dla token account).

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const accountInfo = await rpc
  .getAccountInfo(address("7EcDhSYGxXyscszYEp35KHN8vvw3svAuLKTzXwCFLtV"), {
    encoding: "base64"
  })
  .send();
const dataBytes = getBase64Codec().encode(accountInfo.value.data);
const parsedTokenData = getTokenCodec().decode(dataBytes);

console.log(parsedTokenData);
```

```bash !! title="CLI"
solana account 7EcDhSYGxXyscszYEp35KHN8vvw3svAuLKTzXwCFLtV
```

</CodeTabs>

### Sprawdzanie salda tokenów

Sprawdź saldo token account za pomocą metody RPC
[`getTokenAccountBalance`](/docs/rpc/http/gettokenaccountbalance):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const balance = await rpc.getTokenAccountBalance(tokenAccountAddress).send();

console.log(balance.value.uiAmount); // Human-readable (e.g., 100.50)
console.log(balance.value.amount); // Base units (e.g., "100500000")
```

```bash !! title="CLI"
spl-token balance --address 7v45FoihixmfocS3LbANUrEGZQKEJ7QQUg8K9jtZd3St
```

</CodeTabs>

### Tworzenie transakcji

Każda transakcja wymaga aktualnego blockhash, aby była ważna (i nie
przeterminowana). Pobierz go przed utworzeniem transakcji płatniczej za pomocą
metody RPC [`getLatestBlockhash`](/docs/rpc/http/getlatestblockhash):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const { value: latestBlockhash } = await rpc.getLatestBlockhash().send();
```

```bash !! title="CLI"
solana block-height
```

</CodeTabs>

> Blockhash wygasa po około 60 sekundach. Pobierz nowy tuż przed podpisaniem i
> wysłaniem.

### Sprawdzanie statusu transakcji

Zweryfikuj, czy transakcja została rozliczona, używając metody RPC
[`getSignatureStatuses`](/docs/rpc/http/getsignaturestatuses):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const status = await rpc.getSignatureStatuses([signature]).send();

const result = status.value[0];
// result.confirmationStatus: "processed" | "confirmed" | "finalized"
```

```bash !! title="CLI"
solana confirm <SIGNATURE>
# For more details:
solana confirm <SIGNATURE> -v
```

</CodeTabs>

### Pobieranie szczegółów transakcji

Pobierz pełne szczegóły potwierdzonej transakcji za pomocą metody RPC
[`getTransaction`](/docs/rpc/http/gettransaction):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const transaction = await rpc
  .getTransaction(signature, { maxSupportedTransactionVersion: 0 })
  .send();
```

```bash !! title="CLI"
solana transaction-history <ADDRESS> --limit 1 -v
# Or decode a specific transaction:
solana confirm <SIGNATURE> -v
```

</CodeTabs>

### Historia transakcji

Pobierz ostatnie transakcje dla adresu za pomocą metody RPC
[`getSignaturesForAddress`](/docs/rpc/http/getsignaturesforaddress):

<CodeTabs storage="kit-cli">

```ts !! title="Kit"
const signatures = await rpc
  .getSignaturesForAddress(walletAddress, { limit: 10 })
  .send();
```

```bash !! title="CLI"
solana transaction-history <ADDRESS> --limit 10
```

</CodeTabs>

> Aby uzyskać kompleksowy monitoring płatności, zobacz
> [Akceptowanie płatności](/docs/payments/accept-payments), gdzie opisano
> webhooki oraz wykrywanie transakcji w czasie rzeczywistym.

## Eksplorowanie danych publicznych

Publiczny rejestr Solany oznacza, że każda transakcja, token account i mint są w
pełni audytowalne. Eksploratory bloków pozwalają ręcznie weryfikować płatności,
sprawdzać konta i debugować problemy bez pisania kodu.

**Co możesz sprawdzić:**

- Zweryfikować rozliczoną płatność
- Sprawdzić saldo token account
- Debugować nieudane transakcje
- Sprawdzić szczegóły mint (podaż, liczba miejsc po przecinku, uprawnienia)

**Popularne explorery:** [Solana Explorer](https://explorer.solana.com),
[SolanaFM](https://solana.fm), [Solscan](https://solscan.io),
[Orb](https://www.orbmarkets.io/)

**Przykładowe linki:**

- [USDC Token Mint](https://explorer.solana.com/address/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v)
  — Podaż, rynki, posiadacze i transakcje dla USDC
- [USDC Token Transfer](https://explorer.solana.com/tx/3d2mQChCbqM5iogAN5PZw7KGZuVtQq3LbwU8hk55u4iUvYH1XJ7SQVQpWwoZj43MtthBqGBoqGBe9fn4Bo1VznjG)
  — Szczegóły transakcji płatności USDC
- [USDG Token Account](https://explorer.solana.com/address/7v45FoihixmfocS3LbANUrEGZQKEJ7QQUg8K9jtZd3St)
  — Saldo USDG użytkownika i historia transakcji
