---
title: Deploy a Program
description:
  Learn how to build, deploy, and test your first Solana program using the
  Anchor framework and Solana Playground. This beginner-friendly guide walks
  through creating a simple program, deploying it to devnet, running tests, and
  closing the program.
h1: Deploy Your First Solana Program
---

Build, deploy, and test your first [program](/docs/core/programs)
to the Solana Blockchain using the Anchor framework.
This guide will help you become more familiar with the Solana Playground
and prepare you to use program derived addresses (PDA)
and cross-program invocation (CPI).

<Steps>
<Step>

### Create Anchor Project

1. Open the [Solana Playground](https://beta.solpg.io) in your web browser
2. On the left panel, click **+ Create a new project**
3. Enter a **Project name**
4. Select **Anchor (Rust)** as the framework
5. Click **Create**

![New Project](/assets/docs/intro/quickstart/pg-new-project.gif)

The `src/lib.rs` source file will open.
It contains one struct called `Initialize`,
which does the following:

- Receives a required parameter called _rs`data: u64`_
- Creates a new account
- Saves the value of _rs`data: u64`_ to the new account
- Adds a message to the transaction's program logs

<WithNotes>

```rust title="lib.rs"
use anchor_lang::prelude::*;

// This is your program's public key and it will update
// automatically when you build the project.
// !tooltip[/declare_id/] declare_id
declare_id!("11111111111111111111111111111111");

// !tooltip[/program/] program
#[program]
mod hello_anchor {
    use super::*;
    // !tooltip[/data: u64/] parameter
    pub fn initialize(ctx: Context<Initialize>, data: u64) -> Result<()> {
        // !tooltip[/ctx.accounts.new_account.data = data/] initialize
        ctx.accounts.new_account.data = data;
        // !tooltip[/msg!/] msg
        msg!("Changed data to: {}!", data); // Message will show up in the tx logs
        Ok(())
    }
}

// !tooltip[/Accounts/] accounts
#[derive(Accounts)]
pub struct Initialize<'info> {
    // We must specify the space in order to initialize an account.
    // First 8 bytes are default account discriminator,
    // next 8 bytes come from NewAccount.data being type u64.
    // (u64 = 64 bits unsigned integer = 8 bytes)
    // !tooltip[/account/] constraints
    #[account(
      // !tooltip[/init/] init
      init,
      // !tooltip[/payer/] payer
      payer = signer,
      // !tooltip[/space/] space
      space = 8 + 8
    )]
    pub new_account: Account<'info, NewAccount>,
    // !tooltip[/account/] constraints
    #[account(mut)]
    pub signer: Signer<'info>,
    pub system_program: Program<'info, System>,
}

// !tooltip[/account/] account
#[account]
pub struct NewAccount {
    data: u64
}
```

### !declare_id

Your program's on-chain address.
It will be updated when you build the project

### !program

The module that contains the program's instructions

### !accounts

Annotates a struct containing the program's accounts

### !account

A struct that represents the account data types this program can create and own

### !constraints

Account constraints. For example, common checks or features that enhance program security

### !parameter

The value passed to the instruction when it is called

### !initialize

Accesses the `data` field of the
`new_account` account and sets it to the value of `data: u64`

### !msg

The _rs`msg!`_ macro logs a message to the transaction's program logs

### !init

Invokes the System Program to create a new account and makes this program the owner.
As the program owner, this program can then write to the account data

### !payer

The account that pays for the new account

### !space

The number of bytes to allocate for the account

</WithNotes>

<Accordions>

<Accordion title="Explanation">

<WithMentions>

- The [`declare_id!`](mention:one) macro specifies the on-chain address of your program.
  Solana Playground will automatically update this address when you build the program.

```rs
// !mention one
declare_id!("11111111111111111111111111111111");
```

</WithMentions>

<WithMentions>

- The [`#[program]`](mention:one) attribute annotates a module containing
  functions that represent the program's instructions.

```rs
// !mention one
#[program]
mod hello_anchor {
    use super::*;
    // !mention two
    pub fn initialize(ctx: Context<Initialize>, data: u64) -> Result<()> {
        // !mention three
        ctx.accounts.new_account.data = data;
        msg!("Changed data to: {}!", data); // Message will show up in the tx logs
        Ok(())
    }
}
```

In this example, the [`initialize`](mention:two) instruction takes two
parameters:

- `ctx: Context<Initialize>`: Passes the accounts required for this instruction to the function,
   as specified in the `Initialize` struct.
- `data: u64`: A custom parameter you must provide when you call the instruction.

The function body [sets the `data` field of `new_account`](mention:three) to the
provided `data` argument, then prints a message to the program logs.

</WithMentions>

<WithMentions>

- The [`#[derive(Accounts)]`](mention:one) attribute defines a struct that
  specifies the accounts required for a particular instruction.
  Each field represents a separate account.

  Anchor automatically handles common security checks related to account
  validation through field types (ex. `Signer<'info>`) and constraints (ex.
  `#[account(mut)]`).

  ```rs
  // !mention one
  #[derive(Accounts)]
  pub struct Initialize<'info> {
      #[account(init, payer = signer, space = 8 + 8)]
      pub new_account: Account<'info, NewAccount>,
      #[account(mut)]
      pub signer: Signer<'info>,
      pub system_program: Program<'info, System>,
  }
  ```

</WithMentions>

<WithMentions>

- The [`#[account]`](mention:one) attribute defines a struct that represents the
  data type for accounts this program creates and owns.

```rs
// !mention one
#[account]
pub struct NewAccount {
  data: u64
}
```

</WithMentions>

</Accordion>
</Accordions>

</Step>
<Step>

### Build and Deploy the Program

1. Compile the program code

```terminal
$ build
Building...
Build successful. Completed in 1.46s.
```

<Callout>
Your [program ID](/docs/intro/quick-start/deploying-programs), defined in _rs`declare_id!()`_,
will now be updated.
</Callout>

2. Add SOL to your wallet *(Optional)*

Deploying a program requires SOL in the program's on-chain account.
If necessary, [add SOL to your wallet](/docs/intro/quick-start#add-sol-to-your-wallet)
before proceeding to step 3.

3. Deploy the program to the network

```terminal
$ deploy
Deploying... This could take a while depending on the program size and network conditions.
Warning: 1 transaction not confirmed, retrying...
Deployment successful. Completed in 19s.
```

<Callout type="info">
When deployed, the program's bytecode is stored in an executable program account.
</Callout>

**Note:** If preferred, you can use the **Build** and **Deploy** buttons on the left-side panel,
as shown in the screenshot below.

![Build and Deploy](/assets/docs/intro/quickstart/pg-build-deploy.png)

</Step>
<Step>

### Test the Program

<WithMentions>

1. Open the test file called `tests/anchor.test.ts`.
This file demonstrates how to invoke the program's [`initialize`](mention:one)
struct from the client.

```ts title="anchor.test.ts"
// No imports needed: web3, anchor, pg and more are globally available

describe("Test", () => {
  it("initialize", async () => {
    // Generate keypair for the new account
    const newAccountKp = new web3.Keypair();

    // Send transaction
    const data = new BN(42);
    const txHash = await pg.program.methods
      // !mention one
      .initialize(data)
      .accounts({
        newAccount: newAccountKp.publicKey,
        signer: pg.wallet.publicKey,
        systemProgram: web3.SystemProgram.programId
      })
      .signers([newAccountKp])
      .rpc();
    console.log(`Use 'solana confirm -v ${txHash}' to see the logs`);

    // Confirm transaction
    await pg.connection.confirmTransaction(txHash);

    // Fetch the created account
    const newAccount = await pg.program.account.newAccount.fetch(
      newAccountKp.publicKey
    );

    console.log("On-chain data is:", newAccount.data.toString());

    // Check whether the data on-chain is equal to local 'data'
    assert(data.eq(newAccount.data));
  });
});
```

</WithMentions>

2. Run the test file

```terminal
$ test
Running tests...
  hello_anchor.test.ts:
  hello_anchor
    Use 'solana confirm -v 3TewJtiUz1EgtT88pLJHvKFzqrzDNuHVi8CfD2mWmHEBAaMfC5NAaHdmr19qQYfTiBace6XUmADvR4Qrhe8gH5uc' to see the logs
    On-chain data is: 42
    âœ” initialize (961ms)
  1 passing (963ms)
```

3. Store the transaction hash (`TxHash`) included in the output

(In the example above, the transaction hash is `3TewJtiUz1EgtT88pLJHvKFzqrzDNuHVi8CfD2mWmHEBAaMfC5NAaHdmr19qQYfTiBace6XUmADvR4Qrhe8gH5uc`.)

**Note:** If preferred, you can use the `Test` button on the left-side panel.

![Run Test](/assets/docs/intro/quickstart/pg-test.png)

4. Run `solana confirm -v [TxHash]` to view the transaction logs

```terminal
$ solana confirm -v 3TewJtiUz1EgtT88pLJHvKFzqrzDNuHVi8CfD2mWmHEBAaMfC5NAaHdmr19qQYfTiBace6XUmADvR4Qrhe8gH5uc
RPC URL: https://api.devnet.solana.com
Default Signer: Playground Wallet
Commitment: confirmed

Transaction executed in slot 308150984:
  Block Time: 2024-06-25T12:52:05-05:00
  Version: legacy
  Recent Blockhash: 7AnZvY37nMhCybTyVXJ1umcfHSZGbngnm4GZx6jNRTNH
  Signature 0: 3TewJtiUz1EgtT88pLJHvKFzqrzDNuHVi8CfD2mWmHEBAaMfC5NAaHdmr19qQYfTiBace6XUmADvR4Qrhe8gH5uc
  Signature 1: 3TrRbqeMYFCkjsxdPExxBkLAi9SB2pNUyg87ryBaTHzzYtGjbsAz9udfT9AkrjSo1ZjByJgJHBAdRVVTZv6B87PQ
  Account 0: srw- 3z9vL1zjN6qyAFHhHQdWYRTFAcy69pJydkZmSFBKHg1R (fee payer)
  Account 1: srw- c7yy8zdP8oeZ2ewbSb8WWY2yWjDpg3B43jk3478Nv7J
  Account 2: -r-- 11111111111111111111111111111111
  Account 3: -r-x 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r
  Instruction 0
    Program:   2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r (3)
    Account 0: c7yy8zdP8oeZ2ewbSb8WWY2yWjDpg3B43jk3478Nv7J (1)
    Account 1: 3z9vL1zjN6qyAFHhHQdWYRTFAcy69pJydkZmSFBKHg1R (0)
    Account 2: 11111111111111111111111111111111 (2)
    Data: [175, 175, 109, 31, 13, 152, 155, 237, 42, 0, 0, 0, 0, 0, 0, 0]
  Status: Ok
    Fee: â—Ž0.00001
    Account 0 balance: â—Ž5.47001376 -> â—Ž5.46900152
    Account 1 balance: â—Ž0 -> â—Ž0.00100224
    Account 2 balance: â—Ž0.000000001
    Account 3 balance: â—Ž0.00139896
  Log Messages:
    Program 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r invoke [1]
    Program log: Instruction: Initialize
    Program 11111111111111111111111111111111 invoke [2]
    Program 11111111111111111111111111111111 success
    Program log: Changed data to: 42!
    Program 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r consumed 5661 of 200000 compute units
    Program 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r success

Confirmed
```

4. View the transaction details

Open either [SolanaFM](https://solana.fm/) or [Solana Explorer](https://explorer.solana.com/?cluster=devnet)
and search for the transaction hash.

<Callout type="warn">
  **Solana Explorer:** Set the network cluster to `devnet`,
  to match that of the Solana Playground.
</Callout>

</Step>
<Step>

### Close the Program

Close the program to recover the SOL allocated to the on-chain program.
To do so, run `solana program close [ProgramID]`,
using the program address stored in the _rs`declare_id!()`_ macro.

```terminal
$ solana program close 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r
Closed Program Id 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r, 2.79511512 SOL reclaimed
```

<Callout type="warn">
Programs can **only** be closed or updated by an account with upgrade authority.
Your Playground wallet automatically becomes the upgrade authority
for each program when it is deployed.
If the upgrade authority is revoked, the program becomes immutable.
</Callout>

Congratulations!
You built and deployed your first Solana program using Anchor.

</Step>
</Steps>

## Next steps

Now that you have deployed your first program, you are ready to explore
[program-derived addresses](/docs/intro/quick-start/program-derived-address)
and [cross-program invocation](/docs/intro/quick-start/cross-program-invocation).
