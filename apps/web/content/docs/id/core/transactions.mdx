---
title: Transaksi
description:
  Pelajari tentang transaksi Solana—blok bangunan fundamental untuk berinteraksi
  dengan blockchain Solana. Pahami struktur transaksi dan komposisi instruksi
  dengan contoh praktis.
---

Untuk berinteraksi dengan jaringan Solana, Anda harus mengirim transaksi. Anda
dapat menganggap transaksi sebagai amplop yang berisi beberapa formulir. Setiap
formulir adalah instruksi yang memberi tahu jaringan apa yang harus dilakukan.
Mengirim transaksi seperti mengirimkan amplop agar formulir dapat diproses.

Contoh di bawah ini menunjukkan versi sederhana dari dua transaksi. Ketika
transaksi pertama diproses, transaksi akan mengeksekusi satu instruksi. Ketika
transaksi kedua diproses, transaksi akan mengeksekusi tiga instruksi **secara
berurutan**: pertama instruksi 1, diikuti oleh instruksi 2, diikuti oleh
instruksi 3.

<Callout type="warn">
  Transaksi bersifat **atomik**: Jika satu instruksi gagal, seluruh transaksi
  akan gagal dan tidak ada perubahan yang akan terjadi.
</Callout>

![Diagram sederhana yang menunjukkan dua transaksi](/assets/docs/core/transactions/transaction-simple.svg)

Sebuah
[`Transaction`](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/src/transaction/mod.rs#L207)
terdiri dari informasi berikut:

<WithMentions>

- [`signatures`](mention:signatures): Array dari [tanda tangan](#signatures)
- [`message`](mention:message): Informasi transaksi, termasuk daftar instruksi
  yang akan diproses

```rust title="Transaction"
pub struct Transaction {
    #[wasm_bindgen(skip)]
    #[serde(with = "short_vec")]
    // !mention signatures
    pub signatures: Vec<Signature>,

    #[wasm_bindgen(skip)]
    // !mention message
    pub message: Message,
}
```

</WithMentions>

![Diagram yang menunjukkan dua bagian dari transaksi](/assets/docs/core/transactions/tx_format.png)

Transaksi memiliki batas ukuran total
[1232](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/packet/src/lib.rs#L29)
byte. Batas ini mencakup baik array [`signatures`](#signatures) maupun struct
[`message`](#message).

<Callout>
  Batas ini berasal dari ukuran Maximum Transmission Unit (MTU) IPv6 sebesar
  1280 byte, dikurangi 48 byte untuk header jaringan (40 byte IPv6 + 8 byte
  header).
</Callout>

![Diagram yang menunjukkan format transaksi dan batas ukuran](/assets/docs/core/transactions/issues_with_legacy_txs.png)

## Tanda Tangan

Array `signatures` pada transaksi berisi struct `Signature`. Setiap
[`Signature`](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/signature/src/lib.rs#L30)
berukuran 64 byte dan dibuat dengan menandatangani `Message` transaksi dengan
kunci privat akun. Tanda tangan harus disediakan untuk setiap
[akun penandatangan](#account-addresses) yang disertakan pada instruksi
transaksi.

Tanda tangan pertama milik akun yang akan membayar
[biaya dasar](docs/core/fees#base-fee) transaksi dan merupakan tanda tangan
transaksi. Tanda tangan transaksi dapat digunakan untuk mencari detail transaksi
di jaringan.

## Pesan

`message` transaksi adalah struktur
[`Message`](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/program/src/message/legacy.rs#L131)
yang berisi informasi berikut:

<WithMentions>

- [`header`](mention:message-header): [Header](#header) pesan
- [`account_keys`](mention:account-addresses): Array
  [alamat akun](#account-addresses) yang diperlukan oleh instruksi transaksi
- [`recent_blockhash`](mention:recent-blockhash): [Blockhash](#recent-blockhash)
  yang bertindak sebagai stempel waktu untuk transaksi
- [`instructions`](mention:instructions): Array [instruksi](#instructions)

<Callout>
  Untuk menghemat ruang, transaksi tidak menyimpan izin untuk setiap akun secara
  individual. Sebagai gantinya, izin akun ditentukan menggunakan `header` dan
  `account_keys`.
</Callout>

```rust title="Message"
pub struct Message {
    /// The message header, identifying signed and read-only `account_keys`.
    // !mention message-header
    pub header: MessageHeader,

    /// All the account keys used by this transaction.
    #[serde(with = "short_vec")]
    // !mention account-addresses
    pub account_keys: Vec<Pubkey>,

    /// The id of a recent ledger entry.
    // !mention recent-blockhash
    pub recent_blockhash: Hash,

    /// Programs that will be executed in sequence and committed in
    /// one atomic transaction if all succeed.
    #[serde(with = "short_vec")]
    // !mention instructions
    pub instructions: Vec<CompiledInstruction>,
}
```

</WithMentions>

### Header

<WithMentions>

`header` pesan adalah struktur
[`MessageHeader`](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/program/src/message/mod.rs#L97).
Ini berisi informasi berikut:

- [`num_required_signatures`](mention:num_required_signatures): Jumlah total
  tanda tangan yang diperlukan oleh transaksi
- [`num_readonly_signed_accounts`](mention:num_readonly_signed_accounts): Jumlah
  total akun hanya-baca yang memerlukan tanda tangan
- [`num_readonly_unsigned_accounts`](mention:num_readonly_unsigned_accounts):
  Jumlah total akun hanya-baca yang tidak memerlukan tanda tangan

```rust title="MessageHeader"
pub struct MessageHeader {
    /// The number of signatures required for this message to be considered
    /// valid. The signers of those signatures must match the first
    /// `num_required_signatures` of [`Message::account_keys`].
    // !mention num_required_signatures
    pub num_required_signatures: u8,

    /// The last `num_readonly_signed_accounts` of the signed keys are read-only
    /// accounts.
    // !mention num_readonly_signed_accounts
    pub num_readonly_signed_accounts: u8,

    /// The last `num_readonly_unsigned_accounts` of the unsigned keys are
    /// read-only accounts.
    // !mention num_readonly_unsigned_accounts
    pub num_readonly_unsigned_accounts: u8,
}
```

</WithMentions>

![Diagram yang menunjukkan tiga bagian header pesan](/assets/docs/core/transactions/message_header.png)

### Alamat akun

[`account_keys`](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/program/src/message/legacy.rs#L138)
pesan adalah array alamat akun, dikirim dalam
[format array kompak](/docs/references/terminology#compact-array-format). Awalan
array menunjukkan panjangnya. Setiap item dalam array adalah kunci publik, yang
menunjuk ke akun yang digunakan oleh instruksinya. Array `accounts_keys` harus
lengkap, dan diurutkan secara ketat, sebagai berikut:

1. Penandatangan + Dapat ditulis
2. Penandatangan + Hanya-baca
3. Bukan penandatangan + Dapat ditulis
4. Bukan penandatangan + Hanya-baca

<Callout>
  Pengurutan yang ketat memungkinkan array `account_keys` dikombinasikan dengan
  informasi dalam [`header`](#header) pesan untuk menentukan izin untuk setiap
  akun.
</Callout>

![Diagram menunjukkan urutan array alamat akun](/assets/docs/core/transactions/compat_array_of_account_addresses.png)

### Blockhash terbaru

`recent_blockhash` pada pesan adalah nilai hash yang berfungsi sebagai stempel
waktu transaksi dan mencegah duplikasi transaksi. Sebuah blockhash kedaluwarsa
setelah
[150 blok](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/clock/src/lib.rs#L134).
(Setara dengan satu menit—dengan asumsi setiap blok adalah 400ms.) Setelah blok
kedaluwarsa, transaksi tersebut juga kedaluwarsa dan tidak dapat diproses.

<Callout>
  Metode RPC [`getLatestBlockhash`](/docs/rpc/http/getlatestblockhash)
  memungkinkan Anda mendapatkan blockhash terkini dan tinggi blok terakhir di
  mana blockhash tersebut akan tetap valid.
</Callout>

### Instruksi

[`instructions`](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/program/src/message/legacy.rs#L146)
pada pesan adalah array dari semua instruksi yang akan diproses, dikirim dalam
[format array kompak](/docs/references/terminology#compact-array-format). Awalan
array menunjukkan panjangnya. Setiap item dalam array adalah struktur
[`CompiledInstruction`](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/program/src/instruction.rs#L22)
dan mencakup informasi berikut:

<WithMentions>

1. [`program_id_index`](mention:program-id-index): Indeks yang menunjuk ke
   alamat dalam array [`account_keys`](#account-addresses). Nilai ini
   menunjukkan alamat program yang memproses instruksi.
2. [`accounts`](mention:account-indexes): Array indeks yang menunjuk ke alamat
   dalam array `account_keys`. Setiap indeks menunjuk ke alamat akun yang
   diperlukan untuk instruksi ini.
3. [`data`](mention:instruction-data): Array byte yang menentukan instruksi mana
   yang akan dipanggil pada program. Ini juga mencakup data tambahan yang
   diperlukan oleh instruksi. (Misalnya, argumen fungsi)

```rust title="CompiledInstruction"
pub struct CompiledInstruction {
    /// Index into the transaction keys array indicating the program account that executes this instruction.
    // !mention program-id-index
    pub program_id_index: u8,
    /// Ordered indices into the transaction keys array indicating which accounts to pass to the program.
    #[serde(with = "short_vec")]
    // !mention account-indexes
    pub accounts: Vec<u8>,
    /// The program input data.
    #[serde(with = "short_vec")]
    // !mention instruction-data
    pub data: Vec<u8>,
}
```

</WithMentions>

![Array kompak dari Instruksi](/assets/docs/core/transactions/compact_array_of_ixs.png)

## Contoh struktur transaksi

Contoh berikut menunjukkan struktur transaksi yang berisi satu instruksi
transfer SOL.

<CodeTabs storage="sol-transfer" flags="r">

```ts !! title="Kit"
import {
  createSolanaRpc,
  generateKeyPairSigner,
  lamports,
  createTransactionMessage,
  setTransactionMessageFeePayerSigner,
  setTransactionMessageLifetimeUsingBlockhash,
  appendTransactionMessageInstructions,
  pipe,
  signTransactionMessageWithSigners,
  getCompiledTransactionMessageDecoder
} from "@solana/kit";
import { getTransferSolInstruction } from "@solana-program/system";

const rpc = createSolanaRpc("http://localhost:8899");
const { value: latestBlockhash } = await rpc.getLatestBlockhash().send();

// Generate sender and recipient keypairs
const sender = await generateKeyPairSigner();
const recipient = await generateKeyPairSigner();

// Define the amount to transfer
const LAMPORTS_PER_SOL = 1_000_000_000n;
const transferAmount = lamports(LAMPORTS_PER_SOL / 100n); // 0.01 SOL

// Create a transfer instruction for transferring SOL from sender to recipient
const transferInstruction = getTransferSolInstruction({
  source: sender,
  destination: recipient.address,
  amount: transferAmount
});

// Create transaction message
const transactionMessage = pipe(
  createTransactionMessage({ version: 0 }),
  (tx) => setTransactionMessageFeePayerSigner(sender, tx),
  (tx) => setTransactionMessageLifetimeUsingBlockhash(latestBlockhash, tx),
  (tx) => appendTransactionMessageInstructions([transferInstruction], tx)
);

const signedTransaction =
  await signTransactionMessageWithSigners(transactionMessage);

// Decode the messageBytes
const compiledTransactionMessage =
  getCompiledTransactionMessageDecoder().decode(signedTransaction.messageBytes);

console.log(JSON.stringify(compiledTransactionMessage, null, 2));
```

```ts !! title="Legacy"
import {
  LAMPORTS_PER_SOL,
  SystemProgram,
  Transaction,
  Keypair,
  Connection
} from "@solana/web3.js";

const connection = new Connection("http://localhost:8899", "confirmed");
const { blockhash, lastValidBlockHeight } =
  await connection.getLatestBlockhash();

// Generate sender and recipient keypairs
const sender = Keypair.generate();
const recipient = new Keypair();

// Define the amount to transfer
const transferAmount = 0.01; // 0.01 SOL

// Create a transfer instruction for transferring SOL from sender to recipient
const transferInstruction = SystemProgram.transfer({
  fromPubkey: sender.publicKey,
  toPubkey: recipient.publicKey,
  lamports: transferAmount * LAMPORTS_PER_SOL // Convert transferAmount to lamports
});

const transaction = new Transaction({
  blockhash,
  lastValidBlockHeight,
  feePayer: sender.publicKey
}).add(transferInstruction);
transaction.sign(sender);

const compiledMessage = transaction.compileMessage();
console.log(JSON.stringify(compiledMessage, null, 2));
```

```rs !! title="Rust"
use anyhow::Result;
use solana_client::nonblocking::rpc_client::RpcClient;
use solana_commitment_config::CommitmentConfig;
use solana_sdk::{
    native_token::LAMPORTS_PER_SOL, signature::Signer, signer::keypair::Keypair,
    transaction::Transaction,
};
use solana_system_interface::instruction::transfer;

#[tokio::main]
async fn main() -> Result<()> {
    let connection = RpcClient::new_with_commitment(
        "http://localhost:8899".to_string(),
        CommitmentConfig::confirmed(),
    );

    // Fetch the latest blockhash and last valid block height
    let blockhash = connection.get_latest_blockhash().await?;

    // Generate sender and recipient keypairs
    let sender = Keypair::new();
    let recipient = Keypair::new();

    // Create a transfer instruction for transferring SOL from sender to recipient
    let transfer_instruction = transfer(
        &sender.pubkey(),
        &recipient.pubkey(),
        LAMPORTS_PER_SOL / 100, // 0.01 SOL
    );

    let mut transaction =
        Transaction::new_with_payer(&[transfer_instruction], Some(&sender.pubkey()));
    transaction.sign(&[&sender], blockhash);

    println!("{:#?}", transaction);

    Ok(())
}
```

</CodeTabs>

<WithMentions>
Kode di bawah ini menunjukkan output dari cuplikan kode sebelumnya.
Format berbeda antara SDK,
tetapi perhatikan bahwa setiap instruksi berisi informasi yang sama yang diperlukan.

<CodeTabs storage="sol-transfer">

```json !! title="Kit"
{
  "version": 0,
  // !mention header
  "header": {
    "numSignerAccounts": 1,
    "numReadonlySignerAccounts": 0,
    "numReadonlyNonSignerAccounts": 1
  },
  // !mention account_keys
  "staticAccounts": [
    "HoCy8p5xxDDYTYWEbQZasEjVNM5rxvidx8AfyqA4ywBa",
    "5T388jBjovy7d8mQ3emHxMDTbUF8b7nWvAnSiP3EAdFL",
    "11111111111111111111111111111111"
  ],
  // !mention recent_blockhash
  "lifetimeToken": "EGCWPUEXhqHJWYBfDirq3mHZb4qDpATmYqBZMBy9TBC1",
  // !mention instructions
  "instructions": [
    {
      "programAddressIndex": 2,
      "accountIndices": [0, 1],
      "data": {
        "0": 2,
        "1": 0,
        "2": 0,
        "3": 0,
        "4": 128,
        "5": 150,
        "6": 152,
        "7": 0,
        "8": 0,
        "9": 0,
        "10": 0,
        "11": 0
      }
    }
  ]
}
```

```json !! title="Legacy"
{
  // !mention header
  "header": {
    "numRequiredSignatures": 1,
    "numReadonlySignedAccounts": 0,
    "numReadonlyUnsignedAccounts": 1
  },
  // !mention account_keys
  "accountKeys": [
    "EPLUagqZZAuAtJ5LSbK7eeXjqeTdesd4q8WhoqVrfG3g",
    "9Txf5pi5jzm7FydFAsQafk7xn5wY9yN2UNm5LW15qvcK",
    "11111111111111111111111111111111"
  ],
  "recentBlockhash": "2qYPgehzMKXcMt4Ku1tKAk9DACKUbtYEY9EUEN42cseT",
  // !mention instructions
  "instructions": [
    {
      "programIdIndex": 2,
      "accounts": [0, 1],
      "data": "3Bxs4NN8M2Yn4TLb"
    }
  ],
  "indexToProgramIds": {}
}
```

```json !! title="Rust"
{
  "signatures": [
    "2fPXZtQGWWj6suxfc55FBQiexS8hEhNELqasSL5DRYa1RB1GChHz86Cyy8ukiVwA6qbq91P4cY1FuvTuYtmTHmJP"
  ],
  "message": {
    // !mention header
    "header": {
      "num_required_signatures": 1,
      "num_readonly_signed_accounts": 0,
      "num_readonly_unsigned_accounts": 1
    },
    "account_keys": [
      "9CpbtdXfUTgLMJL8DEAeEm8thERJPwDuruohjvUuzY7m",
      "6jELNgS8Q35sF4QZCvwgyKGaKrbcm8P5QcNWUyAb5ekJ",
      "11111111111111111111111111111111"
    ],
    "recent_blockhash": "3P7CVQ9nwXx4B37MvBzghzbcM9K9p5xo7ivDE8W78dCi",
    // !mention instructions
    "instructions": [
      {
        "program_id_index": 2,
        "accounts": [0, 1],
        "data": [2, 0, 0, 0, 128, 150, 152, 0, 0, 0, 0, 0]
      }
    ]
  }
}
```

</CodeTabs>
</WithMentions>

Setelah transaksi dikirimkan, Anda dapat mengambil detailnya menggunakan tanda
tangan transaksi dan metode RPC [getTransaction](/docs/rpc/http/gettransaction).
Responsnya akan memiliki struktur yang mirip dengan cuplikan berikut.

<Callout>
  Anda juga dapat menemukan transaksi menggunakan [Solana
  Explorer](https://explorer.solana.com).
</Callout>

```json title="Transaction Data"
{
  "blockTime": 1745196488,
  "meta": {
    "computeUnitsConsumed": 150,
    "err": null,
    "fee": 5000,
    "innerInstructions": [],
    "loadedAddresses": {
      "readonly": [],
      "writable": []
    },
    "logMessages": [
      "Program 11111111111111111111111111111111 invoke [1]",
      "Program 11111111111111111111111111111111 success"
    ],
    "postBalances": [989995000, 10000000, 1],
    "postTokenBalances": [],
    "preBalances": [1000000000, 0, 1],
    "preTokenBalances": [],
    "rewards": [],
    "status": {
      "Ok": null
    }
  },
  "slot": 13049,
  "transaction": {
    "message": {
      "header": {
        "numReadonlySignedAccounts": 0,
        "numReadonlyUnsignedAccounts": 1,
        "numRequiredSignatures": 1
      },
      "accountKeys": [
        "8PLdpLxkuv9Nt8w3XcGXvNa663LXDjSrSNon4EK7QSjQ",
        "7GLg7bqgLBv1HVWXKgWAm6YoPf1LoWnyWGABbgk487Ma",
        "11111111111111111111111111111111"
      ],
      "recentBlockhash": "7ZCxc2SDhzV2bYgEQqdxTpweYJkpwshVSDtXuY7uPtjf",
      "instructions": [
        {
          "accounts": [0, 1],
          "data": "3Bxs4NN8M2Yn4TLb",
          "programIdIndex": 2,
          "stackHeight": null
        }
      ],
      "indexToProgramIds": {}
    },
    "signatures": [
      "3jUKrQp1UGq5ih6FTDUUt2kkqUfoG2o4kY5T1DoVHK2tXXDLdxJSXzuJGY4JPoRivgbi45U2bc7LZfMa6C4R3szX"
    ]
  },
  "version": "legacy"
}
```
