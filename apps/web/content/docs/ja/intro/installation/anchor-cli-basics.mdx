---
title: Anchor CLIの基本
seoTitle: Anchor CLIを始めるための入門コマンド
description:
  このセクションでは、Anchor CLIの一般的なコマンドについて説明します。
---

このセクションでは、Anchor CLIの一般的なコマンドについて説明します。Anchor
CLIの詳細については、
[Anchorドキュメント](https://www.anchor-lang.com/docs)をご覧ください。

<Steps>
<Step>

### プロジェクトの初期化

新しいAnchorプロジェクトを作成するには、次のコマンドを実行します：

```terminal
$ anchor init <project-name>
```

例えば、`my-project`というプロジェクトを作成するには、次のように実行します：

```terminal
$ anchor init my-project
```

このコマンドは、プロジェクト名の新しいディレクトリを作成し、基本的なRustプログラムとTypeScriptテストテンプレートを含む新しいAnchorプロジェクトを初期化します。

プロジェクトディレクトリに移動します：

```terminal
$ cd <project-name>
```

Anchorプロジェクトの
[ファイル構造](https://www.anchor-lang.com/docs/quickstart/local#project-file-structure)をご覧ください。

</Step>

<Step>
### プログラムのビルド

プロジェクトをビルドするには、次のコマンドを実行します：

```terminal
$ anchor build
```

コンパイルされたプログラムは`/target/deploy`ディレクトリにあります。

<Callout type="warn">

`anchor build`を実行する際に、次のエラーが発生した場合：

<Accordions>
<Accordion title="error: not a directory">

```
error: not a directory: '.../solana-release/bin/sdk/sbf/dependencies/platform-tools/rust/lib'
```

以下の解決策を試してください：

1. 次のコマンドを使用して強制的にインストールします：

```terminal
$ cargo build-sbf --force-tools-install
```

2. 上記の解決策が機能しない場合は、Solanaのキャッシュをクリアしてください：

```terminal
$ rm -rf ~/.cache/solana/*
```

</Accordion>

<Accordion title="ロックファイルバージョン4には`-Znext-lockfile-bump`が必要です">
これは`Cargo.lock`ファイルのバージョンフィールドを4から3に変更することで修正できます：

```diff title="Cargo.lock"
-version = 4
+version = 3
```

詳細については[この問題](https://github.com/solana-foundation/anchor/issues/3392)を参照してください。

</Accordion>

</Accordions>

上記の解決策を適用した後、再度*shell`anchor build`*を実行してみてください。

</Callout>

</Step>
<Step>

### プログラムのデプロイ

プロジェクトをデプロイするには、次のコマンドを実行します：

```terminal
$ anchor deploy
```

このコマンドは、[`Anchor.toml`](https://www.anchor-lang.com/docs/references/anchor-toml)ファイルで指定された`cluster`にプログラムをデプロイします。

</Step>
<Step>

### プログラムのテスト

プロジェクトをテストするには、次のコマンドを実行します：

```terminal
$ anchor test
```

<Callout>

このコマンドはプロジェクトのビルド、デプロイ、テストの実行を行います。

`Anchor.toml`で`cluster`として`localnet`を使用する場合、Anchorは自動的にローカルvalidatorを起動し、プログラムをデプロイし、テストを実行した後、validatorを停止します。

</Callout>

<Callout type="warn">

LinuxまたはWSLで新しいAnchorプロジェクトを作成した後に*shell`anchor test`*を実行すると、Node.jsまたはYarnがインストールされていない場合、次のようなエラーが発生することがあります：

```
Permission denied (os error 13)
```

```
No such file or directory (os error 2)
```

</Callout>

</Step>
</Steps>
