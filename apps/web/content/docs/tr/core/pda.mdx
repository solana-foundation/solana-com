---
title: Program-Derived Address
description:
  Solana'nın Program-Derived Address'lerini (PDA'lar) öğrenin — güvenli program
  imzalamayı sağlayan deterministik hesap adresleri. PDA türetimini, kanonik
  bump'ları ve PDA hesaplarının nasıl oluşturulacağını anlayın.
---

Bir Solana [hesap adresi](/docs/core/accounts#account-address), hesabın blok
zincirindeki konumunu gösterir. Birçok hesap adresi bir keypair'in açık
anahtarıdır; bu durumda, ilgili özel anahtar hesabı içeren işlemleri imzalamak
için kullanılır.

Açık anahtar adresine kullanışlı bir alternatif, program-derived address
(PDA)'dir. PDA'lar, program durumunu depolamak, eşleştirmek ve getirmek için
kolay bir yöntem sağlar. Bir PDA, bir program kimliği ve isteğe bağlı önceden
tanımlanmış girdilerin bir kombinasyonu kullanılarak deterministik olarak
oluşturulan bir adrestir. PDA'lar açık anahtar adreslerine benzer, ancak
karşılık gelen bir özel anahtarları yoktur.

Solana çalışma zamanı, programların özel bir anahtar gerektirmeden PDA'lar için
imza atmasını sağlar. Bir PDA kullanmak, hesabın adresini takip etme ihtiyacını
ortadan kaldırır. Bunun yerine, PDA'nın türetilmesi için kullanılan belirli
girdileri hatırlayabilirsiniz. (Programların imzalama için PDA'ları nasıl
kullandığını öğrenmek için [Programlar Arası Çağrılar](/docs/core/cpi) bölümüne
bakın.)

## Arka plan

Solana
[keypair'leri](https://github.com/anza-xyz/solana-sdk/blob/sdk%40v2.2.2/keypair/src/lib.rs#L26),
[Ed25519 eğrisi](https://ed25519.cr.yp.to/) (eliptik eğri kriptografisi)
üzerindeki noktalardır. Bunlar bir açık anahtar ve bir özel anahtardan oluşur.
Açık anahtar hesap adresi olur ve özel anahtar hesap için geçerli bir
[imza](/docs/core/transactions#signatures) oluşturmak için kullanılır.

![Eğri üzerinde adresleri olan iki hesap](/assets/docs/core/pda/address-on-curve.svg)

Bir PDA, kasıtlı olarak Ed25519 eğrisinin dışına düşecek şekilde türetilir. Bu,
geçerli bir karşılık gelen özel anahtarı olmadığı ve kriptografik işlemler
gerçekleştiremeyeceği anlamına gelir. (İmza sağlamak gibi.) Ancak, Solana,
programların özel bir anahtar gerektirmeden PDA'lar için imza atmasını sağlar.

![Eğri Dışı Adres](/assets/docs/core/pda/address-off-curve.svg)

PDA'ları, önceden tanımlanmış bir girdi kümesi kullanarak zincir üzerinde
hashmap benzeri yapılar oluşturmanın bir yolu olarak düşünebilirsiniz. (Örneğin,
dizeler, sayılar ve diğer hesap adresleri.)

![Program Derived Address](/assets/docs/core/pda/pda.svg)

## Bir PDA türet

Bir PDA ile hesap oluşturmadan önce, öncelikle adresi türetmeniz gerekir. Bir
PDA türetmek, otomatik olarak o adresteki zincir üzerinde bir hesap oluşturmaz -
hesap, PDA'yı türetmek için kullanılan program aracılığıyla açıkça
oluşturulmalıdır. Bir PDA'yı haritadaki bir adres gibi düşünebilirsiniz: bir
adresin var olması, orada bir şeyin inşa edildiği anlamına gelmez.

Solana SDK'ları, aşağıdaki tabloda gösterilen fonksiyonlarla PDA oluşturulmasını
destekler. Her fonksiyon şu girdileri alır:

- **Program ID**: PDA'yı türetmek için kullanılan programın adresi. Bu program,
  PDA adına imza atabilir.
- **İsteğe bağlı seed'ler**: Dizeler, sayılar veya diğer hesap adresleri gibi
  önceden tanımlanmış girdiler.

| SDK                            | Fonksiyon                                                                                                                        |
| ------------------------------ | -------------------------------------------------------------------------------------------------------------------------------- |
| `@solana/kit` (Typescript)     | [`getProgramDerivedAddress`](https://github.com/anza-xyz/kit/blob/v2.1.0/packages/addresses/src/program-derived-address.ts#L157) |
| `@solana/web3.js` (Typescript) | [`findProgramAddressSync`](https://github.com/solana-foundation/solana-web3.js/blob/v1.98.0/src/publickey.ts#L212)               |
| `solana_sdk` (Rust)            | [`find_program_address`](https://github.com/anza-xyz/solana-sdk/blob/sdk%40v2.2.2/pubkey/src/lib.rs#L617)                        |

Fonksiyon, program ID'sini ve isteğe bağlı seed'leri kullanır, ardından geçerli
bir program adresi oluşturmaya çalışmak için bump değerlerini yineler. Bump
değerlerinin yinelenmesi 255'ten başlar ve geçerli bir PDA bulunana kadar 1'er
azalır. Geçerli bir PDA bulunduktan sonra, fonksiyon PDA'yı ve bump seed'i
döndürür.

<Callout>
  Bump seed, geçerli bir eğri dışı adresin oluşturulmasını sağlamak için isteğe
  bağlı seed'lere eklenen ekstra bir bayttır.
</Callout>

![PDA Türetimi](/assets/docs/core/pda/pda-derivation.svg)

### Kanonik bump

Bump seed, isteğe bağlı seed'lere eklenen ekstra bir bayttır. Türetme
fonksiyonu, 255'ten başlayarak ve 1 azaltarak, geçerli bir eğri dışı adres
üretene kadar bump değerlerini yineler. Geçerli bir eğri dışı adres üreten ilk
değer "kanonik bump" olarak adlandırılır.

Aşağıdaki örnekler, tüm olası bump seed'leri (255'ten 0'a) kullanarak PDA
türetimini göstermektedir:

<Callout type="info">
  Kit örneği dahil edilmemiştir çünkü
  [createProgramDerivedAddress](https://github.com/anza-xyz/kit/blob/v2.1.0/packages/addresses/src/program-derived-address.ts#L101)
  fonksiyonu dışa aktarılmamıştır.
</Callout>

<CodeTabs storage="pda-examples" flags="r">

```ts !! title="Legacy"
import { PublicKey } from "@solana/web3.js";

const programId = new PublicKey("11111111111111111111111111111111");
const optionalSeed = "helloWorld";

// Loop through all bump seeds (255 down to 0)
for (let bump = 255; bump >= 0; bump--) {
  try {
    const PDA = PublicKey.createProgramAddressSync(
      [Buffer.from(optionalSeed), Buffer.from([bump])],
      programId
    );
    console.log("bump " + bump + ": " + PDA);
  } catch (error) {
    console.log("bump " + bump + ": " + error);
  }
}
```

```rs !! title="Rust"
use solana_sdk::pubkey::Pubkey;
use std::str::FromStr;

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let program_id = Pubkey::from_str("11111111111111111111111111111111")?;
    let optional_seed = b"helloWorld";

    // Loop through all bump seeds (255 down to 0)
    for bump in (0..=255).rev() {
        match Pubkey::create_program_address(&[optional_seed.as_ref(), &[bump]], &program_id) {
            Ok(pda) => println!("bump {}: {}", bump, pda),
            Err(err) => println!("bump {}: {}", bump, err),
        }
    }

    Ok(())
}
```

</CodeTabs>

<CodeTabs>

```sh !! title="Expected TS Output"
bump 255: Error: Invalid seeds, address must fall off the curve
bump 254: 46GZzzetjCURsdFPb7rcnspbEMnCBXe9kpjrsZAkKb6X
bump 253: GBNWBGxKmdcd7JrMnBdZke9Fumj9sir4rpbruwEGmR4y
bump 252: THfBMgduMonjaNsCisKa7Qz2cBoG1VCUYHyso7UXYHH
bump 251: EuRrNqJAofo7y3Jy6MGvF7eZAYegqYTwH2dnLCwDDGdP
bump 250: Error: Invalid seeds, address must fall off the curve
...
// remaining bump outputs
```

```sh !! title="Expected Rust Output"
bump 255: Provided seeds do not result in a valid address
bump 254: 46GZzzetjCURsdFPb7rcnspbEMnCBXe9kpjrsZAkKb6X
bump 253: GBNWBGxKmdcd7JrMnBdZke9Fumj9sir4rpbruwEGmR4y
bump 252: THfBMgduMonjaNsCisKa7Qz2cBoG1VCUYHyso7UXYHH
bump 251: EuRrNqJAofo7y3Jy6MGvF7eZAYegqYTwH2dnLCwDDGdP
bump 250: Provided seeds do not result in a valid address
...
// remaining bump outputs
```

</CodeTabs>

Bu örnekte, ilk bump seed bir hata fırlatır. Geçerli bir PDA türeten ilk bump
seed 254'tür. 253-251 bump seed'leri de benzersiz, geçerli PDA'lar türetir.

Bu, aynı isteğe bağlı seed'ler ve `programId` verildiğinde, farklı bir değere
sahip bir bump seed'in hala geçerli bir PDA türetebileceği anlamına gelir.

<Callout type="warn">
  Programa iletilen bir PDA'nın kanonik bump'tan türetildiğinden emin olmak için
  her zaman güvenlik kontrolleri ekleyin. Bunu yapmamak, programın
  talimatlarında beklenmeyen hesapların kullanılmasına izin veren güvenlik
  açıklarına yol açabilir. PDA'ları türetirken yalnızca kanonik bump'ı kullanmak
  en iyi uygulamadır.
</Callout>

### Örnekler

Aşağıdaki örnekler, Solana SDK'larını kullanarak bir PDA türetmektedir. Kodu
çalıştırmak için **&#9655; Çalıştır**'a tıklayın.

#### Bir string seed ile PDA türetme

Aşağıdaki örnek, bir program kimliği ve isteğe bağlı bir string seed kullanarak
bir PDA türetir.

<CodeTabs storage="pda-examples" flags="r">

```ts !! title="Kit"
import { Address, getProgramDerivedAddress } from "@solana/kit";

const programAddress = "11111111111111111111111111111111" as Address;
// !focus
const seeds = ["helloWorld"];
const [pda, bump] = await getProgramDerivedAddress({
  programAddress,
  seeds
});

console.log(`PDA: ${pda}`);
console.log(`Bump: ${bump}`);
```

```ts !! title="Legacy"
import { PublicKey } from "@solana/web3.js";

const programAddress = new PublicKey("11111111111111111111111111111111");
// !focus
const seeds = [Buffer.from("helloWorld")];
const [pda, bump] = await PublicKey.findProgramAddressSync(
  seeds,
  programAddress
);

console.log(`PDA: ${pda}`);
console.log(`Bump: ${bump}`);
```

```rs !! title="Rust"
use solana_sdk::pubkey::Pubkey;
use std::str::FromStr;

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let program_address = Pubkey::from_str("11111111111111111111111111111111")?;
    // !focus
    let seeds: &[&[u8]] = &[b"helloWorld"];
    let (pda, bump) = Pubkey::find_program_address(seeds, &program_address);

    println!("PDA: {}", pda);
    println!("Bump: {}", bump);
    Ok(())
}
```

</CodeTabs>

#### Adres seed ile bir PDA türetin

Aşağıdaki örnek, bir program kimliği ve isteğe bağlı bir adres seed kullanarak
bir PDA türetir.

<CodeTabs storage="pda-examples"flags="r">

```ts !! title="Kit"
import {
  Address,
  getAddressEncoder,
  getProgramDerivedAddress
} from "@solana/kit";

const programAddress = "11111111111111111111111111111111" as Address;
// !focus(1:4)
const addressEncoder = getAddressEncoder();
const optionalSeedAddress = addressEncoder.encode(
  "B9Lf9z5BfNPT4d5KMeaBFx8x1G4CULZYR1jA2kmxRDka" as Address
);
const seeds = [optionalSeedAddress];
const [pda, bump] = await getProgramDerivedAddress({
  programAddress,
  seeds
});

console.log(`PDA: ${pda}`);
console.log(`Bump: ${bump}`);
```

```ts !! title="Legacy"
import { PublicKey } from "@solana/web3.js";

const programAddress = new PublicKey("11111111111111111111111111111111");

// !focus(1:3)
const optionalSeedAddress = new PublicKey(
  "B9Lf9z5BfNPT4d5KMeaBFx8x1G4CULZYR1jA2kmxRDka"
);
const seeds = [optionalSeedAddress.toBuffer()];
const [pda, bump] = await PublicKey.findProgramAddressSync(
  seeds,
  programAddress
);

console.log(`PDA: ${pda}`);
console.log(`Bump: ${bump}`);
```

```rs !! title="Rust"
use solana_sdk::pubkey::Pubkey;
use std::str::FromStr;

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let program_address = Pubkey::from_str("11111111111111111111111111111111")?;
    // !focus
    let optional_seed_address = Pubkey::from_str("B9Lf9z5BfNPT4d5KMeaBFx8x1G4CULZYR1jA2kmxRDka")?;
    let seeds: &[&[u8]] = &[optional_seed_address.as_ref()];
    let (pda, bump) = Pubkey::find_program_address(seeds, &program_address);

    println!("PDA: {}", pda);
    println!("Bump: {}", bump);
    Ok(())
}
```

</CodeTabs>

#### Birden fazla seed ile bir PDA türetin

Aşağıdaki örnek, bir program kimliği ve birden fazla isteğe bağlı seed
kullanarak bir PDA türetir.

<CodeTabs storage="pda-examples" flags="r">

```ts !! title="Kit"
import {
  Address,
  getAddressEncoder,
  getProgramDerivedAddress
} from "@solana/kit";

const programAddress = "11111111111111111111111111111111" as Address;
// !focus(1:5)
const optionalSeedString = "helloWorld";
const addressEncoder = getAddressEncoder();
const optionalSeedAddress = addressEncoder.encode(
  "B9Lf9z5BfNPT4d5KMeaBFx8x1G4CULZYR1jA2kmxRDka" as Address
);
const seeds = [optionalSeedString, optionalSeedAddress];
const [pda, bump] = await getProgramDerivedAddress({
  programAddress,
  seeds
});

console.log(`PDA: ${pda}`);
console.log(`Bump: ${bump}`);
```

```ts !! title="Legacy"
import { PublicKey } from "@solana/web3.js";

const programAddress = new PublicKey("11111111111111111111111111111111");
// !focus(1:4)
const optionalSeedString = "helloWorld";
const optionalSeedAddress = new PublicKey(
  "B9Lf9z5BfNPT4d5KMeaBFx8x1G4CULZYR1jA2kmxRDka"
);
const seeds = [Buffer.from(optionalSeedString), optionalSeedAddress.toBuffer()];
const [pda, bump] = await PublicKey.findProgramAddressSync(
  seeds,
  programAddress
);

console.log(`PDA: ${pda}`);
console.log(`Bump: ${bump}`);
```

```rs !! title="Rust"
use solana_sdk::pubkey::Pubkey;
use std::str::FromStr;

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let program_address = Pubkey::from_str("11111111111111111111111111111111")?;
    // !focus(1:2)
    let optional_seed_bytes = b"helloWorld";
    let optional_seed_address = Pubkey::from_str("B9Lf9z5BfNPT4d5KMeaBFx8x1G4CULZYR1jA2kmxRDka")?;
    let seeds: &[&[u8]] = &[optional_seed_bytes, optional_seed_address.as_ref()];
    let (pda, bump) = Pubkey::find_program_address(seeds, &program_address);

    println!("PDA: {}", pda);
    println!("Bump: {}", bump);
    Ok(())
}
```

</CodeTabs>

## Bir PDA hesabı oluşturun

<WithMentions>

Aşağıdaki örnek, program türetilmiş bir adrese sahip yeni bir hesap oluşturmak
için [Anchor framework](https://www.anchor-lang.com/docs) kullanır. Program,
PDA'yı türetmek için kullanılan [kullanıcı adresini](mention:user-address) ve
[bump seed](mention:bump) depolayacak yeni hesabı oluşturmak için tek bir
[`initialize`](mention:initialize) talimatı içerir.

```rs title="Program"
use anchor_lang::prelude::*;

declare_id!("75GJVCJNhaukaa2vCCqhreY31gaphv7XTScBChmr1ueR");

#[program]
pub mod pda_account {
    use super::*;

    // !mention initialize
    pub fn initialize(ctx: Context<Initialize>) -> Result<()> {
        let account_data = &mut ctx.accounts.pda_account;
        // store the address of the `user`
        // !mark
        // !mention user-address
        account_data.user = *ctx.accounts.user.key;
        // store the canonical bumpd
        // !mark
        // !mention bump
        account_data.bump = ctx.bumps.pda_account;
        Ok(())
    }
}

#[derive(Accounts)]
pub struct Initialize<'info> {
    #[account(mut)]
    // !mention user-address
    pub user: Signer<'info>,

    #[account(
        init,
        // define the seeds to derive the PDA
        // !mark
        // !mention user-address
        seeds = [b"data", user.key().as_ref()],
        // use the canonical bump
        // !mark
        // !mention bump
        bump,
        payer = user,
        space = 8 + DataAccount::INIT_SPACE
    )]
    pub pda_account: Account<'info, DataAccount>,
    pub system_program: Program<'info, System>,
}

#[account]
#[derive(InitSpace)]
pub struct DataAccount {
    // !mark
    // !mention user-address
    pub user: Pubkey,
    // !mark
    // !mention bump
    pub bump: u8,
}
```

</WithMentions>

<WithMentions>

[`init`](mention:init) kısıtlaması, Anchor'a PDA'yı adres olarak kullanarak yeni
bir hesap oluşturmak için
[System Program'ı çağırmasını](/docs/core/programs#the-system-program) söyler.
PDA'yı oluşturmak için kullanılan [seeds](mention:seeds) şunlardır:

- Talimatta sağlanan kullanıcı hesabının adresi
- Sabit dize: "data"
- Kanonik [bump seed](mention:bump)

Bu örnekte, bump kısıtlamasına bir değer atanmamıştır, bu nedenle Anchor, PDA'yı
türetmek ve bump'ı bulmak için `find_program_address` kullanacaktır.

```rust title="pda_account"
#[account(
    // !mention init
    init,
    // !mention seeds
    seeds = [b"data", user.key().as_ref()],
    // !mention bump
    bump,
    payer = user,
    space = 8 + DataAccount::INIT_SPACE
)]
pub pda_account: Account<'info, DataAccount>,
```

</WithMentions>

<WithMentions>

Aşağıdaki test dosyası, program türetilmiş bir adresle yeni bir hesap oluşturmak
için [`initialize`](mention:initialize) talimatını çağıran bir işlem içerir.
Dosya, [PDA'yı türetmek](mention:pda) için kod içerir.

Örnek ayrıca oluşturulacak yeni hesabı nasıl [alacağınızı](mention:fetch)
gösterir.

```ts title="Test"
import * as anchor from "@coral-xyz/anchor";
import { Program } from "@coral-xyz/anchor";
import { PdaAccount } from "../target/types/pda_account";
import { PublicKey } from "@solana/web3.js";

describe("pda-account", () => {
  const provider = anchor.AnchorProvider.env();
  anchor.setProvider(provider);

  const program = anchor.workspace.PdaAccount as Program<PdaAccount>;
  const user = provider.wallet as anchor.Wallet;

  // !mention(1:5) pda
  // Derive the PDA address using the seeds specified on the program
  const [PDA] = PublicKey.findProgramAddressSync(
    [Buffer.from("data"), user.publicKey.toBuffer()],
    program.programId
  );

  it("Is initialized!", async () => {
    const transactionSignature = await program.methods
      // !mention initialize
      .initialize()
      .accounts({
        user: user.publicKey
      })
      .rpc();

    console.log("Transaction Signature:", transactionSignature);
  });

  it("Fetch Account", async () => {
    // !mention fetch
    const pdaAccount = await program.account.dataAccount.fetch(PDA);
    console.log(JSON.stringify(pdaAccount, null, 2));
  });
});
```

</WithMentions>

<Callout type="warn">
  Eğer aynı `user` adres seed'i ile `initialize` talimatını tekrar çağırırsanız,
  işlem başarısız olacaktır. Bu, türetilen adreste zaten bir hesap var olduğu
  için gerçekleşir.
</Callout>
