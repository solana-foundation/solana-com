---
title: Program Dağıtma
description:
  Anchor framework ve Solana Playground kullanarak ilk Solana programınızı nasıl
  oluşturacağınızı, dağıtacağınızı ve test edeceğinizi öğrenin. Bu başlangıç
  seviyesindeki rehber, basit bir program oluşturma, devnet'e dağıtma, testleri
  çalıştırma ve programı kapatma adımlarını anlatır.
h1: İlk Solana Programınızı Dağıtın
---

Anchor framework kullanarak ilk [programınızı](/docs/core/programs) Solana
Blockchain'e oluşturun, dağıtın ve test edin. Bu rehber, Solana Playground'u
daha iyi tanımanıza ve program derived address (PDA) ve cross program invocation
(CPI) kullanmaya hazırlanmanıza yardımcı olacak.

<Steps>

<Step>

### Anchor Projesi Oluşturma

1. Web tarayıcınızda [Solana Playground](https://beta.solpg.io) adresini açın
2. Sol panelde **+ Create a new project** (Yeni proje oluştur) seçeneğine
   tıklayın
3. Bir **Project name** (Proje adı) girin
4. Framework olarak **Anchor (Rust)** seçin
5. **Create** (Oluştur) düğmesine tıklayın

![Yeni Proje](/assets/docs/intro/quickstart/pg-new-project.gif)

`src/lib.rs` kaynak dosyası açılacaktır. Bu dosya, `Initialize` adlı bir yapı
içerir ve şunları yapar:

- _rs`data: u64`_ adlı gerekli bir parametre alır
- Yeni bir hesap oluşturur
- _rs`data: u64`_ değerini yeni hesaba kaydeder
- İşlemin program günlüklerine bir mesaj ekler

<WithNotes>

```rust title="lib.rs"
use anchor_lang::prelude::*;

// This is your program's public key and it will update
// automatically when you build the project.
// !tooltip[/declare_id/] declare_id
declare_id!("11111111111111111111111111111111");

// !tooltip[/program/] program
#[program]
mod hello_anchor {
    use super::*;
    // !tooltip[/data: u64/] parameter
    pub fn initialize(ctx: Context<Initialize>, data: u64) -> Result<()> {
        // !tooltip[/ctx.accounts.new_account.data = data/] initialize
        ctx.accounts.new_account.data = data;
        // !tooltip[/msg!/] msg
        msg!("Changed data to: {}!", data); // Message will show up in the tx logs
        Ok(())
    }
}

// !tooltip[/Accounts/] accounts
#[derive(Accounts)]
pub struct Initialize<'info> {
    // We must specify the space in order to initialize an account.
    // First 8 bytes are default account discriminator,
    // next 8 bytes come from NewAccount.data being type u64.
    // (u64 = 64 bits unsigned integer = 8 bytes)
    // !tooltip[/account/] constraints
    #[account(
      // !tooltip[/init/] init
      init,
      // !tooltip[/payer/] payer
      payer = signer,
      // !tooltip[/space/] space
      space = 8 + 8
    )]
    pub new_account: Account<'info, NewAccount>,
    // !tooltip[/account/] constraints
    #[account(mut)]
    pub signer: Signer<'info>,
    pub system_program: Program<'info, System>,
}

// !tooltip[/account/] account
#[account]
pub struct NewAccount {
    data: u64
}
```

### !declare_id

Programınızın zincir üzerindeki adresi. Projeyi oluşturduğunuzda
güncellenecektir

### !program

Programın talimatlarını içeren modül

### !accounts

Programın hesaplarını içeren bir yapıyı işaretler

### !account

Bu programın oluşturabileceği ve sahip olabileceği hesap veri türlerini temsil
eden bir yapı

### !constraints

Hesap kısıtlamaları. Örneğin, program güvenliğini artıran yaygın kontroller veya
özellikler

### !parameter

Talimat çağrıldığında ona iletilen değer

### !initialize

`new_account` hesabının `data` alanına erişir ve değerini `data: u64` olarak
ayarlar

### !msg

_rs`msg!`_ makrosu, işlemin program günlüklerine bir mesaj kaydeder

### !init

Yeni bir hesap oluşturmak için System Program'ı çağırır ve bu programı hesabın
sahibi yapar. Program sahibi olarak, bu program hesap verilerine yazabilir

### !payer

Yeni hesap için ödeme yapan hesap

### !space

Hesap için ayrılacak bayt sayısı

</WithNotes>

<Accordions>

<Accordion title="Açıklama">

<WithMentions>

- [`declare_id!`](mention:one) makrosu, programınızın zincir üzerindeki adresini
  belirtir. Solana Playground, programı oluşturduğunuzda bu adresi otomatik
  olarak güncelleyecektir.

```rs
// !mention one
declare_id!("11111111111111111111111111111111");
```

</WithMentions>

<WithMentions>

- [`#[program]`](mention:one) özniteliği, programın talimatlarını temsil eden
  fonksiyonları içeren bir modülü işaretler.

```rs
// !mention one
#[program]
mod hello_anchor {
    use super::*;
    // !mention two
    pub fn initialize(ctx: Context<Initialize>, data: u64) -> Result<()> {
        // !mention three
        ctx.accounts.new_account.data = data;
        msg!("Changed data to: {}!", data); // Message will show up in the tx logs
        Ok(())
    }
}
```

Bu örnekte, [`initialize`](mention:two) talimatı iki parametre alır:

- `ctx: Context<Initialize>`: Bu talimat için gereken hesapları, `Initialize`
  yapısında belirtildiği şekilde fonksiyona aktarır.
- `data: u64`: Talimatı çağırdığınızda sağlamanız gereken özel bir parametre.

Fonksiyon gövdesi, [`new_account` hesabının `data` alanını](mention:three)
sağlanan `data` argümanına ayarlar ve ardından program günlüklerine bir mesaj
yazdırır.

</WithMentions>

<WithMentions>

- [`#[derive(Accounts)]`](mention:one) özniteliği, belirli bir talimat için
  gereken hesapları belirten bir yapı tanımlar. Her alan ayrı bir hesabı temsil
  eder.

  Anchor, alan türleri (örn. `Signer<'info>`) ve kısıtlamalar (örn.
  `#[account(mut)]`) aracılığıyla hesap doğrulamasıyla ilgili yaygın güvenlik
  kontrollerini otomatik olarak yönetir.

  ```rs
  // !mention one
  #[derive(Accounts)]
  pub struct Initialize<'info> {
      #[account(init, payer = signer, space = 8 + 8)]
      pub new_account: Account<'info, NewAccount>,
      #[account(mut)]
      pub signer: Signer<'info>,
      pub system_program: Program<'info, System>,
  }
  ```

</WithMentions>

<WithMentions>

- [`#[account]`](mention:one) özniteliği, bu programın oluşturduğu ve sahip
  olduğu hesaplar için veri türünü temsil eden bir yapı tanımlar.

```rs
// !mention one
#[account]
pub struct NewAccount {
  data: u64
}
```

</WithMentions>

</Accordion>
</Accordions>

</Step>

<Step>

### Programı derleme ve dağıtma

1. Program kodunu derleyin

```terminal
$ build
Building...
Build successful. Completed in 1.46s.
```

<Callout>
  _rs`declare_id!()`_ içinde tanımlanan [program
  kimliğiniz](/docs/intro/quick-start/deploying-programs) şimdi
  güncellenecektir.
</Callout>

2. Cüzdanınıza SOL ekleyin _(İsteğe bağlı)_

Bir programı dağıtmak, programın zincir üzerindeki hesabında SOL gerektirir.
Gerekirse, 3. adıma geçmeden önce
[cüzdanınıza SOL ekleyin](/docs/intro/quick-start#add-sol-to-your-wallet).

3. Programı ağa dağıtın

```terminal
$ deploy
Deploying... This could take a while depending on the program size and network conditions.
Warning: 1 transaction not confirmed, retrying...
Deployment successful. Completed in 19s.
```

<Callout type="info">
  Dağıtıldığında, programın bayt kodu çalıştırılabilir bir program hesabında
  saklanır.
</Callout>

**Not:** Tercih ederseniz, aşağıdaki ekran görüntüsünde gösterildiği gibi sol
panel üzerindeki **Build** ve **Deploy** düğmelerini kullanabilirsiniz.

![Derleme ve Dağıtma](/assets/docs/intro/quickstart/pg-build-deploy.png)

</Step>

<Step>

### Programı test etme

<WithMentions>

1. `tests/anchor.test.ts` adlı test dosyasını açın. Bu dosya, programın
   [`initialize`](mention:one) yapısının istemciden nasıl çağrılacağını
   gösterir.

```ts title="anchor.test.ts"
// No imports needed: web3, anchor, pg and more are globally available

describe("Test", () => {
  it("initialize", async () => {
    // Generate keypair for the new account
    const newAccountKp = new web3.Keypair();

    // Send transaction
    const data = new BN(42);
    const txHash = await pg.program.methods
      // !mention one
      .initialize(data)
      .accounts({
        newAccount: newAccountKp.publicKey,
        signer: pg.wallet.publicKey,
        systemProgram: web3.SystemProgram.programId
      })
      .signers([newAccountKp])
      .rpc();
    console.log(`Use 'solana confirm -v ${txHash}' to see the logs`);

    // Confirm transaction
    await pg.connection.confirmTransaction(txHash);

    // Fetch the created account
    const newAccount = await pg.program.account.newAccount.fetch(
      newAccountKp.publicKey
    );

    console.log("On-chain data is:", newAccount.data.toString());

    // Check whether the data on-chain is equal to local 'data'
    assert(data.eq(newAccount.data));
  });
});
```

</WithMentions>

2. Test dosyasını çalıştırın

```terminal
$ test
Running tests...
  hello_anchor.test.ts:
  hello_anchor
    Use 'solana confirm -v 3TewJtiUz1EgtT88pLJHvKFzqrzDNuHVi8CfD2mWmHEBAaMfC5NAaHdmr19qQYfTiBace6XUmADvR4Qrhe8gH5uc' to see the logs
    On-chain data is: 42
    ✔ initialize (961ms)
  1 passing (963ms)
```

3. Çıktıda yer alan işlem hash'ini (`TxHash`) kaydedin

(Yukarıdaki örnekte, işlem hash'i
`3TewJtiUz1EgtT88pLJHvKFzqrzDNuHVi8CfD2mWmHEBAaMfC5NAaHdmr19qQYfTiBace6XUmADvR4Qrhe8gH5uc`
şeklindedir.)

**Not:** Tercih ederseniz, sol panel üzerindeki `Test` düğmesini
kullanabilirsiniz.

![Test Çalıştır](/assets/docs/intro/quickstart/pg-test.png)

4. İşlem kayıtlarını görüntülemek için `solana confirm -v [TxHash]` komutunu
   çalıştırın

```terminal
$ solana confirm -v 3TewJtiUz1EgtT88pLJHvKFzqrzDNuHVi8CfD2mWmHEBAaMfC5NAaHdmr19qQYfTiBace6XUmADvR4Qrhe8gH5uc
RPC URL: https://api.devnet.solana.com
Default Signer: Playground Wallet
Commitment: confirmed

Transaction executed in slot 308150984:
  Block Time: 2024-06-25T12:52:05-05:00
  Version: legacy
  Recent Blockhash: 7AnZvY37nMhCybTyVXJ1umcfHSZGbngnm4GZx6jNRTNH
  Signature 0: 3TewJtiUz1EgtT88pLJHvKFzqrzDNuHVi8CfD2mWmHEBAaMfC5NAaHdmr19qQYfTiBace6XUmADvR4Qrhe8gH5uc
  Signature 1: 3TrRbqeMYFCkjsxdPExxBkLAi9SB2pNUyg87ryBaTHzzYtGjbsAz9udfT9AkrjSo1ZjByJgJHBAdRVVTZv6B87PQ
  Account 0: srw- 3z9vL1zjN6qyAFHhHQdWYRTFAcy69pJydkZmSFBKHg1R (fee payer)
  Account 1: srw- c7yy8zdP8oeZ2ewbSb8WWY2yWjDpg3B43jk3478Nv7J
  Account 2: -r-- 11111111111111111111111111111111
  Account 3: -r-x 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r
  Instruction 0
    Program:   2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r (3)
    Account 0: c7yy8zdP8oeZ2ewbSb8WWY2yWjDpg3B43jk3478Nv7J (1)
    Account 1: 3z9vL1zjN6qyAFHhHQdWYRTFAcy69pJydkZmSFBKHg1R (0)
    Account 2: 11111111111111111111111111111111 (2)
    Data: [175, 175, 109, 31, 13, 152, 155, 237, 42, 0, 0, 0, 0, 0, 0, 0]
  Status: Ok
    Fee: ◎0.00001
    Account 0 balance: ◎5.47001376 -> ◎5.46900152
    Account 1 balance: ◎0 -> ◎0.00100224
    Account 2 balance: ◎0.000000001
    Account 3 balance: ◎0.00139896
  Log Messages:
    Program 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r invoke [1]
    Program log: Instruction: Initialize
    Program 11111111111111111111111111111111 invoke [2]
    Program 11111111111111111111111111111111 success
    Program log: Changed data to: 42!
    Program 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r consumed 5661 of 200000 compute units
    Program 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r success

Confirmed
```

4. İşlem detaylarını görüntüleyin

[SolanaFM](https://solana.fm/) veya
[Solana Explorer](https://explorer.solana.com/?cluster=devnet) sayfalarından
birini açın ve işlem hash'ini aratın.

<Callout type="warn">
  **Solana Explorer:** Ağ kümesini Solana Playground ile eşleşecek şekilde
  `devnet` olarak ayarlayın.
</Callout>

</Step>

<Step>

### Programı kapatma

Zincir üzerindeki programa tahsis edilen SOL'u geri almak için programı kapatın.
Bunu yapmak için, _rs`declare_id!()`_ makrosunda saklanan program adresini
kullanarak `solana program close [ProgramID]` komutunu çalıştırın.

```terminal
$ solana program close 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r
Closed Program Id 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r, 2.79511512 SOL reclaimed
```

<Callout type="warn">
  Programlar **yalnızca** yükseltme yetkisine sahip bir hesap tarafından
  kapatılabilir veya güncellenebilir. Playground cüzdanınız, her program
  dağıtıldığında otomatik olarak o program için yükseltme yetkilisi olur.
  Yükseltme yetkisi iptal edilirse, program değiştirilemez hale gelir.
</Callout>

Tebrikler! Anchor kullanarak ilk Solana programınızı oluşturdunuz ve dağıttınız.

</Step>

</Steps>

## Sonraki adımlar

İlk programınızı dağıttıktan sonra, artık
[program-türetilmiş adresler](/docs/intro/quick-start/program-derived-address)
ve [programlar arası çağrı](/docs/intro/quick-start/cross-program-invocation)
konularını keşfetmeye hazırsınız.
