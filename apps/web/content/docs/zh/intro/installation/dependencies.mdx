---
title: 安装依赖项
seoTitle: 安装开发 Solana 所需的依赖项
description:
  本指南将帮助您设置本地 Solana 开发环境。了解如何在 Windows (WSL)、Linux 和 Mac
  上安装 Rust、Solana CLI 和 Anchor Framework。
---

本指南将帮助您设置本地 Solana 开发环境。了解如何在 Windows
(WSL)、Linux 和 Mac 上安装 Rust、Solana CLI 和 Anchor
Framework。如果您希望单独安装每个依赖项，或者[快速安装](/docs/intro/installation/)因某些原因失败，请使用本指南。

### 前置条件

<Accordions>
<Accordion title="Windows">

要在 Windows 上开发 Solana 程序，您**必须**使用
[Windows Subsystem for Linux](https://learn.microsoft.com/en-us/windows/wsl/install)
(WSL)。安装 WSL 后，所有其他依赖项将通过 Linux 终端安装。

要安装 WSL，请在 Windows PowerShell 中运行以下命令：

```terminal
$ wsl --install
```

安装过程中会提示您创建一个默认用户账户。

![WSL 安装](/assets/docs/intro/installation/wsl-install.png)

默认情况下，WSL 会安装 Ubuntu。您可以通过在搜索栏中搜索 "Ubuntu" 来打开 Linux 终端。

![WSL Ubuntu](/assets/docs/intro/installation/wsl-ubuntu-search.png)

如果您的 Ubuntu 终端看起来如下图所示，您可能会遇到一个问题，即终端中
`ctrl + v`（粘贴快捷键）无法使用。

![Ubuntu 终端](/assets/docs/intro/installation/wsl-ubuntu-terminal-1.png)

如果遇到此问题，请通过在搜索栏中搜索 "Terminal" 打开 Windows Terminal。

![Windows Terminal](/assets/docs/intro/installation/wsl-windows-terminal.png)

接下来，关闭 Windows
Terminal，然后再次通过搜索 Ubuntu 打开 Linux 终端。此时终端应如下图所示，`ctrl + v`（粘贴快捷键）可以正常使用。

![Ubuntu 终端](/assets/docs/intro/installation/wsl-ubuntu-terminal-2.png)

如果您使用 VS
Code，[WSL 扩展](https://code.visualstudio.com/docs/remote/wsl-tutorial)
允许您将 WSL 与 VS Code 一起使用。

![在 VS Code 中设置 WSL](/assets/docs/intro/installation/wsl-vscode.png)

您将在 VS Code 状态栏中看到以下内容：

![WSL: Ubuntu](/assets/docs/intro/installation/wsl-vscode-ubuntu.png)

设置好 WSL 后，您可以选择以下操作：

- 使用 Ubuntu（Linux）终端完成[快速安装](/docs/intro/installation)
- 按以下说明分别安装 [Rust](#install-rust)、[Solana CLI](#install-solana-cli) 和
  [Anchor CLI](#install-anchor-cli)

</Accordion>
<Accordion title="Linux">

<Tabs items={[".deb", ".rpm"]}>
<Tab value=".deb" >
如果您使用的是 Debian 或基于 Debian 的替代系统（如 Ubuntu 或 Mint），请按照以下步骤操作：

1. 更新软件包列表以确保所有软件包都是最新的：

```terminal
$ sudo apt-get update
```

2. 安装以下依赖项：

```terminal
$ sudo apt-get install -y \
    build-essential \
    pkg-config \
    libudev-dev llvm libclang-dev \
    protobuf-compiler libssl-dev
```

<Callout>
如果在安装 `protobuf-compiler` 时遇到以下错误，请确保先运行 _shell`sudo apt-get update`

```
Package protobuf-compiler is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source
```

</Callout>

  </Tab>

    <Tab value=".rpm" >
    如果您使用的是 RHEL 衍生系统（如 Fedora 或 Red Hat Linux），请按照以下步骤操作。

通过运行命令更新软件包列表以获取更新版本的软件包。

```terminal
$ sudo dnf upgrade --refresh
```

接下来，安装以下依赖项：

```terminal
$ sudo dnf group install c-development development-tools \
&& sudo dnf install pkg-config openssl-devel
```

  </Tab>
</Tabs>

</Accordion>
</Accordions>

<Steps>
<Step>

### 安装 Rust

开发者使用 [Rust](https://www.rust-lang.org/) 编程语言构建 Solana 程序。

1. 使用 [rustup](https://www.rust-lang.org/tools/install)
   安装 Rust，在终端中输入以下命令：

```terminal
$ curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
```

安装成功后，您将看到以下消息：

<Accordions>
<Accordion title="Rust 安装成功消息">

```
Rust is installed now. Great!

To get started you may need to restart your current shell.
This would reload your PATH environment variable to include
Cargo's bin directory ($HOME/.cargo/bin).

To configure your current shell, you need to source
the corresponding env file under $HOME/.cargo.

This is usually done by running one of the following (note the leading DOT):
. "$HOME/.cargo/env"            # For sh/bash/zsh/ash/dash/pdksh
source "$HOME/.cargo/env.fish"  # For fish
```

</Accordion>
</Accordions>

2. 重新加载您的 PATH 环境变量，以包含
   [Cargo](https://github.com/rust-lang/cargo) 的 bin 目录：

```terminal
$ . "$HOME/.cargo/env"
```

3. 验证安装是否成功。

```terminal
$ rustc --version
```

您将看到类似以下的输出：

```
rustc 1.86.0 (05f9846f8 2025-03-31)
```

</Step>
<Step>

### 安装 Solana CLI

Solana CLI 提供了构建和部署 Solana 程序所需的所有工具。

1. 使用官方安装命令安装 Solana CLI 工具套件：

```terminal
$ sh -c "$(curl -sSfL https://release.anza.xyz/stable/install)"
```

<Callout>
  您可以将 `stable` 替换为与您所需版本匹配的软件版本标签（例如 `v2.0.3`），或者使用以下三个符号通道名称之一： `stable`、 `beta`
  或 `edge`。
</Callout>

2. 添加 PATH 环境变量

首次安装 Solana CLI 时，可能会提示您添加一个 `PATH`
环境变量。为此，请关闭并重新打开终端，或在 shell 中运行以下命令：

```
export PATH="/Users/test/.local/share/solana/install/active_release/bin:$PATH"
```

3. 更新您的 PATH 环境变量

<Tabs groupId="language" items={["Windows & Linux", "Mac"]}>
<Tab value="Windows & Linux">

如果您使用的是 **Linux** 或 **WSL**，则必须将 Solana
CLI 二进制文件添加到您的 PATH 中，以便在终端中可以使用该命令。请按照以下步骤操作：

**a.** 检查您正在使用的 shell 类型：

```terminal
$ echo $SHELL
```

- 如果输出包含 `/bash`，请使用 `.bashrc`。
- 如果输出包含 `/zsh`，请使用 `.zshrc`。

**b.** 根据您的 shell，运行相应的命令。

对于 Bash (`bashrc`):

```terminal
$ echo 'export PATH="$HOME/.local/share/solana/install/active_release/bin:$PATH"' >> ~/.bashrc
$ source ~/.bashrc
```

对于 Zsh (`zshrc`):

```terminal
$ echo 'export PATH="$HOME/.local/share/solana/install/active_release/bin:$PATH"' >> ~/.zshrc
$ source ~/.zshrc
```

</Tab>
<Tab value="Mac">

如果您使用带有 `zsh` 的 Mac，运行默认的 `export PATH`
命令后，安装记录不会在关闭终端后保留。相反，请通过运行以下命令将 PATH 添加到您的 shell 配置文件中：

```terminal
$ echo 'export PATH="$HOME/.local/share/solana/install/active_release/bin:$PATH"' >> ~/.zshrc
```

<Callout>
  上述步骤不适用于 `bash` 用户，因为对 PATH 变量的更改默认会保留。
</Callout>

</Tab>
</Tabs>

4. 重启您的终端或运行以下命令以刷新终端会话：

```terminal
$ source ~/.bashrc # If using Bash
$ source ~/.zshrc # If using Zsh
```

5. 通过检查 Solana CLI 版本来验证安装是否成功：

```terminal
$ solana --version
```

您将看到如下输出：

```
solana-cli 2.2.12 (src:0315eb6a; feat:1522022101, client:Agave)
```

<Callout>

您可以在 [Agave Github 仓库](https://github.com/anza-xyz/agave/releases)
查看所有可用版本。Agave 是 [Anza](https://www.anza.xyz/)
的验证器客户端，前身为 Solana Labs 验证器客户端。

</Callout>

5. 根据需要将 Solana CLI 更新到最新版本 _(可选)_

```terminal
$ agave-install update
```

</Step>
<Step>

### 安装 Anchor CLI

[Anchor](https://www.anchor-lang.com/)
是一个用于开发 Solana 程序的框架。Anchor 框架利用 Rust 宏简化了编写 Solana 程序的过程。

#### 前置条件

使用 _shell`anchor init`_
命令创建的默认 Anchor 项目测试文件（TypeScript）需要 Node.js 和 Yarn。（Rust 测试模板可通过
_shell`anchor init --test-template rust`_ 使用。）

<Accordions>
<Accordion title="Node 安装">

1. 使用 [Node Version Manager (nvm)](https://github.com/nvm-sh/nvm)
   安装 Node，运行以下命令：

```terminal
$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/master/install.sh | bash
```

2. 重启终端并确认 `nvm` 命令成功运行：

```terminal
$ command -v nvm
```

3. 使用 `nvm` 安装 Node：

```terminal
$ nvm install node
```

4. 验证安装是否成功，检查 Node 版本：

```terminal
$ node --version
```

您将看到类似以下的输出：

```
v23.7.0
```

</Accordion>
<Accordion title="Yarn 安装">

1. 安装 Yarn：

```terminal
$ npm install --global yarn
```

2. 验证安装是否成功，检查 Yarn 版本：

```terminal
$ yarn --version
```

您将看到以下输出：

```
1.22.1
```

</Accordion>
</Accordions>

#### 安装

您可以通过两种方式安装 Anchor CLI 和工具：

- Anchor Version Manager (AVM) — 推荐的安装方法
- 不使用 AVM — 直接从 GitHub 安装

<Tabs groupId="anchor" items={["AVM", "Without AVM"]}>
<Tab value="AVM">

Anchor 版本管理器 (AVM) 允许您在系统上安装和管理不同的 Anchor 版本，并在未来轻松更新 Anchor 版本。要使用 AVM 安装 Anchor，请按照以下步骤操作：

1. 使用以下命令安装 AVM：

```terminal
$ cargo install --git https://github.com/solana-foundation/anchor avm --force
```

2. 确认 AVM 是否成功安装：

```terminal
$ avm --version
```

3. 使用 AVM 安装 Anchor CLI：

要安装最新版本：

```terminal
$ avm install latest
$ avm use latest
```

要安装特定版本，请指定版本号：

```terminal
$ avm install 0.30.1
$ avm use 0.30.1
```

<Callout type="warn">

在 Linux 或 WSL 上安装 Anchor CLI 时，您可能会遇到以下错误：

```
error: could not exec the linker cc = note: Permission denied (os error 13)
```

如果您看到此错误消息，请按照以下步骤操作：

1. 安装本页面顶部 [Linux](/docs/intro/installation#install-dependencies)
   部分列出的依赖项。
2. 重试安装 Anchor CLI。

</Callout>

4. 验证安装是否成功，检查 Anchor CLI 的版本：

```terminal
$ anchor --version
```

您将看到类似以下的输出：

```
anchor-cli 0.31.1
```

<Callout type="info">

别忘了运行 _shell`avm use`_ 命令来声明系统上运行的 Anchor CLI 版本。

- 如果您安装了 `latest` 版本，请运行 _shell`avm use latest`_。
- 如果您安装了 `0.30.1` 版本，请运行 _shell`avm use 0.30.1`_。

</Callout>

</Tab>

<Tab value="Without AVM">

1. 使用以下命令安装特定版本的 Anchor CLI：

```terminal
$ cargo install --git https://github.com/solana-foundation/anchor --tag v0.30.1 anchor-cli
```

2. 验证安装是否成功，检查 Anchor CLI 的版本：

```terminal
$ anchor --version
```

您将看到类似以下的输出：

```
anchor-cli 0.31.1
```

</Tab>
</Tabs>

</Step>
</Steps>

### 为 Solana 开发设置 AI 工具

本节详细介绍了可选的 AI 工具设置，您可以使用这些工具加速 Solana 开发。

| 工具     | 描述                                                         | 链接                        |
| -------- | ------------------------------------------------------------ | --------------------------- |
| MCP      | MCP 服务器，您可以通过光标连接以改进 Solana 的 AI 辅助开发。 | https://mcp.solana.com/     |
| LLMs.txt | 优化的 LLM 文档，您可以使用它来训练 Solana 文档上的 LLM。    | https://solana.com/llms.txt |
