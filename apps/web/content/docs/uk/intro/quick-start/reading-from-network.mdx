---
title: Читання з мережі
description:
  Дізнайтеся, як читати дані з блокчейн-мережі Solana. Цей посібник охоплює
  отримання гаманців, програмних рахунків та рахунків токенів, використовуючи
  JavaScript/TypeScript, з практичними прикладами на основі бібліотеки Solana
  web3.js.
---

Читайте дані з мережі Solana, отримуючи різні рахунки. Цей розділ допоможе вам
зрозуміти структуру [рахунків](/docs/core/accounts) Solana. Кожен рахунок Solana
має унікальну [адресу](/docs/core/accounts#account-address), яка
використовується для пошуку відповідних даних у блокчейні. Рахунки містять або
[дані стану, або виконувану програму](/docs/core/accounts#types-of-accounts).

## Отримання рахунку гаманця

<WithMentions>

Гаманець — це рахунок, яким володіє
[System Program](/docs/core/programs#the-system-program). Гаманці переважно
використовуються для зберігання SOL та підписання транзакцій. Коли SOL вперше
надсилається на нову адресу, системний рахунок створюється автоматично.

Приклад нижче генерує [нову пару ключів](mention:keypair),
[запитує SOL](mention:airdrop) для фінансування нової адреси публічного ключа та
[отримує дані рахунку](mention:info) для щойно профінансованого гаманця.

<CodeTabs flags="r">

```ts !! title="Fetch account"
import { Keypair, Connection, LAMPORTS_PER_SOL } from "@solana/web3.js";

// !mention keypair
const keypair = Keypair.generate();
console.log(`Public Key: ${keypair.publicKey}`);

const connection = new Connection("http://localhost:8899", "confirmed");

// Funding an address with SOL automatically creates an account
// !mention airdrop
const signature = await connection.requestAirdrop(
  keypair.publicKey,
  LAMPORTS_PER_SOL
);
await connection.confirmTransaction(signature, "confirmed");

// !mention info
const accountInfo = await connection.getAccountInfo(keypair.publicKey);
console.log(JSON.stringify(accountInfo, null, 2));
```

</CodeTabs>
</WithMentions>

<ScrollyCoding>

## !!steps

Коли ви отримуєте рахунок гаманця, відповідь включає поля, показані в прикладі
виводу праворуч.

<CodePlaceholder title="Приклад виводу" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

Поле `data` містить дані рахунку, збережені у вигляді байтів. Для рахунків
гаманців це поле порожнє (0 байтів).

<CodePlaceholder title="Приклад виводу" />

```json !! title="Example output"
{
  // !focus(1:4)
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

Поле `executable` вказує, чи містить поле `data` рахунку виконуваний програмний
код. Для рахунків гаманців це поле має значення `false`.

<CodePlaceholder title="Приклад виводу" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  // !focus
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

Поле `lamports` містить баланс SOL рахунку в
[лампортах](/docs/references/terminology#lamport).

<CodePlaceholder title="Приклад виводу" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  // !focus
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

Поле `owner` показує програму, якій належить акаунт. Для гаманців власником
завжди є System Program з адресою `11111111111111111111111111111111`.

<CodePlaceholder title="Приклад виводу" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  // !focus
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

Поле `rentEpoch` є застарілим полем із застарілого механізму rent. (Це поле
включено для зворотної сумісності.)

<CodePlaceholder title="Приклад виводу" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  // !focus
  "rentEpoch": 0,
  "space": 0
}
```

## !!steps

Поле `space` показує кількість байтів, що містяться в полі `data`. Це не є полем
у самому [типі Account](/docs/core/accounts#account-structure), але включено у
відповідь.

У цьому прикладі поле `space` дорівнює 0, оскільки поле `data` містить 0 байтів
даних.

<CodePlaceholder title="Приклад виводу" />

```json !! title="Example output"
{
  "data": {
    "type": "Buffer",
    "data": []
  },
  "executable": false,
  "lamports": 1000000000,
  "owner": "11111111111111111111111111111111",
  "rentEpoch": 0,
  // !focus
  "space": 0
}
```

</ScrollyCoding>

## Отримання Token Program

Приклад нижче отримує Token Program, щоб продемонструвати різницю між акаунтами
гаманців та програмними акаунтами. Програмний акаунт зберігає скомпільований
байткод
[вихідного коду](https://github.com/solana-program/token/tree/main/program)
Token Program. Ви можете переглянути цей програмний акаунт у
[Solana Explorer](https://explorer.solana.com/address/TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA).

<CodeTabs flags="r">

```ts !! title="Fetch program account"
import { Connection, PublicKey } from "@solana/web3.js";

const connection = new Connection(
  "https://api.mainnet.solana.com",
  "confirmed"
);
// !mark(1:2)
const address = new PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");
const accountInfo = await connection.getAccountInfo(address);

// !collapse(1:17) collapsed
console.log(
  JSON.stringify(
    accountInfo,
    (key, value) => {
      if (key === "data" && value && value.length > 1) {
        return [
          value[0],
          "...truncated, total bytes: " + value.length + "...",
          value[value.length - 1]
        ];
      }
      return value;
    },
    2
  )
);
```

</CodeTabs>

<ScrollyCoding>

## !!steps

Token Program є виконуваним program account. Програми мають ті самі базові поля,
що й усі [акаунти](/docs/core/accounts#account-structure), але з ключовими
відмінностями.

<CodePlaceholder title="Token program account" />

```json !! title="Token program account"
{
  "data": {
    "type": "Buffer",
    "data": [127, "...truncated, total bytes: 134080...", 0]
  },
  "executable": true,
  "lamports": 4522329612,
  "owner": "BPFLoader2111111111111111111111111111111111",
  "rentEpoch": 18446744073709552000,
  "space": 134080
}
```

## !!steps

Поле `executable` встановлено на `true`, що вказує на те, що поле `data`
облікового запису містить виконуваний код.

<CodePlaceholder title="Token program account" />

```json !! title="Token program account"
{
  "data": {
    "type": "Buffer",
    "data": [127, "...truncated, total bytes: 134080...", 0]
  },
  // !focus
  "executable": true,
  "lamports": 4522329612,
  "owner": "BPFLoader2111111111111111111111111111111111",
  "rentEpoch": 18446744073709552000,
  "space": 134080
}
```

## !!steps

Поле `data` зберігає виконуваний код програми.

<CodePlaceholder title="Token program account" />

```json !! title="Token program account"
{
  // !focus(1:4)
  "data": {
    "type": "Buffer",
    "data": [127, "...truncated, total bytes: 134080...", 0]
  },
  "executable": true,
  "lamports": 4522329612,
  "owner": "BPFLoader2111111111111111111111111111111111",
  "rentEpoch": 18446744073709552000,
  "space": 134080
}
```

## !!steps

Кожен program account належить своїй
[програмі-завантажувачу](/docs/core/programs#loader-programs). У цьому прикладі
`owner` є програмою BPFLoader2.

<CodePlaceholder title="Token program account" />

```json !! title="Token program account"
{
  "data": {
    "type": "Buffer",
    "data": [127, "...truncated, total bytes: 134080...", 0]
  },
  "executable": true,
  "lamports": 4522329612,
  // !focus
  "owner": "BPFLoader2111111111111111111111111111111111",
  "rentEpoch": 18446744073709552000,
  "space": 134080
}
```

</ScrollyCoding>

## Отримання mint account

[Mint account](https://github.com/solana-program/token/blob/program%40v8.0.0/program/src/state.rs#L16-L30)
є обліковим записом, яким володіє Token Program і який зберігає глобальні
метадані для конкретного токена. Це включає загальну пропозицію, кількість
десяткових знаків та облікові записи, які мають право випускати або заморожувати
токени. Адреса mint account унікально ідентифікує токен у мережі Solana.

Приклад нижче отримує mint account USD Coin, щоб продемонструвати, як стан
програми зберігається в окремому обліковому записі.

<CodeTabs flags="r">

```ts !! title="Fetch program account"
import { Connection, PublicKey } from "@solana/web3.js";

const connection = new Connection(
  "https://api.mainnet.solana.com",
  "confirmed"
);

// !mark(1:2)
const address = new PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v");
const accountInfo = await connection.getAccountInfo(address);

// !collapse(1:17) collapsed
console.log(
  JSON.stringify(
    accountInfo,
    (key, value) => {
      if (key === "data" && value && value.length > 1) {
        return [
          value[0],
          "...truncated, total bytes: " + value.length + "...",
          value[value.length - 1]
        ];
      }
      return value;
    },
    2
  )
);
```

</CodeTabs>

<ScrollyCoding>

## !!steps

Mint accounts зберігають стан, а не виконуваний код. Вони належать Token
Program, який включає інструкції, що визначають, як створювати та оновлювати
mint accounts.

<CodePlaceholder title="Mint account" />

```json !! title="Mint account"
{
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  "executable": false,
  "lamports": 407438077149,
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

## !!steps

Поле `data` облікового запису mint зберігає стан, а не виконуваний код, тому
поле `executable` має значення `false`.

Token Program визначає тип даних `Mint`, який зберігається в полі `data`.

<CodePlaceholder title="Mint account" />

```json !! title="Mint account"
{
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  // !focus
  "executable": false,
  "lamports": 407438077149,
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

## !!steps

Поле `data` містить серіалізований стан облікового запису `Mint`, такий як орган
випуску (mint authority), загальна пропозиція, кількість десяткових знаків.

Щоб прочитати дані з облікового запису Mint, ви повинні десеріалізувати поле
`data` у тип даних `Mint`, що показано в
[наступному прикладі](#deserialize-mint-account).

<CodePlaceholder title="Mint account" />

```json !! title="Mint account"
{
  // !focus(1:4)
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  "executable": false,
  "lamports": 407438077149,
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

## !!steps

Обліковий запис mint належить
[Token Program](/docs/references/terminology#token-program). Це означає, що його
поле `data` може бути змінене лише інструкціями Token Program.

<CodePlaceholder title="Mint Account" />

```json !! title="Mint Account"
{
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  "executable": false,
  "lamports": 407438077149,
  // !focus
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

</ScrollyCoding>

## Десеріалізація облікового запису mint

Перш ніж необроблені байти в полі `data` облікового запису можуть бути змістовно
інтерпретовані, вони повинні бути десеріалізовані. Відповідний тип даних
визначається програмою, якій належить обліковий запис. Більшість програм Solana
надають клієнтські бібліотеки з допоміжними функціями, які абстрагують процес
десеріалізації. Ці функції перетворюють необроблені байти облікового запису в
структуровані типи даних, полегшуючи роботу з даними облікового запису.

<WithMentions>

Наприклад, бібліотека _shell`@solana/spl-token`_ включає функцію
[_ts`getMint()`_](mention:one), яка допомагає десеріалізувати поле `data`
облікового запису mint у тип даних
[Mint](https://github.com/solana-program/token/blob/program%40v8.0.0/program/src/state.rs#L16-L30),
визначений Token Program.

<CodeTabs flags="r">

```ts !! title="Deserialize mint account data"
import { PublicKey, Connection } from "@solana/web3.js";
import { getMint } from "@solana/spl-token";

const connection = new Connection(
  "https://api.mainnet.solana.com",
  "confirmed"
);

const address = new PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v");
// !mention one
const mintData = await getMint(connection, address, "confirmed");

// !collapse(1:17) collapsed
console.log(
  JSON.stringify(
    mintData,
    (key, value) => {
      // Convert BigInt to String
      if (typeof value === "bigint") {
        return value.toString();
      }
      // Handle Buffer objects
      if (Buffer.isBuffer(value)) {
        return `<Buffer ${value.toString("hex")}>`;
      }
      return value;
    },
    2
  )
);
```

</CodeTabs>

</WithMentions>

```rs title="Mint account type"
pub struct Mint {
    /// Optional authority used to mint new tokens. The mint authority may only
    /// be provided during mint creation. If no mint authority is present
    /// then the mint has a fixed supply and no further tokens may be
    /// minted.
    pub mint_authority: COption<Pubkey>,
    /// Total supply of tokens.
    pub supply: u64,
    /// Number of base 10 digits to the right of the decimal place.
    pub decimals: u8,
    /// Is `true` if this structure has been initialized
    pub is_initialized: bool,
    /// Optional authority to freeze token accounts.
    pub freeze_authority: COption<Pubkey>,
}
```

<ScrollyCoding>

## !!steps

Функція _ts`getMint()`_ десеріалізує поле `data` облікового запису mint у тип
облікового запису Mint.

```json title="Mint account"
{
  // !focus(1:4)
  "data": {
    "type": "Buffer",
    "data": [1, "...truncated, total bytes: 82...", 103]
  },
  "executable": false,
  "lamports": 407438077149,
  "owner": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",
  "rentEpoch": 18446744073709552000,
  "space": 82
}
```

Ви можете переглянути повністю десеріалізовані дані
[облікового запису mint](https://explorer.solana.com/address/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v?cluster=mainnet-beta)
у Solana Explorer.

<CodePlaceholder title="Десеріалізовані дані mint" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Поле `address` містить адресу облікового запису mint.

<CodePlaceholder title="Десеріалізовані дані mint" />

```json !! title="Deserialized mint data"
{
  // !focus
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Поле `mintAuthority` показує єдиний обліковий запис, який може створювати нові
одиниці токена.

<CodePlaceholder title="Десеріалізовані дані mint" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  // !focus
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Поле `supply` показує загальну кількість токенів, які були створені. Це значення
вимірюється в найменших одиницях токена. Щоб отримати загальну пропозицію в
стандартних одиницях, скоригуйте значення поля `supply` за допомогою `decimals`.

<CodePlaceholder title="Десеріалізовані дані mint" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  // !focus
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Поле `decimals` показує кількість десяткових знаків для токена.

<CodePlaceholder title="Десеріалізовані дані mint" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  // !focus
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Поле `isInitialized` вказує, чи був ініціалізований обліковий запис mint. Це
поле є перевіркою безпеки, що використовується в Token Program.

<CodePlaceholder title="Десеріалізовані дані mint" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  // !focus
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Поле `freezeAuthority` показує обліковий запис з правами заморожувати token
account. Заморожений token account не може переказувати або спалювати токени,
які він містить.

<CodePlaceholder title="Десеріалізовані дані mint" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  // !focus
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

## !!steps

Поле `tlvData` містить додаткові дані для Token Extensions і потребує подальшої
десеріалізації. Це поле актуальне лише для облікових записів, створених
[Програмою Token Extensions](/docs/tokens/extensions) (Token2022).

<CodePlaceholder title="Десеріалізовані дані mint" />

```json !! title="Deserialized mint data"
{
  "address": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
  "mintAuthority": "BJE5MMbqXjVwjAF7oxwPYXnTXDyspzZyt4vwenNw5ruG",
  "supply": "8985397351591790",
  "decimals": 6,
  "isInitialized": true,
  "freezeAuthority": "7dGbd2QZcCKcTndnHcTL8q7SMVXAkp688NTQYwrRCrar",
  // !focus(1:4)
  "tlvData": {
    "type": "Buffer",
    "data": []
  }
}
```

</ScrollyCoding>
