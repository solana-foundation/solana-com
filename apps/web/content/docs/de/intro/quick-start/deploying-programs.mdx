---
title: Ein Programm bereitstellen
description:
  Lernen Sie, wie Sie Ihr erstes Solana-Programm mit dem Anchor-Framework und
  Solana Playground erstellen, bereitstellen und testen. Diese
  anfängerfreundliche Anleitung führt durch die Erstellung eines einfachen
  Programms, die Bereitstellung im Devnet, die Durchführung von Tests und das
  Schließen des Programms.
h1: Stellen Sie Ihr erstes Solana-Programm bereit
---

Erstellen, stellen Sie bereit und testen Sie Ihr erstes
[Programm](/docs/core/programs) auf der Solana Blockchain mit dem
Anchor-Framework. Diese Anleitung hilft Ihnen, sich mit dem Solana Playground
vertraut zu machen und bereitet Sie auf die Verwendung von Program Derived
Address (PDA) und Cross Program Invocation (CPI) vor.

<Steps>

<Step>

### Anchor-Projekt erstellen

1. Öffnen Sie den [Solana Playground](https://beta.solpg.io) in Ihrem Webbrowser
2. Klicken Sie im linken Bereich auf **+ Create a new project**
3. Geben Sie einen **Projektnamen** ein
4. Wählen Sie **Anchor (Rust)** als Framework
5. Klicken Sie auf **Create**

![Neues Projekt](/assets/docs/intro/quickstart/pg-new-project.gif)

Die `src/lib.rs` Quelldatei wird geöffnet. Sie enthält eine Struktur namens
`Initialize`, die Folgendes tut:

- Empfängt einen erforderlichen Parameter namens _rs`data: u64`_
- Erstellt ein neues Konto
- Speichert den Wert von _rs`data: u64`_ im neuen Konto
- Fügt eine Nachricht zu den Programmlogs der Transaktion hinzu

<WithNotes>

```rust title="lib.rs"
use anchor_lang::prelude::*;

// This is your program's public key and it will update
// automatically when you build the project.
// !tooltip[/declare_id/] declare_id
declare_id!("11111111111111111111111111111111");

// !tooltip[/program/] program
#[program]
mod hello_anchor {
    use super::*;
    // !tooltip[/data: u64/] parameter
    pub fn initialize(ctx: Context<Initialize>, data: u64) -> Result<()> {
        // !tooltip[/ctx.accounts.new_account.data = data/] initialize
        ctx.accounts.new_account.data = data;
        // !tooltip[/msg!/] msg
        msg!("Changed data to: {}!", data); // Message will show up in the tx logs
        Ok(())
    }
}

// !tooltip[/Accounts/] accounts
#[derive(Accounts)]
pub struct Initialize<'info> {
    // We must specify the space in order to initialize an account.
    // First 8 bytes are default account discriminator,
    // next 8 bytes come from NewAccount.data being type u64.
    // (u64 = 64 bits unsigned integer = 8 bytes)
    // !tooltip[/account/] constraints
    #[account(
      // !tooltip[/init/] init
      init,
      // !tooltip[/payer/] payer
      payer = signer,
      // !tooltip[/space/] space
      space = 8 + 8
    )]
    pub new_account: Account<'info, NewAccount>,
    // !tooltip[/account/] constraints
    #[account(mut)]
    pub signer: Signer<'info>,
    pub system_program: Program<'info, System>,
}

// !tooltip[/account/] account
#[account]
pub struct NewAccount {
    data: u64
}
```

### !declare_id

Die On-Chain-Adresse Ihres Programms. Sie wird aktualisiert, wenn Sie das
Projekt erstellen

### !program

Das Modul, das die Anweisungen des Programms enthält

### !accounts

Annotiert eine Struktur, die die Konten des Programms enthält

### !account

Eine Struktur, die die Kontendatentypen repräsentiert, die dieses Programm
erstellen und besitzen kann

### !constraints

Konten-Einschränkungen. Zum Beispiel allgemeine Prüfungen oder Funktionen, die
die Programmsicherheit verbessern

### !parameter

Der Wert, der an die Anweisung übergeben wird, wenn sie aufgerufen wird

### !initialize

Greift auf das Feld `data` des `new_account`Kontos zu und setzt es auf den Wert
von `data: u64`

### !msg

Das Makro _rs`msg!`_ protokolliert eine Nachricht in den Programmlogs der
Transaktion

### !init

Ruft das System Program auf, um ein neues Konto zu erstellen und macht dieses
Programm zum Eigentümer. Als Programmeigentümer kann dieses Programm dann in die
Kontodaten schreiben

### !payer

Das Konto, das für das neue Konto bezahlt

### !space

Die Anzahl der Bytes, die für das Konto reserviert werden sollen

</WithNotes>

<Accordions>

<Accordion title="Erklärung">

<WithMentions>

- Das Makro [`declare_id!`](mention:one) gibt die On-Chain-Adresse deines
  Programms an. Solana Playground aktualisiert diese Adresse automatisch, wenn
  du das Programm baust.

```rs
// !mention one
declare_id!("11111111111111111111111111111111");
```

</WithMentions>

<WithMentions>

- Das Attribut [`#[program]`](mention:one) kennzeichnet ein Modul, das
  Funktionen enthält, die die Anweisungen des Programms darstellen.

```rs
// !mention one
#[program]
mod hello_anchor {
    use super::*;
    // !mention two
    pub fn initialize(ctx: Context<Initialize>, data: u64) -> Result<()> {
        // !mention three
        ctx.accounts.new_account.data = data;
        msg!("Changed data to: {}!", data); // Message will show up in the tx logs
        Ok(())
    }
}
```

In diesem Beispiel nimmt die Anweisung [`initialize`](mention:two) zwei
Parameter an:

- `ctx: Context<Initialize>`: Übergibt die für diese Anweisung erforderlichen
  Konten an die Funktion, wie in der Struktur `Initialize` angegeben.
- `data: u64`: Ein benutzerdefinierter Parameter, den du beim Aufruf der
  Anweisung angeben musst.

Der Funktionskörper [setzt das Feld `data` von `new_account`](mention:three) auf
den bereitgestellten Parameter `data` und gibt dann eine Nachricht in den
Programmlogs aus.

</WithMentions>

<WithMentions>

- Das [`#[derive(Accounts)]`](mention:one) Attribut definiert eine Struktur, die
  die für eine bestimmte Anweisung erforderlichen Konten angibt. Jedes Feld
  repräsentiert ein separates Konto.

  Anchor übernimmt automatisch gängige Sicherheitsprüfungen im Zusammenhang mit
  der Konten- validierung durch Feldtypen (z.B. `Signer<'info>`) und
  Einschränkungen (z.B. `#[account(mut)]`).

  ```rs
  // !mention one
  #[derive(Accounts)]
  pub struct Initialize<'info> {
      #[account(init, payer = signer, space = 8 + 8)]
      pub new_account: Account<'info, NewAccount>,
      #[account(mut)]
      pub signer: Signer<'info>,
      pub system_program: Program<'info, System>,
  }
  ```

</WithMentions>

<WithMentions>

- Das [`#[account]`](mention:one) Attribut definiert eine Struktur, die den
  Datentyp für Konten darstellt, die dieses Programm erstellt und besitzt.

```rs
// !mention one
#[account]
pub struct NewAccount {
  data: u64
}
```

</WithMentions>

</Accordion>
</Accordions>

</Step>

<Step>

### Programm erstellen und bereitstellen

1. Kompiliere den Programmcode

```terminal
$ build
Building...
Build successful. Completed in 1.46s.
```

<Callout>
  Deine [Programm-ID](/docs/intro/quick-start/deploying-programs), definiert in
  _rs`declare_id!()`_, wird jetzt aktualisiert.
</Callout>

2. SOL zu deinem Wallet hinzufügen _(Optional)_

Die Bereitstellung eines Programms erfordert SOL im On-Chain-Konto des
Programms. Falls nötig,
[füge SOL zu deinem Wallet hinzu](/docs/intro/quick-start#add-sol-to-your-wallet),
bevor du mit Schritt 3 fortfährst.

3. Stelle das Programm im Netzwerk bereit

```terminal
$ deploy
Deploying... This could take a while depending on the program size and network conditions.
Warning: 1 transaction not confirmed, retrying...
Deployment successful. Completed in 19s.
```

<Callout type="info">
  Bei der Bereitstellung wird der Bytecode des Programms in einem ausführbaren
  program account gespeichert.
</Callout>

**Hinweis:** Falls bevorzugt, kannst du auch die Schaltflächen **Build** und
**Deploy** im linken Seitenbereich verwenden, wie im Screenshot unten gezeigt.

![Build und Deploy](/assets/docs/intro/quickstart/pg-build-deploy.png)

</Step>

<Step>

### Programm testen

<WithMentions>

1. Öffne die Testdatei mit dem Namen `tests/anchor.test.ts`. Diese Datei zeigt,
   wie man die [`initialize`](mention:one) Struktur des Programms vom Client aus
   aufruft.

```ts title="anchor.test.ts"
// No imports needed: web3, anchor, pg and more are globally available

describe("Test", () => {
  it("initialize", async () => {
    // Generate keypair for the new account
    const newAccountKp = new web3.Keypair();

    // Send transaction
    const data = new BN(42);
    const txHash = await pg.program.methods
      // !mention one
      .initialize(data)
      .accounts({
        newAccount: newAccountKp.publicKey,
        signer: pg.wallet.publicKey,
        systemProgram: web3.SystemProgram.programId
      })
      .signers([newAccountKp])
      .rpc();
    console.log(`Use 'solana confirm -v ${txHash}' to see the logs`);

    // Confirm transaction
    await pg.connection.confirmTransaction(txHash);

    // Fetch the created account
    const newAccount = await pg.program.account.newAccount.fetch(
      newAccountKp.publicKey
    );

    console.log("On-chain data is:", newAccount.data.toString());

    // Check whether the data on-chain is equal to local 'data'
    assert(data.eq(newAccount.data));
  });
});
```

</WithMentions>

2. Führe die Testdatei aus

```terminal
$ test
Running tests...
  hello_anchor.test.ts:
  hello_anchor
    Use 'solana confirm -v 3TewJtiUz1EgtT88pLJHvKFzqrzDNuHVi8CfD2mWmHEBAaMfC5NAaHdmr19qQYfTiBace6XUmADvR4Qrhe8gH5uc' to see the logs
    On-chain data is: 42
    ✔ initialize (961ms)
  1 passing (963ms)
```

3. Speichere den Transaktions-Hash (`TxHash`), der in der Ausgabe enthalten ist

(Im obigen Beispiel ist der Transaktions-Hash
`3TewJtiUz1EgtT88pLJHvKFzqrzDNuHVi8CfD2mWmHEBAaMfC5NAaHdmr19qQYfTiBace6XUmADvR4Qrhe8gH5uc`.)

**Hinweis:** Bei Bedarf kannst du auch die Schaltfläche `Test` im linken
Seitenbereich verwenden.

![Test ausführen](/assets/docs/intro/quickstart/pg-test.png)

4. Führe `solana confirm -v [TxHash]` aus, um die Transaktionslogs anzuzeigen

```terminal
$ solana confirm -v 3TewJtiUz1EgtT88pLJHvKFzqrzDNuHVi8CfD2mWmHEBAaMfC5NAaHdmr19qQYfTiBace6XUmADvR4Qrhe8gH5uc
RPC URL: https://api.devnet.solana.com
Default Signer: Playground Wallet
Commitment: confirmed

Transaction executed in slot 308150984:
  Block Time: 2024-06-25T12:52:05-05:00
  Version: legacy
  Recent Blockhash: 7AnZvY37nMhCybTyVXJ1umcfHSZGbngnm4GZx6jNRTNH
  Signature 0: 3TewJtiUz1EgtT88pLJHvKFzqrzDNuHVi8CfD2mWmHEBAaMfC5NAaHdmr19qQYfTiBace6XUmADvR4Qrhe8gH5uc
  Signature 1: 3TrRbqeMYFCkjsxdPExxBkLAi9SB2pNUyg87ryBaTHzzYtGjbsAz9udfT9AkrjSo1ZjByJgJHBAdRVVTZv6B87PQ
  Account 0: srw- 3z9vL1zjN6qyAFHhHQdWYRTFAcy69pJydkZmSFBKHg1R (fee payer)
  Account 1: srw- c7yy8zdP8oeZ2ewbSb8WWY2yWjDpg3B43jk3478Nv7J
  Account 2: -r-- 11111111111111111111111111111111
  Account 3: -r-x 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r
  Instruction 0
    Program:   2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r (3)
    Account 0: c7yy8zdP8oeZ2ewbSb8WWY2yWjDpg3B43jk3478Nv7J (1)
    Account 1: 3z9vL1zjN6qyAFHhHQdWYRTFAcy69pJydkZmSFBKHg1R (0)
    Account 2: 11111111111111111111111111111111 (2)
    Data: [175, 175, 109, 31, 13, 152, 155, 237, 42, 0, 0, 0, 0, 0, 0, 0]
  Status: Ok
    Fee: ◎0.00001
    Account 0 balance: ◎5.47001376 -> ◎5.46900152
    Account 1 balance: ◎0 -> ◎0.00100224
    Account 2 balance: ◎0.000000001
    Account 3 balance: ◎0.00139896
  Log Messages:
    Program 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r invoke [1]
    Program log: Instruction: Initialize
    Program 11111111111111111111111111111111 invoke [2]
    Program 11111111111111111111111111111111 success
    Program log: Changed data to: 42!
    Program 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r consumed 5661 of 200000 compute units
    Program 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r success

Confirmed
```

4. Transaktionsdetails anzeigen

Öffne entweder [SolanaFM](https://solana.fm/) oder
[Solana Explorer](https://explorer.solana.com/?cluster=devnet) und suche nach
dem Transaktions-Hash.

<Callout type="warn">
  **Solana Explorer:** Stelle den Netzwerk-Cluster auf `devnet` ein, damit er
  mit dem des Solana Playground übereinstimmt.
</Callout>

</Step>

<Step>

### Programm schließen

Schließe das Programm, um die SOL zurückzugewinnen, die dem On-Chain-Programm
zugewiesen wurden. Führe dazu `solana program close [ProgramID]` aus und
verwende die Programmadresse, die im _rs`declare_id!()`_ Makro gespeichert ist.

```terminal
$ solana program close 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r
Closed Program Id 2VvQ11q8xrn5tkPNyeraRsPaATdiPx8weLAD8aD4dn2r, 2.79511512 SOL reclaimed
```

<Callout type="warn">
  Programme können **nur** von einem Konto mit Upgrade-Authority geschlossen
  oder aktualisiert werden. Deine Playground-Wallet wird automatisch zur
  Upgrade-Authority für jedes Programm, wenn es bereitgestellt wird. Wenn die
  Upgrade-Authority widerrufen wird, wird das Programm unveränderlich.
</Callout>

Herzlichen Glückwunsch! Du hast dein erstes Solana-Programm mit Anchor erstellt
und bereitgestellt.

</Step>

</Steps>

## Nächste Schritte

Nachdem du dein erstes Programm bereitgestellt hast, bist du bereit,
[programmabgeleitete Adressen](/docs/intro/quick-start/program-derived-address)
und
[programmübergreifende Aufrufe](/docs/intro/quick-start/cross-program-invocation)
zu erkunden.
