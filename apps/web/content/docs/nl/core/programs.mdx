---
title: Programma's
description:
  Leer over Solana programma's (smart contracts) en hoe je ze kunt ontwikkelen
  met Rust of het Anchor framework. Begrijp programma-implementatie, upgrades en
  verificatie op het Solana-netwerk.
h1: Programma's
---

Op Solana wordt een smart contract een programma genoemd. Een programma is een
stateless [account](/docs/core/accounts#program-account) dat uitvoerbare code
bevat. Deze code is georganiseerd in functies die instructies worden genoemd.
Gebruikers interacteren met een programma door een
[transactie](/docs/core/transaction) te versturen die een of meerdere
[instructies](/docs/core/instructions) bevat. Een transactie kan instructies van
meerdere programma's bevatten.

Wanneer een programma wordt geïmplementeerd, gebruikt Solana
[LLVM](https://llvm.org/) om het te compileren naar executable and linkable
format ([ELF](https://en.wikipedia.org/wiki/Executable_and_Linkable_Format)).
Het ELF-bestand bevat de binaire code van het programma in Solana Bytecode
Format (sBPF) en wordt on-chain opgeslagen in een uitvoerbaar account.

<Callout>
  sBPF is Solana's aangepaste versie van
  [eBPF](https://en.wikipedia.org/wiki/EBPF) bytecode.
</Callout>

## Programma's schrijven

De meerderheid van de programma's wordt geschreven in
[Rust](https://rust-book.cs.brown.edu/title-page.html), met twee veelvoorkomende
ontwikkelingsbenaderingen:

- [Anchor](https://www.anchor-lang.com/docs): Anchor is een framework ontworpen
  voor snelle en eenvoudige Solana-ontwikkeling. Het gebruikt
  [Rust macros](https://doc.rust-lang.org/book/ch20-05-macros.html) om
  boilerplate code te verminderen —wat het ideaal maakt voor beginners.
- [Native Rust](/docs/programs/rust): Schrijf programma's in Rust zonder gebruik
  te maken van frameworks. Deze aanpak biedt meer flexibiliteit maar gaat
  gepaard met verhoogde complexiteit.

## Programma's bijwerken

Om een bestaand programma te
[wijzigen](https://github.com/anza-xyz/agave/blob/v2.1.13/programs/bpf_loader/src/lib.rs#L704),
moet een account worden aangewezen als de
[upgrade authority](https://github.com/anza-xyz/agave/blob/v2.1.13/programs/bpf_loader/src/lib.rs#L894).
(Meestal hetzelfde account dat oorspronkelijk het programma
[heeft geïmplementeerd](/docs/programs/deploying).) Als de upgrade authority
wordt ingetrokken en ingesteld op null, kan het programma niet meer worden
bijgewerkt.

## Programma's verifiëren

Solana ondersteunt [verifieerbare builds](/docs/programs/verified-builds),
waarmee gebruikers kunnen controleren of de on-chain code van een programma
overeenkomt met de openbare broncode. Het Anchor framework biedt
[ingebouwde ondersteuning](https://www.anchor-lang.com/docs/verifiable-builds)
voor het maken van een verifieerbare build.

Om te controleren of een bestaand programma geverifieerd is, zoek je naar de
programma-ID op de
[Solana Explorer](https://explorer.solana.com/address/PhoeNiXZ8ByJGLkxNfZRnkUfjvmuYqLR89jjFHGqdXY).
Alternatief kun je de Ellipsis Labs
[Solana Verifiable Build CLI](https://github.com/Ellipsis-Labs/solana-verifiable-build)
gebruiken om on-chain programma's onafhankelijk te verifiëren.

## Ingebouwde programma's

### Loader programma's

Elk programma is eigendom van een ander—zijn loader. Loaders worden gebruikt om
programma's te implementeren, opnieuw te implementeren, te upgraden of te
sluiten. Ze worden ook gebruikt om een programma te finaliseren en
programma-autoriteit over te dragen.

Er zijn momenteel vijf loader programma's, zoals weergegeven in de onderstaande
tabel.

| Loader | Programma-ID                                  | Opmerkingen                                                                                                                       | Instructies link                                                                                                                               |
| ------ | --------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| native | `NativeLoader1111111111111111111111111111111` | Bezit de andere vier loaders                                                                                                      | —                                                                                                                                              |
| v1     | `BPFLoader1111111111111111111111111111111111` | Beheerinstructies zijn uitgeschakeld, maar programma's worden nog steeds uitgevoerd                                               | —                                                                                                                                              |
| v2     | `BPFLoader2111111111111111111111111111111111` | Beheerinstructies zijn uitgeschakeld, maar programma's worden nog steeds uitgevoerd                                               | [Instructies](https://docs.rs/solana-loader-v2-interface/latest/solana_loader_v2_interface/enum.LoaderInstruction.html)                        |
| v3     | `BPFLoaderUpgradeab1e11111111111111111111111` | Programma's kunnen worden bijgewerkt na implementatie. Programma-uitvoerbaar wordt opgeslagen in een apart programma-data-account | [Instructies](https://docs.rs/solana-loader-v3-interface/latest/solana_loader_v3_interface/instruction/enum.UpgradeableLoaderInstruction.html) |
| v4     | `LoaderV411111111111111111111111111111111111` | In ontwikkeling (niet uitgebracht)                                                                                                | [Instructies](https://docs.rs/solana-loader-v4-interface/latest/solana_loader_v4_interface/instruction/enum.LoaderV4Instruction.html)          |

Programma's die zijn geïmplementeerd met loader-v3 of loader-v4 kunnen na
implementatie worden gewijzigd, zoals bepaald door de upgrade-autoriteit.

### Voorgecompileerde programma's

Naast de loader programma's biedt Solana de volgende voorgecompileerde
programma's.

#### Verifieer ed25519 handtekening

Het ed25519 programma wordt gebruikt om een of meer ed25519 handtekeningen te
verifiëren.

| Programma         | Programma-ID                                  | Beschrijving                                                                                   | Instructies                                                                                    |
| ----------------- | --------------------------------------------- | ---------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------- |
| Ed25519 Programma | `Ed25519SigVerify111111111111111111111111111` | Verifieert ed25519 handtekeningen. Als een handtekening mislukt, wordt een fout geretourneerd. | [Instructies](https://docs.rs/solana-ed25519-program/latest/solana_ed25519_program/index.html) |

Het ed25519 programma verwerkt een instructie. De eerste `u8` van de instructie
bevat een telling van het aantal handtekeningen dat moet worden gecontroleerd,
gevolgd door een enkele byte padding. Daarna wordt de volgende struct
geserialiseerd, één voor elke handtekening die moet worden gecontroleerd.

```rust
pub struct Ed25519SignatureOffsets {
    signature_offset: u16,             // offset to ed25519 signature of 64 bytes
    signature_instruction_index: u16,  // instruction index to find signature
    public_key_offset: u16,            // offset to public key of 32 bytes
    public_key_instruction_index: u16, // instruction index to find public key
    message_data_offset: u16,          // offset to start of message data
    message_data_size: u16,            // size of message data
    message_instruction_index: u16,    // index of instruction for message data
}
```

De pseudocode van de verificatie:

#### Secp256k1 herstelverificatie

Het secp256k1-programma wordt gebruikt om secp256k1 public key
recovery-operaties te verifiëren.

| Program           | Program ID                                    | Beschrijving                                                    | Instructies                                                                                        |
| ----------------- | --------------------------------------------- | --------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| Secp256k1 Program | `KeccakSecp256k11111111111111111111111111111` | Verifieert secp256k1 public key recovery-operaties (ecrecover). | [Instructies](https://docs.rs/solana-secp256k1-program/latest/solana_secp256k1_program/index.html) |

Het secp256k1-programma verwerkt een instructie. De eerste byte van de
instructie bevat een telling van het aantal publieke sleutels dat moet worden
gecontroleerd. Daarna wordt de volgende struct eenmaal voor elke publieke
sleutel gemaakt, vervolgens geserialiseerd en toegevoegd aan de instruction
data.

```rust
pub struct Secp256k1SignatureOffsets {
    signature_offset: u16,             // offset naar secp256k1 recovery id en handtekening van 64 bytes
    signature_instruction_index: u16,  // instructie-index om handtekening te vinden
    eth_address_offset: u16,           // offset naar ethereum adres van 20 bytes
    eth_address_instruction_index: u16, // instructie-index om ethereum adres te vinden
    message_data_offset: u16,          // offset naar begin van berichtgegevens
    message_data_size: u16,            // grootte van berichtgegevens
    message_instruction_index: u16,    // index van instructie voor berichtgegevens
}
```

De pseudocode van de herstelverificatie:

Dit stelt de gebruiker in staat om willekeurige instruction data in de
transactie te specificeren voor handtekening- en berichtgegevens. Door een
speciale instructions sysvar te specificeren, kan men ook gegevens ontvangen van
de transactie zelf.

De kosten van de transactie worden berekend door het aantal te verifiëren
handtekeningen te vermenigvuldigen met de
handtekeningkostenverificatievermenigvuldiger.

Het secp256r1-programma wordt gebruikt om maximaal 8 secp256r1-handtekeningen te
verifiëren.

| Program           | Program ID                                    | Beschrijving                                                                                                                            | Instructies                                                                                      |
| ----------------- | --------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------ |
| Secp256r1 Program | `Secp256r1SigVerify1111111111111111111111111` | Verifieert maximaal 8 secp256r1-handtekeningen. Neemt een handtekening, publieke sleutel en bericht. Geeft een fout als er een mislukt. | [Instructies](https://docs.rs/solana-secp256r1-program/latest/solana_secp256r1_program/all.html) |

Het secp256r1-programma verwerkt een instructie. De eerste `u8` van de
instructie bevat een telling van het aantal handtekeningen dat moet worden
gecontroleerd, gevolgd door een enkele byte padding. Daarna wordt de volgende
struct voor elke handtekening gemaakt, vervolgens geserialiseerd en toegevoegd
aan de instruction data.

```rust
fn verify_signature(
    signature: &Signature,
    pubkey: &Pubkey,
    message: &[u8],
) -> Result<(), SignatureError> {
    // Controleer of de handtekening een lage S-waarde heeft
    if !signature.is_canonical() {
        return Err(SignatureError::InvalidS);
    }

    // Controleer of de handtekening geldig is
    if !pubkey.verify(message, signature) {
        return Err(SignatureError::Invalid);
    }

    Ok(())
}
```

<Callout>
  Lage S-waarden worden afgedwongen voor alle handtekeningen om onbedoelde
  handtekeningveranderlijkheid te voorkomen.
</Callout>

```rust
fn verify_signatures(
    signatures: &[Signature],
    pubkeys: &[Pubkey],
    messages: &[&[u8]],
) -> Result<(), SignatureError> {
    // Controleer of het aantal handtekeningen, publieke sleutels en berichten gelijk is
    if signatures.len() != pubkeys.len() || signatures.len() != messages.len() {
        return Err(SignatureError::MismatchedCount);
    }

    // Verifieer elke handtekening
    for i in 0..signatures.len() {
        verify_signature(&signatures[i], &pubkeys[i], messages[i])?;
    }

    Ok(())
}
```

### Kernprogramma's

De programma's in de onderstaande lijst bieden de kernfunctionaliteit van het
netwerk.

| Programma                | Programma-ID                                  | Beschrijving                                                                                                                                                                                                                                                                                                                                                           | Instructies                                                                                                                                           |
| ------------------------ | --------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| **System**               | `11111111111111111111111111111111`            | Nieuwe accounts aanmaken, accountgegevens toewijzen, accounts toewijzen aan eigenaarsprogramma's, lamports overmaken van System Program-owned accounts en transactiekosten betalen                                                                                                                                                                                     | [SystemInstruction](https://docs.rs/solana-program/latest/solana_program/system_instruction/enum.SystemInstruction.html)                              |
| **Vote**                 | `Vote111111111111111111111111111111111111111` | Accounts aanmaken en beheren die de stemstatus en beloningen van validators bijhouden                                                                                                                                                                                                                                                                                  | [VoteInstruction](https://docs.rs/solana-vote-program/latest/solana_vote_program/vote_instruction/enum.VoteInstruction.html)                          |
| **Stake**                | `Stake11111111111111111111111111111111111111` | Accounts aanmaken en beheren die stake en beloningen vertegenwoordigen voor delegaties aan validators                                                                                                                                                                                                                                                                  | [StakeInstruction](https://docs.rs/solana-sdk/latest/solana_sdk/stake/instruction/enum.StakeInstruction.html)                                         |
| **Config**               | `Config1111111111111111111111111111111111111` | Configuratiegegevens toevoegen aan de chain, gevolgd door de lijst met publieke sleutels die deze mogen wijzigen. Anders dan de andere programma's definieert het Config-programma geen individuele instructies. Het heeft slechts één impliciete instructie: "store". De instructiedata is een set sleutels die toegang tot het account en de opgeslagen data regelen | [ConfigInstruction](https://docs.rs/solana-config-program/latest/solana_config_program/config_instruction/index.html)                                 |
| **Compute Budget**       | `ComputeBudget111111111111111111111111111111` | Compute unit-limieten en prijzen voor transacties instellen, waardoor gebruikers rekenbronnen en prioriteringskosten kunnen beheren                                                                                                                                                                                                                                    | [ComputeBudgetInstruction](https://docs.rs/solana-compute-budget-interface/latest/solana_compute_budget_interface/enum.ComputeBudgetInstruction.html) |
| **Address Lookup Table** | `AddressLookupTab1e1111111111111111111111111` | Adresopzoektabellen beheren, waarmee transacties naar meer accounts kunnen verwijzen dan anders in de accountlijst van de transactie zouden passen                                                                                                                                                                                                                     | [ProgramInstruction](https://docs.rs/solana-sdk/latest/solana_sdk/address_lookup_table/instruction/enum.ProgramInstruction.html)                      |
| **ZK ElGamal Proof**     | `ZkTokenProof1111111111111111111111111111111` | Biedt zero-knowledge bewijsverificatie voor ElGamal-versleutelde gegevens                                                                                                                                                                                                                                                                                              | —                                                                                                                                                     |
