---
title: Scaled UI Amount uitgever handleiding
description:
  Leer hoe je de Scaled UI Amount extensie kunt gebruiken om het UI-bedrag van
  een token te schalen.
---

## Hoe gebruik je de Scaled UI Amount extensie

Om de Scaled UI Amount extensie te gebruiken, moet je deze inschakelen op een
token mint of token account. Let op dat zodra een token is aangemaakt, je niet
meer kunt wijzigen welke extensies zijn ingeschakeld.

### De Scaled UI Amount extensie inschakelen op een token mint

Om de Scaled UI Amount extensie in te schakelen op een token mint, moet je het
`scaled_ui_amount_extension` veld instellen op `true` in het `Mint` account.
Hier is een voorbeeld van hoe je een token aanmaakt met de Scaled UI Amount
extensie ingeschakeld met behulp van de `spl-token` CLI:

<CodeTabs>

```terminal !! title="create-token.sh"
$ spl-token --program-id TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb create-token --ui-amount-multiplier 1.5
Creating token 66EV4CaihdqyQ1fbsr51wBsoqKLgAG5KiYz7r5XNrxUM under program TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb

Address:  66EV4CaihdqyQ1fbsr51wBsoqKLgAG5KiYz7r5XNrxUM
Decimals:  9

Signature: 2sPziXu9M3duTCvsDvxQE9UKC9nBiLayi8muDvnjhA2qYvfXSZuaUieoq39MFjg4kf8xFrw6crmYSkPyV59dvudF
```

```ts !! title="create-token.ts"
import {
  Connection,
  Keypair,
  PublicKey,
  Signer,
  SystemProgram,
  Transaction,
  sendAndConfirmTransaction
} from "@solana/web3.js";
import {
  TOKEN_2022_PROGRAM_ID,
  createInitializeMintInstruction,
  createInitializeScaledUiAmountConfigInstruction,
  ExtensionType,
  getMintLen
} from "@solana/spl-token";

/**
 * Creates a new SPL-Token 2022 mint with the Scaled UI extension enabled
 * and a UI multiplier of 1.1.
 *
 * @param connection – An initialized Solana Connection.
 * @param payer      – Signer paying for fees and rent.
 * @returns The newly created mint PublicKey.
 */
export async function createScaledUiMint(
  connection: Connection,
  payer: Signer
): Promise<PublicKey> {
  // 1) Generate a new mint Keypair
  const mint = Keypair.generate();
  const MINT_EXTENSIONS = [ExtensionType.ScaledUiAmountConfig];
  const mintLen = getMintLen(MINT_EXTENSIONS);
  const mintLamports =
    await connection.getMinimumBalanceForRentExemption(mintLen);
  const mintTransaction = new Transaction().add(
    SystemProgram.createAccount({
      fromPubkey: payer.publicKey,
      newAccountPubkey: mint.publicKey,
      space: mintLen,
      lamports: mintLamports,
      programId: TOKEN_2022_PROGRAM_ID
    }),
    createInitializeScaledUiAmountConfigInstruction(
      mint.publicKey,
      payer.publicKey,
      1.1,
      TOKEN_2022_PROGRAM_ID
    ),
    createInitializeMintInstruction(
      mint.publicKey,
      0,
      payer.publicKey,
      null,
      TOKEN_2022_PROGRAM_ID
    )
  );
  await sendAndConfirmTransaction(
    connection,
    mintTransaction,
    [payer, mint],
    undefined
  );

  console.log(
    "✅ Created mint w/ scaled-UI extension:",
    mint.publicKey.toBase58()
  );
  return mint.publicKey;
}
(async () => {
  // 1) Establish a connection to the Solana devnet
  const connection = new Connection(
    "https://api.devnet.solana.com",
    "confirmed"
  );

  // 2) Generate a new fee-payer Keypair
  const payer = Keypair.generate();

  // 3) Airdrop 1 SOL to the fee-payer so it has funds for transactions
  const airdropSignature = await connection.requestAirdrop(
    payer.publicKey,
    1_000_000_000 // 1 SOL in lamports
  );

  // 4) Create the scaled-UI mint using our helper
  const mintPubkey = await createScaledUiMint(connection, payer);
})().catch((err) => {
  console.error("Error running example:", err);
});
```

</CodeTabs>

### De UI-bedrag vermenigvuldiger bijwerken

Om de UI amount multiplier bij te werken, moet je het
`update-ui-amount-multiplier` commando gebruiken. Een timestamp, in seconden
sinds de Unix epoch, is optioneel en kan worden gebruikt om een aangepaste
starttijd in te stellen voor de nieuwe multiplier. Als er geen timestamp wordt
opgegeven, wordt de huidige timestamp gebruikt.

**Belangrijke opmerking:** Er is momenteel een eigenaardigheid in het proces om
de scaled ui vermenigvuldiger bij te werken. Op dit moment gebeurt het volgende
als je:

1. Een scaled ui vermenigvuldiger instelt voor de toekomst
2. De tijd verstrijkt voorbij deze update-tijd
3. Nog een scaled ui vermenigvuldiger instelt voor de toekomst
4. Dan wordt de vorige scaled ui vermenigvuldiger overschreven door de nieuwe
   waardoor deze effectief wordt verwijderd.

Er is een
[geaccepteerde PR om dit op te lossen](https://github.com/solana-program/token-2022/pull/522)
zodat de vermenigvuldiger correct wordt bijgewerkt naar de huidige
vermenigvuldiger in plaats van te worden overschreven, maar dit is nog niet
live.

Tot die tijd is het noodzakelijk om 2 vermenigvuldiger-updates uit te voeren
tijdens stap 3 hierboven:

1. Stel de vorige vermenigvuldiger opnieuw in met dezelfde tijdstempel als
   oorspronkelijk ingesteld in stap 1 (dit stelt de vermenigvuldiger correct in
   als de huidige vermenigvuldiger)
2. Stel de nieuwe vermenigvuldiger in zoals beschreven in stap 3 hierboven

<CodeTabs>

```terminal !! title="update-ui-amount-multiplier.sh"
$ spl-token update-ui-amount-multiplier 66EV4CaihdqyQ1fbsr51wBsoqKLgAG5KiYz7r5XNrxUM 1.2 -- 1746470000 # 1.2 is the current multiplier as described in step 1 above
$ spl-token update-ui-amount-multiplier 66EV4CaihdqyQ1fbsr51wBsoqKLgAG5KiYz7r5XNrxUM 1.5 -- 1746471400
```

```ts !! title="update-ui-amount-multiplier.ts"
/**
 * Updates the scaled UI multiplier for an existing SPL-Token 2022 mint.
 *
 * @param connection – An initialized Solana Connection.
 * @param payer      – Signer paying for fees and rent.
 * @param mint       – PublicKey of the mint to update.
 * @param multiplier – New multiplier value to set.
 * @returns The transaction signature.
 */
export async function updateScaledUiMultiplier(
  connection: Connection,
  payer: Signer,
  mint: PublicKey,
  multiplier: number,
  effectiveTimestamp: bigint,
  previousMultiplier: number,
  previousEffectiveTimestamp: bigint
): Promise<string> {
  const transaction = new Transaction()
    .add(
      // Set the previous multiplier to the current multiplier
      // This is temporarily needed until PR 522 is deployed to mainnet
      createUpdateMultiplierDataInstruction(
        mint,
        payer.publicKey,
        previousMultiplier,
        previousEffectiveTimestamp,
        [],
        TOKEN_2022_PROGRAM_ID
      )
    )
    .add(
      createUpdateMultiplierDataInstruction(
        mint,
        payer.publicKey,
        multiplier,
        effectiveTimestamp,
        [],
        TOKEN_2022_PROGRAM_ID
      )
    );

  const signature = await sendAndConfirmTransaction(
    connection,
    transaction,
    [payer],
    undefined
  );

  console.log(
    `✅ Updated scaled-UI multiplier to ${multiplier} for mint:`,
    mint.toBase58()
  );
  return signature;
}
const multiplier = 1.5;
const effectiveTimestamp = BigInt(Math.floor(Date.now() / 1000));
const previousMultiplier = 1.2;
const previousEffectiveTimestamp = BigInt(1746470000);
const updateSignature = await updateScaledUiMultiplier(
  connection,
  payer,
  mintPubkey,
  multiplier,
  effectiveTimestamp,
  previousMultiplier,
  previousEffectiveTimestamp
);
console.log("Update signature:", updateSignature);
```

</CodeTabs>

### Het saldo ophalen

Om het saldo op te halen, moet je het `balance` commando gebruiken.

<CodeTabs>

```terminal !! title="balance.sh"
$ spl-token balance 66EV4CaihdqyQ1fbsr51wBsoqKLgAG5KiYz7r5XNrxUM
```

```ts !! title="balance.ts"
/**
 * Gets the scaled UI amount balance for a token holder.
 *
 * @param connection – An initialized Solana Connection.
 * @param mint       – PublicKey of the mint to check.
 * @param owner      – PublicKey of the token holder.
 * @returns The scaled UI amount balance.
 */
export async function getScaledUiAmountBalance(
  connection: Connection,
  mint: PublicKey,
  owner: PublicKey
): Promise<number> {
  // Get the token account for this mint/owner pair
  const tokenAccount = getAssociatedTokenAddressSync(
    mint,
    owner,
    false,
    TOKEN_2022_PROGRAM_ID
  );

  // Get the token account info
  const accountInfo = await connection.getAccountInfo(tokenAccount);
  if (!accountInfo) {
    throw new Error("Token account not found");
  }

  const info = await connection.getTokenAccountBalance(tokenAccount);
  if (info.value.uiAmount == null) throw new Error("No balance found");
  console.log("Balance: ", info.value.uiAmount);
  return info.value.uiAmount;
}
const balance = await getScaledUiAmountBalance(connection, mint, owner);
```

</CodeTabs>
