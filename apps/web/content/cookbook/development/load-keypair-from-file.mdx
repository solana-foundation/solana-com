---
title: Load a local json file keypair
description: "Learn how to load a keypair from file."
---

When running your local project may sometimes want to use local keypair. The
default keypair path generated by the Solana CLI is `~/.config/solana/id.json`.

You can generate a custom keypair using the Solana CLI command
_shell`solana-keygen grind --starts-with hi:1`_. This will generate a keypair
with a public key starting with "hi" and output the keypair to a json file. You
can then load this keypair using the helper function below.

<CodeTabs storage="cookbook">

```ts !! title="Gill"
// !collapse(1:8) collapsed

import {
  airdropFactory,
  createSolanaClient,
  lamports
} from "gill";
import { loadKeypairSignerFromFile } from "gill/node";

const keypairSigner = await loadKeypairSignerFromFile();
console.log(keypairSigner.address);

export async function loadDefaultKeypairWithAirdrop(
  cluster: string
  // !collapse(1:24) collapsed
): Promise<KeyPairSigner<string>> {
  const keypair = await loadKeypairSignerFromFile();
  const { rpc, rpcSubscriptions } = createSolanaClient({
    urlOrMoniker: cluster
  });

  try {
    const result = await rpc.getBalance(keypair.address).send();

    console.log(`Balance: ${result.value} lamports`);
    if (result.value < lamports(500_000n)) {
      console.log(`Balance low requesting airdrop`);
      const airdrop = airdropFactory({ rpc, rpcSubscriptions });
      await airdrop({
        commitment: "confirmed",
        lamports: lamports(1_000_000_000n),
        recipientAddress: keypair.address
      });
    }
  } catch (err) {
    console.error("Error fetching balance:", err);
  }
  return keypair;
}

const keypairSigner2 = await loadDefaultKeypairWithAirdrop("devnet");
console.log(keypairSigner2.address);
```

```ts !! title="Kit"
// !collapse(1:29) collapsed

import {
  airdropFactory,
  createKeyPairSignerFromBytes,
  createSolanaRpc,
  createSolanaRpcSubscriptions,
  devnet,
  generateKeyPair,
  getAddressFromPublicKey,
  type KeyPairSigner,
  lamports
} from "@solana/kit";
import fs from "fs";
import path from "path";
import os from "os";

// The new library takes a brand-new approach to Solana key pairs and addresses,
// which will feel quite different from the classes PublicKey and Keypair from version 1.x.
// All key operations now use the native Ed25519 implementation in JavaScriptâ€™s
// Web Crypto API.
async function createKeypair() {
  const newKeypair: CryptoKeyPair = await generateKeyPair();
  const publicAddress = await getAddressFromPublicKey(newKeypair.publicKey);

  console.log(`Public key: ${publicAddress}`);
}

createKeypair();

export async function loadKeypairFromFile(
  filePath: string
): Promise<KeyPairSigner<string>> {
  // This is here so you can also load the default keypair from the file system.
  const resolvedPath = path.resolve(
    filePath.startsWith("~") ? filePath.replace("~", os.homedir()) : filePath
  );
  const loadedKeyBytes = Uint8Array.from(
    JSON.parse(fs.readFileSync(resolvedPath, "utf8"))
  );
  // Here you can also set the second parameter to true in case you need to extract your private key.
  const keypairSigner = await createKeyPairSignerFromBytes(loadedKeyBytes);
  return keypairSigner;
}

const keypairSigner = await loadKeypairFromFile("~/.config/solana/id.json");
console.log(keypairSigner.address);

// !collapse(1:6) collapsed
export async function loadDefaultKeypair(): Promise<KeyPairSigner<string>> {
  return await loadKeypairFromFile("~/.config/solana/id.json");
}

const keypairSigner2 = await loadDefaultKeypair();
console.log(keypairSigner2.address);

export async function loadDefaultKeypairWithAirdrop(
  cluster: string
  // !collapse(1:24) collapsed
): Promise<KeyPairSigner<string>> {
  const keypair = await loadDefaultKeypair();
  const rpc = createSolanaRpc(devnet(`https://api.${cluster}.solana.com`));
  const rpcSubscriptions = createSolanaRpcSubscriptions(
    devnet(`wss://api.${cluster}.solana.com`)
  );
  try {
    const result = await rpc.getBalance(keypair.address).send();

    console.log(`Balance: ${result.value} lamports`);
    if (result.value < lamports(500_000n)) {
      console.log(`Balance low requesting airdrop`);
      const airdrop = airdropFactory({ rpc, rpcSubscriptions });
      await airdrop({
        commitment: "confirmed",
        lamports: lamports(1_000_000_000n),
        recipientAddress: keypair.address
      });
    }
  } catch (err) {
    console.error("Error fetching balance:", err);
  }
  return keypair;
}

const keypairSigner2 = await loadDefaultKeypairWithAirdrop("devnet");
console.log(keypairSigner2.address);
```

```ts !! title="Legacy"
// !collapse(1:12) collapsed

import {
  Cluster,
  clusterApiUrl,
  Connection,
  Keypair,
  LAMPORTS_PER_SOL
} from "@solana/web3.js";
import { readFileSync } from "fs";
import { homedir } from "os";
import path from "path";

export async function loadKeypairFromFile(filePath: string): Promise<Keypair> {
  const resolvedPath = path.resolve(
    filePath.startsWith("~") ? filePath.replace("~", homedir()) : filePath
  );
  const loadedKeyBytes = Uint8Array.from(
    JSON.parse(readFileSync(resolvedPath, "utf8"))
  );
  return await Keypair.fromSecretKey(loadedKeyBytes);
}

const keypair = await loadKeypairFromFile("~/.config/solana/id.json");
console.log(keypair.publicKey.toBase58());

// !collapse(1:6) collapsed
export async function loadDefaultKeypair(): Promise<Keypair> {
  return await loadKeypairFromFile("~/.config/solana/id.json");
}

const keypair2 = await loadDefaultKeypair();
console.log(keypair2.publicKey.toBase58());

export async function loadDefaultKeypairWithAirdrop(
  cluster: Cluster
  // !collapse(1:21) collapsed
): Promise<Keypair> {
  const keypair = await loadDefaultKeypair();
  const connection = new Connection(clusterApiUrl(cluster), "finalized");

  try {
    const balance = await connection.getBalance(keypair.publicKey);

    // 1 LAMPORTS_PER_SOL === 1 SOL
    console.log(`Balance: ${balance} lamports`);
    if (balance < 0.05 * LAMPORTS_PER_SOL) {
      console.log(`Balance low requesting airdrop`);
      await connection.requestAirdrop(keypair.publicKey, 1_000_000_000);
    }
  } catch (err) {
    console.error("Error fetching balance:", err);
  }
  return keypair;
}

const keypair3 = await loadDefaultKeypairWithAirdrop("devnet");
console.log(keypair3.publicKey.toBase58());
```

```rs !! title="Rust"
use solana_client::nonblocking::rpc_client::RpcClient;
use solana_commitment_config::CommitmentConfig;
use solana_sdk::{
    native_token::LAMPORTS_PER_SOL,
    signer::{
        keypair::{self, Keypair},
        Signer,
    },
};
use std::{env, path};

fn load_default_keypair() -> anyhow::Result<Keypair> {
    let home_path = env::var_os("HOME").unwrap();
    let default_keypair_path = ".config/solana/id.json"; // ! update if you want to use a different path
    let default_keypair_path = path::PathBuf::from(home_path).join(default_keypair_path);

    let default_keypair =
        keypair::read_keypair_file(default_keypair_path).expect("error reading keypair from path");

    println!("loaded keypair address -> {:?}", default_keypair.pubkey());

    Ok(default_keypair)
}

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let client = RpcClient::new_with_commitment(
        String::from("http://localhost:8899"),
        CommitmentConfig::confirmed(),
    );

    let wallet = load_default_keypair()?;

    let transaction_signature = client
        .request_airdrop(&wallet.pubkey(), 5 * LAMPORTS_PER_SOL)
        .await?;
    loop {
        if client.confirm_transaction(&transaction_signature).await? {
            break;
        }
    }

    let balance = client.get_balance(&wallet.pubkey()).await?;
    println!("Account Balance: {}", balance / LAMPORTS_PER_SOL);

    Ok(())
}
```

</CodeTabs>
