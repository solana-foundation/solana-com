{
  "createdBy": "sYmy3Nz6iXT6gbZQB5Ti1iGBXml2",
  "createdDate": 1747049732690,
  "data": {
    "seo": {
      "seoDescription": "Explore how to implement ERC4626 on Solana, and discover key differences from Ethereum.",
      "seoImage": "https://cdn.builder.io/api/v1/image/assets%2Fce0c7323a97a4d91bd0baa7490ec9139%2F46090d5a9f6b4c5cad45a659a2079a20",
      "seoTitle": "What is ERC4626 on Solana?"
    },
    "slug": "developers/evm-to-svm/erc4626",
    "blocks": [
      {
        "@type": "@builder.io/sdk:Element",
        "@version": 2,
        "id": "builder-df3cab0e41c84d1593ff267c4b64f529",
        "meta": {
          "previousId": "builder-770c2fae90db4a07bcf778cc92f9b443"
        },
        "component": {
          "name": "Section Molecule",
          "options": {
            "noPadding": "none"
          }
        },
        "children": [
          {
            "@type": "@builder.io/sdk:Element",
            "@version": 2,
            "id": "builder-b4c0d2d13d384c029cfd188f3ec9f269",
            "meta": {
              "previousId": "builder-1688d67aeff94a2f80867b3881a8f353",
              "localizedTextInputs": [
                "eyebrow",
                "headline",
                "body",
                "image.alt"
              ]
            },
            "component": {
              "name": "Hero",
              "options": {
                "headingAs": "h1",
                "centered": false,
                "newsLetter": false,
                "eyebrow": "",
                "image": {
                  "alt": ""
                },
                "headline": "What is ERC4626 on Solana?",
                "body": "<p><br></p>"
              }
            },
            "responsiveStyles": {
              "large": {
                "display": "flex",
                "flexDirection": "column",
                "position": "relative",
                "flexShrink": "0",
                "boxSizing": "border-box"
              }
            }
          },
          {
            "@type": "@builder.io/sdk:Element",
            "@version": 2,
            "id": "builder-7c690b06997346e28c354a5d79960211",
            "meta": {
              "localizedTextInputs": [
                "tocHeadline",
                "callToAction.eyebrow",
                "callToAction.headline",
                "callToAction.description",
                "callToAction.button.label"
              ],
              "previousId": "builder-fcbf30809bf44e53bf2a6f6253ce1e96"
            },
            "component": {
              "name": "Content Editor",
              "options": {
                "callToAction": {
                  "button": {
                    "label": "Explore"
                  },
                  "eyebrow": "Keep Learning",
                  "headline": "Learn about ERC20 on Solana",
                  "description": "See how token minting differs between Ethereum and Solana"
                },
                "tocHeadline": "Table of Content"
              }
            },
            "children": [
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-654caaa487d94fdc8d4516e5fce73cd4",
                "meta": {
                  "localizedTextInputs": ["rawHtml"],
                  "previousId": "builder-f409332ce6584239bfba8d58ce4c74b5"
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<p>ERC‑4626 is a Tokenized Vault Standard that defines a canonical interface for vaults that accept a single underlying ERC‑20 asset and issue share tokens representing proportional ownership. It formalises the deposit/mint/withdraw/redeem lifecycle, plus view functions for safe off‑chain previews.</p>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px",
                    "marginTop": "auto",
                    "marginBottom": "auto"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-b2b8ddb220c14093a6a8fef077a66513",
                "properties": {
                  "id": "number"
                },
                "meta": {
                  "previousId": "builder-da5ece24e1f0466bab5b82c0c6f53c44",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<h3><strong>Key Characteristics</strong></h3><ul><li>Single‑asset custody: Vault holds one ERC‑20; all math expressed in that asset.</li><li>Share accounting: totalAssets() ↔ totalSupply(); convertToShares() &amp; convertToAssets() guarantee predictable ratios.</li><li>Composable interface: DEXes, aggregators, and front‑ends can integrate any compliant vault without custom adapters.</li><li>Strategy‑agnostic: Yield farming, lending, staking, or delta‑neutral - strategy lives behind the same facade.</li></ul>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-c3349808af074748944f99cb2b70fa1b",
                "properties": {
                  "id": "number"
                },
                "meta": {
                  "previousId": "builder-4ab343adae524c8c92865290222baf0f",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<h2><strong>Solana Program &amp; Account Model</strong></h2><h3>What exactly is a 'Program'?</h3><p>Solana Programs are shared ELF‑BPF binaries deployed once and reused forever. They are pure logic - stateless, immutable, upgradeable only via a governance‑controlled “ProgramData” account.</p>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-abcaeb3eab7d4fd297d22b990a8b3263",
                "component": {
                  "name": "Code Block",
                  "options": {
                    "code": "Program  ──┐\n           └─> handles instructions\nAccounts ───┘  (carry all mutable state)",
                    "language": "latex"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-b120e41b211140e79e99eff62178ecc9",
                "properties": {
                  "id": "number"
                },
                "meta": {
                  "previousId": "builder-c3349808af074748944f99cb2b70fa1b",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<p>Deployment feel: Think of Uniswap‑v2 Router being the only swap contract you’ll ever deploy; every new liquidity pool would instead be a new data account the Router controls.</p>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-f770d113efaa43809975761da69fba75",
                "properties": {
                  "id": "number"
                },
                "meta": {
                  "previousId": "builder-3aa9ba97f78e4be285d4a0ffe0fdd19a",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<h3>Accounts = Storage Containers</h3><p>When you create an account on Solana, you first specify its exact data size (for example, space = 128 bytes). The blockchain then reserves that amount of storage, and you deposit lamports (the network’s fee currency) in proportion to the size. If the deposit meets the rent‑exempt threshold, the account never pays ongoing rent. Each account also has an owner field that stores the public key of a specific program, and only that program can modify the account’s data; any transaction from another program cannot alter it.</p>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px",
                    "paddingBottom": "0px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-34c6190e30f94c9e8d4d1a106cbcaf1a",
                "properties": {
                  "id": "number"
                },
                "meta": {
                  "previousId": "builder-093336bab7fa4ea78394c24d35057bcf",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<h3><strong>PDA (Program‑Derived Address)</strong></h3><p>A Program Derived Address (PDA) is generated deterministically from a program ID and a fixed set of seeds, so it has no private key. Because it cannot sign transactions off‑chain, the Solana runtime supplies a synthetic signature when the program calls invoke_signed(), treating the PDA as if it had signed. This lets the program use the PDA like its own wallet, holding mint authority, token accounts, or configuration data, while eliminating any risk of key theft or forged permissions. In effect, the PDA itself becomes the owner, replacing Solidity’s onlyOwner pattern with Solana’s built‑in authority model.</p>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-2c040f903e264b5c9f35cf1bfaeed244",
                "properties": {
                  "id": "number"
                },
                "meta": {
                  "previousId": "builder-34c6190e30f94c9e8d4d1a106cbcaf1a",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<h3>CPI (Cross‑Program Invocation)</h3><p>The token::transfer(...) call above makes a cross‑program invocation to the SPL Token program. It serves the same purpose as IERC20.transferFrom on Ethereum, but in Solana’s account model you must provide every account (from, to, authority) along with the PDA signer seeds that the callee will read or write. Before the instruction runs, the runtime verifies that each account has the required writable or signer permissions, so the transfer executes atomically and leaves no room for dynamic reentrancy exploits.</p>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-695d22904d894d82a1b84c1d577d5e40",
                "properties": {
                  "id": "number"
                },
                "meta": {
                  "previousId": "builder-e3a81387b41d4a7faf148913143a5e45",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<h3><strong>Authoritative Flow in an ERC‑4626‑style Vault Deposit</strong></h3><p><strong>Deposit</strong></p><ul><li>Tx includes: user’s Token Account (signer), Vault Token Account (writable), Share Mint (writable), Vault State PDA (writable).</li><li>CPI #1 → spl_token::transfer user → vault.</li><li>﻿CPI #2 → spl_token::mint_to shares → user.</li></ul><p><strong>Withdraw / Redeem</strong></p><ul><li>Reverse order: burn shares → transfer underlying out.</li></ul><p><strong>State Update inside the program (vault_state.total_assets += amount)</strong></p><p>Because every account touched is explicit in the Tx, wallets can simulate side effects and show accurate previews to users at signing time.</p>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-2b2587daec644748bd40088b69dd8f63",
                "properties": {
                  "id": "number"
                },
                "meta": {
                  "previousId": "builder-05a81d16d02c411fb1b1bd9bc94b2c42",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<h2><strong>What Does a Token Extension Program for ERC-4626 Look Like?</strong></h2><p>This contract implements a vault that follows the ERC 4626 economic model while using an external Spl20 token as its underlying asset. In the constructor it records the Spl20 contract address and that token’s mint address, then queries the token’s decimal places (assetDecimals) through the Spl20 interface. The vault’s total assets are retrieved in the totalAssets function by calling getTokenAccount on the Spl20 contract and reading the balance held by this contract address. Based on that value, convertToShares and convertToAssets keep the correct proportion between underlying assets and vault shares.</p><p>Shares are not issued through a separate token contract; they are tracked with simple shareBalance and shareAllowance mappings, and the _mint and _burn functions update the overall share supply (totalShareSupply). During a deposit the contract first checks that the incoming asset amount is greater than zero, moves those assets into the vault with spl20.transfer, calculates the proportional share amount, and credits it to the receiver. During a redemption it verifies ownership or allowance, burns the specified shares, and sends the corresponding amount of underlying assets back to the receiver through another spl20.transfer.</p><p>A custom nonReentrant modifier guards both state‑changing functions. It sets a locked flag on entry to block nested calls and clears it on exit, preventing reentrancy attacks. Overall the contract provides a minimal ERC 4626‑style vault that mints and burns internal shares as users deposit and withdraw Spl20 tokens, maintains the asset‑to‑share ratio, and includes basic approval logic and reentrancy protection while avoiding reliance on an external share token implementation.</p><p><br></p>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-99408d629b2f4994a37cfea651e9dd3f",
                "component": {
                  "name": "Code Block",
                  "options": {
                    "code": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.24;\n\ninterface ISpl20 {\n    function mintTokens(address to, address mintAddr, uint256 amount) external;\n    function transfer(address to, address mintAddr, uint256 amount) external;\n    function getMint(address mintAddr) external view returns (uint8, uint256, address, address, address);\n    function getTokenAccount(address owner, address mintAddr) external view returns (address, address, uint256, bool);\n}\n\ncontract Spl4626Vault {\n    ISpl20  public immutable spl20;\n    address public immutable mintAddr;\n    uint8   public immutable assetDecimals;\n    uint256 public totalShareSupply;\n\n    mapping(address => uint256) public shareBalance;\n    mapping(address => mapping(address => uint256)) public shareAllowance;\n\n    bool private locked;\n\n    event Approval(address indexed owner, address indexed spender, uint256 value);\n    event Deposit(address indexed caller, address indexed owner, uint256 assets, uint256 shares);\n    event Withdraw(address indexed caller, address indexed receiver, address indexed owner, uint256 assets, uint256 shares);\n\n    modifier nonReentrant() {\n        require(!locked, \"REENTRANCY\");\n        locked = true;\n        _;\n        locked = false;\n    }\n\n    constructor(ISpl20 _spl20, address _mintAddr) {\n        spl20 = _spl20;\n        mintAddr = _mintAddr;\n        (uint8 dec,, , ,) = _spl20.getMint(_mintAddr);\n        assetDecimals = dec;\n    }\n\n    function totalAssets() public view returns (uint256 assets) {\n        (, , assets, ) = spl20.getTokenAccount(address(this), mintAddr);\n    }\n\n    function convertToShares(uint256 assets) public view returns (uint256) {\n        return totalShareSupply == 0 ? assets : (assets * totalShareSupply) / totalAssets();\n    }\n\n    function convertToAssets(uint256 shares) public view returns (uint256) {\n        return totalShareSupply == 0 ? shares : (shares * totalAssets()) / totalShareSupply;\n    }\n\n    function _mint(address to, uint256 amount) internal {\n        totalShareSupply += amount;\n        shareBalance[to] += amount;\n    }\n\n    function _burn(address from, uint256 amount) internal {\n        shareBalance[from] -= amount;\n        totalShareSupply -= amount;\n    }\n\n    function approve(address spender, uint256 amount) external returns (bool) {\n        shareAllowance[msg.sender][spender] = amount;\n        emit Approval(msg.sender, spender, amount);\n        return true;\n    }\n\n    function deposit(uint256 assets, address receiver) external nonReentrant returns (uint256 shares) {\n        require(assets > 0, \"zero assets\");\n        spl20.transfer(address(this), mintAddr, assets);\n        shares = convertToShares(assets);\n        _mint(receiver, shares);\n        emit Deposit(msg.sender, receiver, assets, shares);\n    }\n\n    function redeem(uint256 shares, address receiver, address owner) external nonReentrant returns (uint256 assets) {\n        require(shares > 0, \"zero shares\");\n        if (msg.sender != owner) {\n            uint256 allowed = shareAllowance[owner][msg.sender];\n            require(allowed >= shares, \"allowance too low\");\n            if (allowed != type(uint256).max) {\n                shareAllowance[owner][msg.sender] = allowed - shares;\n            }\n        }\n        assets = convertToAssets(shares);\n        _burn(owner, shares);\n        spl20.transfer(receiver, mintAddr, assets);\n        emit Withdraw(msg.sender, receiver, owner, assets, shares);\n    }\n}\n",
                    "language": "solidity"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-525f95a763da48acb52067b9dbceeda2",
                "properties": {
                  "id": "number"
                },
                "meta": {
                  "previousId": "builder-2b2587daec644748bd40088b69dd8f63",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<h2><strong>How to do ERC4626 on Solana</strong></h2><h3><strong>1. conceptual map</strong></h3>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-b3d547ad232843c5869789123dac7675",
                "meta": {
                  "previousId": "builder-a3b45e8cd54f4c858c0681deb384519c"
                },
                "component": {
                  "name": "Custom Code",
                  "options": {
                    "code": "<style>\n  table.custom-table {\n    width: 100%;\n    border-collapse: collapse;\n  }\n  table.custom-table thead th {\n    text-align: center;\n    font-weight: 600;\n    padding: 8px;\n  }\n  table.custom-table tbody td {\n    padding: 8px;\n    vertical-align: top;\n  }\n  table.custom-table th,\n  table.custom-table td {\n    border: 1px solid #999;\n  }\n</style>\n\n<table class=\"custom-table\">\n  <thead>\n    <tr>\n      <th>Piece</th>\n      <th>On-chain Object</th>\n      <th>Purpose</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><strong>Underlying Mint</strong></td>\n      <td>Mint (already exists)</td>\n      <td>The ERC-20-equivalent asset (e.g., USDC)</td>\n    </tr>\n    <tr>\n      <td><strong>Share Mint</strong></td>\n      <td>New Mint (PDA authority)</td>\n      <td>Tracks proportional ownership of the vault</td>\n    </tr>\n    <tr>\n      <td><strong>Vault ATA</strong></td>\n      <td>Token Account (owned by PDA)</td>\n      <td>Holds the underlying assets</td>\n    </tr>\n    <tr>\n      <td><strong>Vault State PDA</strong></td>\n      <td>Small data account</td>\n      <td>Stores <code>share_mint</code>, <code>pda_bump</code>, optional fees</td>\n    </tr>\n    <tr>\n      <td><strong>Token&nbsp;Account&nbsp;Owner&nbsp;PDA</strong></td>\n      <td>Signer PDA</td>\n      <td>Authority over Vault ATA and Share Mint</td>\n    </tr>\n  </tbody>\n</table>\n",
                    "scriptsClientOnly": true
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingRight": "50px",
                    "paddingLeft": "50px",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-8619ed7ca294459eabe4079b7f78d270",
                "properties": {
                  "id": "number"
                },
                "meta": {
                  "previousId": "builder-cfc8c4cd0ded42f8886dbba34f031443",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<p>one tx always moves exactly one underlying asset and, if necessary, mints/burns the exact proportional number of shares. everything else is bookkeeping.</p>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-4aff3899be9e453e8bfeae4e90c6508c",
                "properties": {
                  "id": "summary"
                },
                "meta": {
                  "previousId": "builder-02fa9b4171b14855b442d5f0d482301c",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<h3><strong>2. end‑to‑end call flow (simplified)</strong></h3><p><strong>1) deposit (assets → shares)</strong></p><p><strong>2) tx composer (wallet)</strong></p><ul><li>adds: user ata, vault ata, share mint, vault state, pda, token program</li><li>invokes program deposit(assets)</li></ul><p><strong>3) Program</strong></p><ul><li>token::transfer (user → vault)</li><li>compute shares = assets * total_supply / total_assets</li><li>token::mint_to (shares → user) using token_account_owner_pda as signer</li><li>update vault_state.total_assets <em>(optional, can always recompute)</em></li><li>emit DepositEvt</li></ul><p><strong>4) wallet preview: because every account is explicit, it can show <em>-X assets</em> &amp; <em>+Y shares</em> before signing.</strong></p><p><strong>5) redeem / withdraw (shares → assets) is the same sequence in reverse order.</strong></p>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-aebc24ff6fa0437488255871ce889fc3",
                "properties": {
                  "id": "types-node"
                },
                "meta": {
                  "previousId": "builder-87ebe3fb0a43485b9529c649b940d3af",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<h3><strong>3. Write program</strong></h3>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-a331bb7c724646cea964dbb3d1a0ee04",
                "properties": {
                  "id": "types-node"
                },
                "meta": {
                  "previousId": "builder-41cf431fa4a14c958f64521a1eda08f0",
                  "localizedTextInputs": ["rawHtml"]
                },
                "component": {
                  "name": "Copy",
                  "options": {
                    "rawHtml": "<p>Imagine launching a tiny Solana vault that behaves like an ERC‑4626 clone. At initialization a single transaction seeds three key PDAs: a VaultState account that records the share‑mint address and bump, a program‑owned share mint, and a token‑vault account that will hold the underlying asset. The same PDA signer, token_account_owner_pda, is cached inside VaultState, letting the program act as custodian without ever exposing a private key. When a user calls deposit, the vault pulls their tokens in, mints proportional “shares,” and emits a DepositEvt, giving indexers an audit trail. The first depositor enjoys a 1 : 1 exchange rate, while later deposits use the classic supply × assets / totalAssets formula to keep shares aligned with vault value. Conversely, redeem burns the user’s shares, computes their slice of the pot, and ships the underlying tokens back out, firing a WithdrawEvt for good measure. Both CPI flows rely purely on token::transfer, mint_to, and burn, so Anchor’s safety checks guard every balance change. No yield strategy or fee logic is baked in; this snippet is the minimalist chassis you’d plug a strategy into. About ninety lines of Rust, yet it delivers the full “deposit, mint, withdraw, redeem” life‑cycle familiar to anyone who has integrated an ERC‑4626 vault on Ethereum.</p>"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "20px"
                  }
                }
              },
              {
                "@type": "@builder.io/sdk:Element",
                "@version": 2,
                "id": "builder-317f0b03aa1a47d0b729b9a428a53095",
                "meta": {
                  "previousId": "builder-7d7a29f33d734107a2ac68452077e4b9"
                },
                "component": {
                  "name": "Code Block",
                  "options": {
                    "code": "use anchor_lang::prelude::*;\nuse anchor_spl::token::{\n    self, Mint, Token, TokenAccount,\n    Transfer, MintTo, Burn,\n};\n\ndeclare_id!(\"VaUlt4626pHkYwWjSfERn6y6oAYcg4UH8zQcAXXXXXXXXX\"); // replace after deploy\n\n#[account]\npub struct VaultState {\n    pub share_mint: Pubkey,\n    pub pda_bump:   u8,\n}\nconst VAULT_STATE_SIZE: usize = 8 + 32 + 1;\n\n#[program]\npub mod spl_4626_vault {\n    use super::*;\n\n    pub fn initialize(ctx: Context<Initialize>) -> Result<()> {\n        let state        = &mut ctx.accounts.vault_state;\n        state.share_mint = ctx.accounts.share_mint.key();\n        state.pda_bump   = *ctx.bumps.get(\"token_account_owner_pda\").unwrap();\n        Ok(())\n    }\n\n    pub fn deposit(ctx: Context<Deposit>, assets: u64) -> Result<()> {\n        require!(assets > 0, CustomError::ZeroAmount);\n        token::transfer(ctx.accounts.transfer_into_vault_ctx(), assets)?;\n\n        let supply        = ctx.accounts.share_mint.supply;\n        let total_assets  = ctx.accounts.vault_token_account.amount;\n        let shares = if supply == 0 {\n            assets\n        } else {\n            (assets as u128 * supply as u128 / total_assets as u128) as u64\n        };\n\n        token::mint_to(ctx.accounts.mint_shares_ctx(), shares)?;\n\n        emit!(DepositEvt {\n            caller:   ctx.accounts.signer.key(),\n            receiver: ctx.accounts.signer.key(),\n            assets,\n            shares,\n        });\n        Ok(())\n    }\n\n    pub fn redeem(ctx: Context<Redeem>, shares: u64) -> Result<()> {\n        require!(shares > 0, CustomError::ZeroAmount);\n\n        let supply        = ctx.accounts.share_mint.supply;\n        let total_assets  = ctx.accounts.vault_token_account.amount;\n        let assets        = (shares as u128 * total_assets as u128 / supply as u128) as u64;\n\n        token::burn(ctx.accounts.burn_shares_ctx(), shares)?;\n        token::transfer(ctx.accounts.transfer_out_ctx(), assets)?;\n\n        emit!(WithdrawEvt {\n            caller:   ctx.accounts.signer.key(),\n            receiver: ctx.accounts.signer.key(),\n            owner:    ctx.accounts.signer.key(),\n            assets,\n            shares,\n        });\n        Ok(())\n    }\n}\n\n#[event]\npub struct DepositEvt {\n    pub caller:   Pubkey,\n    pub receiver: Pubkey,\n    pub assets:   u64,\n    pub shares:   u64,\n}\n#[event]\npub struct WithdrawEvt {\n    pub caller:   Pubkey,\n    pub receiver: Pubkey,\n    pub owner:    Pubkey,\n    pub assets:   u64,\n    pub shares:   u64,\n}\n\n#[error_code]\npub enum CustomError {\n    #[msg(\"amount must be > 0\")]\n    ZeroAmount,\n}\n\n#[derive(Accounts)]\npub struct Initialize<'info> {\n    #[account(\n        init,\n        payer  = signer,\n        seeds  = [b\"vault_state\"],\n        bump,\n        space  = VAULT_STATE_SIZE,\n    )]\n    pub vault_state: Account<'info, VaultState>,\n\n    #[account(seeds = [b\"token_account_owner_pda\"], bump)]\n    /// CHECK: program‑derived signer\n    pub token_account_owner_pda: AccountInfo<'info>,\n\n    #[account(\n        init,\n        payer = signer,\n        seeds = [b\"share_mint\"],\n        bump,\n        mint::decimals   = mint_of_token_being_sent.decimals,\n        mint::authority  = token_account_owner_pda,\n    )]\n    pub share_mint: Account<'info, Mint>,\n\n    #[account(\n        init,\n        payer = signer,\n        seeds = [b\"token_vault\", mint_of_token_being_sent.key().as_ref()],\n        bump,\n        token::mint      = mint_of_token_being_sent,\n        token::authority = token_account_owner_pda,\n    )]\n    pub vault_token_account: Account<'info, TokenAccount>,\n\n    pub mint_of_token_being_sent: Account<'info, Mint>,\n\n    #[account(mut)] pub signer: Signer<'info>,\n    pub system_program: Program<'info, System>,\n    pub token_program:  Program<'info, Token>,\n    pub rent:           Sysvar<'info, Rent>,\n}\n\n#[derive(Accounts)]\npub struct Deposit<'info> {\n    #[account(mut, seeds=[b\"vault_state\"], bump)]\n    pub vault_state: Account<'info, VaultState>,\n    #[account(seeds=[b\"token_account_owner_pda\"], bump)]\n    /// CHECK:\n    pub token_account_owner_pda: AccountInfo<'info>,\n\n    #[account(mut,\n        seeds=[b\"token_vault\", mint_of_token_being_sent.key().as_ref()],\n        bump,\n        token::mint      = mint_of_token_being_sent,\n        token::authority = token_account_owner_pda\n    )]\n    pub vault_token_account: Account<'info, TokenAccount>,\n\n    #[account(mut)] pub sender_token_account: Account<'info, TokenAccount>,\n    #[account(mut)] pub sender_share_account: Account<'info, TokenAccount>,\n\n    #[account(seeds=[b\"share_mint\"], bump)]\n    pub share_mint: Account<'info, Mint>,\n    pub mint_of_token_being_sent: Account<'info, Mint>,\n\n    #[account(mut)] pub signer: Signer<'info>,\n    pub token_program: Program<'info, Token>,\n}\n\n#[derive(Accounts)]\npub struct Redeem<'info> {\n    #[account(mut, seeds=[b\"vault_state\"], bump)]\n    pub vault_state: Account<'info, VaultState>,\n    #[account(seeds=[b\"token_account_owner_pda\"], bump)]\n    /// CHECK:\n    pub token_account_owner_pda: AccountInfo<'info>,\n\n    #[account(mut,\n        seeds=[b\"token_vault\", mint_of_token_being_sent.key().as_ref()],\n        bump,\n        token::mint      = mint_of_token_being_sent,\n        token::authority = token_account_owner_pda\n    )]\n    pub vault_token_account: Account<'info, TokenAccount>,\n\n    #[account(mut)] pub sender_token_account: Account<'info, TokenAccount>,\n    #[account(mut)] pub sender_share_account: Account<'info, TokenAccount>,\n\n    #[account(seeds=[b\"share_mint\"], bump)]\n    pub share_mint: Account<'info, Mint>,\n    pub mint_of_token_being_sent: Account<'info, Mint>,\n\n    #[account(mut)] pub signer: Signer<'info>,\n    pub token_program: Program<'info, Token>,\n}\n\nimpl<'info> Deposit<'info> {\n    fn transfer_into_vault_ctx(&self) -> CpiContext<'_, '_, '_, 'info, Transfer<'info>> {\n        CpiContext::new(\n            self.token_program.to_account_info(),\n            Transfer {\n                from:      self.sender_token_account.to_account_info(),\n                to:        self.vault_token_account.to_account_info(),\n                authority: self.signer.to_account_info(),\n            },\n        )\n    }\n    fn mint_shares_ctx(&self) -> CpiContext<'_, '_, '_, 'info, MintTo<'info>> {\n        let seeds = &[b\"token_account_owner_pda\", &[self.vault_state.pda_bump]];\n        CpiContext::new_with_signer(\n            self.token_program.to_account_info(),\n            MintTo {\n                mint:      self.share_mint.to_account_info(),\n                to:        self.sender_share_account.to_account_info(),\n                authority: self.token_account_owner_pda.to_account_info(),\n            },\n            &[seeds],\n        )\n    }\n}\n\nimpl<'info> Redeem<'info> {\n    fn burn_shares_ctx(&self) -> CpiContext<'_, '_, '_, 'info, Burn<'info>> {\n        let seeds = &[b\"token_account_owner_pda\", &[self.vault_state.pda_bump]];\n        CpiContext::new_with_signer(\n            self.token_program.to_account_info(),\n            Burn {\n                mint:      self.share_mint.to_account_info(),\n                from:      self.sender_share_account.to_account_info(),\n                authority: self.token_account_owner_pda.to_account_info(),\n            },\n            &[seeds],\n        )\n    }\n    fn transfer_out_ctx(&self) -> CpiContext<'_, '_, '_, 'info, Transfer<'info>> {\n        let seeds = &[b\"token_account_owner_pda\", &[self.vault_state.pda_bump]];\n        CpiContext::new_with_signer(\n            self.token_program.to_account_info(),\n            Transfer {\n                from:      self.vault_token_account.to_account_info(),\n                to:        self.sender_token_account.to_account_info(),\n                authority: self.token_account_owner_pda.to_account_info(),\n            },\n            &[seeds],\n        )\n    }\n}\n",
                    "language": "rust"
                  }
                },
                "responsiveStyles": {
                  "large": {
                    "display": "flex",
                    "flexDirection": "column",
                    "position": "relative",
                    "flexShrink": "0",
                    "boxSizing": "border-box",
                    "paddingTop": "0px",
                    "paddingBottom": "0px"
                  }
                }
              }
            ],
            "responsiveStyles": {
              "large": {
                "display": "flex",
                "flexDirection": "column",
                "position": "relative",
                "flexShrink": "0",
                "boxSizing": "border-box"
              }
            }
          },
          {
            "@type": "@builder.io/sdk:Element",
            "@version": 2,
            "id": "builder-430d104ba59f4206b76d5c285b16d8ec",
            "meta": {
              "previousId": "builder-7b99e1e223154f91aa777fc06e513e54",
              "localizedTextInputs": [
                "eyebrow",
                "headline",
                "body",
                "buttons.0.label"
              ]
            },
            "component": {
              "name": "Heading",
              "options": {
                "eyebrow": "EVM TO SVM",
                "headline": "",
                "body": "",
                "variant": "centered",
                "buttons": [
                  {
                    "hierarchy": "outline",
                    "size": "md",
                    "iconSize": "md",
                    "startIcon": "none",
                    "endIcon": "none",
                    "url": "https://solana.com/developers/evm-to-svm",
                    "label": "Home"
                  }
                ]
              }
            },
            "responsiveStyles": {
              "large": {
                "display": "flex",
                "flexDirection": "column",
                "position": "relative",
                "flexShrink": "0",
                "boxSizing": "border-box"
              }
            }
          },
          {
            "@type": "@builder.io/sdk:Element",
            "@version": 2,
            "id": "builder-ee491f10068c4cc9b4324115ab33d3bd",
            "meta": {
              "previousId": "builder-c3dd3f1f281e48f4a64089642cb17d4a",
              "localizedTextInputs": ["eyebrow", "headline", "body"]
            },
            "component": {
              "name": "Heading",
              "options": {
                "variant": "standard",
                "headline": "Start building on Solana"
              }
            },
            "responsiveStyles": {
              "large": {
                "display": "flex",
                "flexDirection": "column",
                "position": "relative",
                "flexShrink": "0",
                "boxSizing": "border-box"
              }
            }
          },
          {
            "@type": "@builder.io/sdk:Element",
            "@version": 2,
            "id": "builder-c9341ffe79d84612b6a246403c3c75bf",
            "meta": {
              "previousId": "builder-05bf86a22c9841de9393143642aa34d0"
            },
            "component": {
              "name": "Card Deck",
              "options": {
                "cards": [
                  {
                    "type": "image",
                    "heading": "Intro to Solana Development",
                    "backgroundImage": {
                      "src": "https://cdn.builder.io/api/v1/image/assets%2Fce0c7323a97a4d91bd0baa7490ec9139%2Fdfb1773873354d118d134beca2334288"
                    },
                    "callToAction": {
                      "url": "/developers/guides/getstarted/hello-world-in-your-browser",
                      "endIcon": "arrow-right",
                      "hierarchy": "outline"
                    },
                    "headingAs": "h3"
                  },
                  {
                    "type": "image",
                    "heading": "Solana Development Course",
                    "backgroundImage": {
                      "src": "https://cdn.builder.io/api/v1/image/assets%2Fce0c7323a97a4d91bd0baa7490ec9139%2Fdfb1773873354d118d134beca2334288"
                    },
                    "callToAction": {
                      "url": "https://www.soldev.app/course",
                      "endIcon": "arrow-right",
                      "hierarchy": "outline"
                    },
                    "headingAs": "h3"
                  },
                  {
                    "type": "image",
                    "heading": "Solana Bootcamp",
                    "backgroundImage": {
                      "src": "https://cdn.builder.io/api/v1/image/assets%2Fce0c7323a97a4d91bd0baa7490ec9139%2Fdfb1773873354d118d134beca2334288"
                    },
                    "callToAction": {
                      "url": "https://youtu.be/0P8JeL3TURU?feature=shared",
                      "endIcon": "arrow-right",
                      "hierarchy": "outline"
                    },
                    "headingAs": "h3"
                  },
                  {
                    "type": "image",
                    "heading": "More Solana Developer Tools",
                    "backgroundImage": {
                      "src": "https://cdn.builder.io/api/v1/image/assets%2Fce0c7323a97a4d91bd0baa7490ec9139%2Fdfb1773873354d118d134beca2334288"
                    },
                    "callToAction": {
                      "url": "/developers",
                      "endIcon": "arrow-right",
                      "hierarchy": "outline"
                    },
                    "headingAs": "h3"
                  }
                ],
                "featured": true,
                "numCols": 3
              }
            },
            "responsiveStyles": {
              "large": {
                "display": "flex",
                "flexDirection": "column",
                "position": "relative",
                "flexShrink": "0",
                "boxSizing": "border-box",
                "paddingTop": "0px",
                "marginTop": "-3px"
              }
            }
          },
          {
            "@type": "@builder.io/sdk:Element",
            "@version": 2,
            "id": "builder-facf2592f877430789908cd4af81f9e1",
            "meta": {
              "previousId": "builder-48c41fc8af1b4fc19ba47ef289f69149",
              "localizedTextInputs": ["rawHtml"]
            },
            "component": {
              "name": "Copy",
              "options": {
                "rawHtml": "<p><strong>Node storing all data and participating in consensus</strong></p><ul><li><strong>Ethereum:</strong> Archive Node</li><li><strong>Solana:</strong> [n/a]</li></ul><p><strong>Node storing some data and participating in consensus</strong></p><ul><li><strong>Ethereum:</strong> Full Node</li><li><strong>Solana:</strong> Consensus Node</li></ul><p><strong>Node storing some data and not participating in consensus</strong></p><ul><li><strong>Ethereum:</strong> Light Node</li><li><strong>Solana:</strong> RPC Node</li></ul>"
              }
            },
            "responsiveStyles": {
              "large": {
                "display": "none",
                "flexDirection": "column",
                "position": "relative",
                "flexShrink": "0",
                "boxSizing": "border-box"
              },
              "medium": {
                "display": "none"
              },
              "small": {
                "display": "flex"
              }
            }
          }
        ],
        "responsiveStyles": {
          "large": {
            "display": "flex",
            "flexDirection": "column",
            "position": "relative",
            "flexShrink": "0",
            "boxSizing": "border-box"
          }
        }
      },
      {
        "@type": "@builder.io/sdk:Element",
        "@version": 2,
        "id": "builder-6d254e75219a464b9818f1c09fe6592a",
        "meta": {
          "previousId": "builder-df3cab0e41c84d1593ff267c4b64f529"
        },
        "component": {
          "name": "Section Molecule",
          "options": {
            "noPadding": "none"
          }
        },
        "children": [
          {
            "@type": "@builder.io/sdk:Element",
            "@version": 2,
            "id": "builder-dbf697703fca483aa13292bd7764d094",
            "meta": {
              "previousId": "builder-facf2592f877430789908cd4af81f9e1",
              "localizedTextInputs": ["rawHtml"]
            },
            "component": {
              "name": "Copy",
              "options": {
                "rawHtml": "<p><strong>Node storing all data and participating in consensus</strong></p><ul><li><strong>Ethereum:</strong> Archive Node</li><li><strong>Solana:</strong> [n/a]</li></ul><p><strong>Node storing some data and participating in consensus</strong></p><ul><li><strong>Ethereum:</strong> Full Node</li><li><strong>Solana:</strong> Consensus Node</li></ul><p><strong>Node storing some data and not participating in consensus</strong></p><ul><li><strong>Ethereum:</strong> Light Node</li><li><strong>Solana:</strong> RPC Node</li></ul>"
              }
            },
            "responsiveStyles": {
              "large": {
                "display": "none",
                "flexDirection": "column",
                "position": "relative",
                "flexShrink": "0",
                "boxSizing": "border-box"
              },
              "medium": {
                "display": "none"
              },
              "small": {
                "display": "flex"
              }
            }
          }
        ],
        "responsiveStyles": {
          "large": {
            "display": "flex",
            "flexDirection": "column",
            "position": "relative",
            "flexShrink": "0",
            "boxSizing": "border-box"
          }
        }
      },
      {
        "id": "builder-pixel-66a9afly37l",
        "@type": "@builder.io/sdk:Element",
        "tagName": "img",
        "properties": {
          "src": "https://cdn.builder.io/api/v1/pixel?apiKey=983ae1dad0ba4ca4ac6dd4ac310edee1",
          "aria-hidden": "true",
          "alt": "",
          "role": "presentation",
          "width": "0",
          "height": "0"
        },
        "responsiveStyles": {
          "large": {
            "height": "0",
            "width": "0",
            "display": "block",
            "opacity": "0",
            "overflow": "hidden",
            "pointerEvents": "none"
          }
        }
      }
    ],
    "state": {
      "deviceSize": "large",
      "location": {
        "pathname": "/developers/evm-to-svm/erc4626",
        "path": ["developers", "evm-to-svm", "erc4626"],
        "query": {}
      }
    }
  },
  "firstPublished": 1748522381666,
  "folders": [],
  "id": "983ae1dad0ba4ca4ac6dd4ac310edee1_0b4932a5fe824dfc838a2a2e4686e7a8",
  "lastUpdated": 1748522381700,
  "lastUpdatedBy": "raRQu21TThWsyKM0OoHD3VsoNSI3",
  "meta": {
    "hasLinks": false,
    "kind": "component",
    "lastPreviewUrl": "https://solana.com/developers/evm-to-svm/erc4626?builder.space=ce0c7323a97a4d91bd0baa7490ec9139&builder.user.permissions=read%2Ccreate%2Cpublish%2CeditLayouts%2CeditLayers%2CeditContentPriority%2CeditFolders&builder.user.role.name=Editor&builder.user.role.id=editor&builder.cachebust=true&builder.preview=section-page&builder.noCache=true&builder.allowTextEdit=true&__builder_editing__=true&builder.overrides.section-page=0b4932a5fe824dfc838a2a2e4686e7a8&builder.overrides.0b4932a5fe824dfc838a2a2e4686e7a8=0b4932a5fe824dfc838a2a2e4686e7a8&builder.options.includeRefs=true&builder.options.enrich=true&builder.options.locale=Default",
    "originalContentId": "884c3585e7f6408ab103e51b57a0526c",
    "winningTest": null
  },
  "modelId": "983ae1dad0ba4ca4ac6dd4ac310edee1_c93163a557894c46af48f3ff83f2c5ca",
  "name": "developers/evm-to-svm/erc4626",
  "previewUrl": "https://solana.com/developers/evm-to-svm/erc4626",
  "published": "published",
  "query": [],
  "screenshot": "https://cdn.builder.io/api/v1/image/assets%2Fce0c7323a97a4d91bd0baa7490ec9139%2F2f5c345aa377449598d35cff735ac9eb",
  "testRatio": 1,
  "variations": {},
  "@originId": "0b4932a5fe824dfc838a2a2e4686e7a8",
  "@originOrgId": "ce0c7323a97a4d91bd0baa7490ec9139",
  "@originModelId": "c93163a557894c46af48f3ff83f2c5ca",
  "@liveSyncEnabled": true,
  "rev": "yis5qywyqb"
}
