---
title: Load a local json file keypair
description: "Learn how to load a keypair from file."
---

When running your local project may sometimes want to use local keypair. The
default keypair path generated by the Solana CLI is `~/.config/solana/id.json`.

You can generate a custom keypair using the Solana CLI command
_shell`solana-keygen grind --starts-with hi:1`_. This will generate a keypair
with a public key starting with "hi" and output the keypair to a json file. You
can then load this keypair using the helper function below.

<CodeTabs storage="cookbook">

```typescript !! title="gill"
import { loadKeypairSignerFromFile } from "gill/node";

// defaults to using the Solana CLI keypair path: ~/.config/solana/id.json
const signer = await loadKeypairSignerFromFile();

// load a keypair from a specific file path
const signer2 = await loadKeypairSignerFromFile("/path/to/keypair.json");
```

```typescript !! title="Legacy"
// !collapse(1:12) collapsed

import {
  Cluster,
  clusterApiUrl,
  Connection,
  Keypair,
  LAMPORTS_PER_SOL,
} from "@solana/web3.js";
import { readFileSync } from "fs";
import { homedir } from "os";
import path from "path";

export async function loadKeypairFromFile(filePath: string): Promise<Keypair> {
  const resolvedPath = path.resolve(
    filePath.startsWith("~") ? filePath.replace("~", homedir()) : filePath,
  );
  const loadedKeyBytes = Uint8Array.from(
    JSON.parse(readFileSync(resolvedPath, "utf8")),
  );
  return await Keypair.fromSecretKey(loadedKeyBytes);
}

const keypair = await loadKeypairFromFile("~/.config/solana/id.json");
console.log(keypair.publicKey.toBase58());

// !collapse(1:6) collapsed
export async function loadDefaultKeypair(): Promise<Keypair> {
  return await loadKeypairFromFile("~/.config/solana/id.json");
}

const keypair2 = await loadDefaultKeypair();
console.log(keypair2.publicKey.toBase58());

export async function loadDefaultKeypairWithAirdrop(
  cluster: Cluster,
  // !collapse(1:21) collapsed
): Promise<Keypair> {
  const keypair = await loadDefaultKeypair();
  const connection = new Connection(clusterApiUrl(cluster), "finalized");

  try {
    const balance = await connection.getBalance(keypair.publicKey);

    // 1 LAMPORTS_PER_SOL === 1 SOL
    console.log(`Balance: ${balance} lamports`);
    if (balance < 0.05 * LAMPORTS_PER_SOL) {
      console.log(`Balance low requesting airdrop`);
      await connection.requestAirdrop(keypair.publicKey, 1_000_000_000);
    }
  } catch (err) {
    console.error("Error fetching balance:", err);
  }
  return keypair;
}

const keypair3 = await loadDefaultKeypairWithAirdrop("devnet");
console.log(keypair3.publicKey.toBase58());
```

```rs !! title="Rust"
// !collapse(1:9) collapsed

use anyhow::Result;
use solana_client::rpc_client::RpcClient;
use solana_sdk::{
    commitment_config::CommitmentConfig, native_token::LAMPORTS_PER_SOL, signature::Keypair,
    signer::Signer,
};
use std::{env, fs, path};

fn load_default_keypair() -> Result<Keypair> {
    let home_path = env::var_os("HOME").unwrap();
    let default_keypair_path = ".config/solana/id.json"; // ! update if you want to use a different path
    let default_keypair_path = path::PathBuf::from(home_path).join(default_keypair_path);

    let keypair_file = fs::read_to_string(default_keypair_path)?;
    let keypair_bytes: Vec<u8> = serde_json::from_str(&keypair_file)?;
    let default_keypair = Keypair::from_bytes(&keypair_bytes)?;
    println!("loaded keypair address -> {:?}", default_keypair.pubkey()); // ! debug

    Ok(default_keypair)
}

fn main() -> Result<()> {
    let client = RpcClient::new_with_commitment(
        String::from("http://127.0.0.1:8899"),
        CommitmentConfig::confirmed(),
    );

    let my_keypair = load_default_keypair()?;
    let transaction_signature =
        client.request_airdrop(&my_keypair.pubkey(), 5 * LAMPORTS_PER_SOL)?;
    // !collapse(1:14) collapsed

    loop {
        if client.confirm_transaction(&transaction_signature)? {
            break;
        }
    }

    let balance = client.get_balance(&my_keypair.pubkey())?;
    println!("Account Balance: {}", balance / LAMPORTS_PER_SOL);
    println!(
        "Transaction Signature: https://explorer.solana.com/tx/{}?cluster=custom",
        transaction_signature
    );

    Ok(())
}
```

```rs !! title="Rust Async"
// !collapse(1:9) collapsed

use anyhow::Result;
use solana_client::nonblocking::rpc_client::RpcClient;
use solana_sdk::{
    commitment_config::CommitmentConfig, native_token::LAMPORTS_PER_SOL, signature::Keypair,
    signer::Signer,
};
use std::{env, fs, path};

fn load_default_keypair() -> Result<Keypair> {
    let home_path = env::var_os("HOME").unwrap();
    let default_keypair_path = ".config/solana/id.json"; // ! update if you want to use a different path
    let default_keypair_path = path::PathBuf::from(home_path).join(default_keypair_path);

    let keypair_file = fs::read_to_string(default_keypair_path)?;
    let keypair_bytes: Vec<u8> = serde_json::from_str(&keypair_file)?;
    let default_keypair = Keypair::from_bytes(&keypair_bytes)?;
    println!("loaded keypair address -> {:?}", default_keypair.pubkey()); // ! debug

    Ok(default_keypair)
}

#[tokio::main]
async fn main() -> Result<()> {
    let client = RpcClient::new_with_commitment(
        String::from("http://127.0.0.1:8899"),
        CommitmentConfig::confirmed(),
    );

    let wallet = load_default_keypair()?;
    let transaction_signature = client
        .request_airdrop(&wallet.pubkey(), 5 * LAMPORTS_PER_SOL)
        .await?;
    // !collapse(1:14) collapsed

    loop {
        if client.confirm_transaction(&transaction_signature).await? {
            break;
        }
    }

    let balance = client.get_balance(&wallet.pubkey()).await?;
    println!("Account Balance: {}", balance / LAMPORTS_PER_SOL);
    println!(
        "Transaction Signature: https://explorer.solana.com/tx/{}?cluster=custom",
        transaction_signature
    );

    Ok(())
}
```

</CodeTabs>
