---
title: How to Get All Token Accounts by Authority
description:
  "Learn how to retrieve Solana token accounts by owner, including all accounts
  or filtered by mint."
---

You can fetch token accounts by owner. There are two ways to do it.

1. Get All Token Account

<CodeTabs >

```typescript !! title="Legacy"
import { clusterApiUrl, Connection, PublicKey } from "@solana/web3.js";
import { TOKEN_PROGRAM_ID } from "@solana/spl-token";

(async () => {
  // connection
  const connection = new Connection("http://127.0.0.1:8899", "confirmed");

  const owner = new PublicKey("G2FAbFQPFa5qKXCetoFZQEvF9BVvCKbvUZvodpVidnoY");
  let response = await connection.getParsedTokenAccountsByOwner(owner, {
    programId: TOKEN_PROGRAM_ID
  });

  response.value.forEach((accountInfo) => {
    console.log(`pubkey: ${accountInfo.pubkey.toBase58()}`);
    console.log(`mint: ${accountInfo.account.data["parsed"]["info"]["mint"]}`);
    console.log(
      `owner: ${accountInfo.account.data["parsed"]["info"]["owner"]}`
    );
    console.log(
      `decimals: ${accountInfo.account.data["parsed"]["info"]["tokenAmount"]["decimals"]}`
    );
    console.log(
      `amount: ${accountInfo.account.data["parsed"]["info"]["tokenAmount"]["amount"]}`
    );
    console.log("====================");
  });
})();
```

```rust !! title="Rust"
use solana_account_decoder_client_types::UiAccountData;
use solana_client::{nonblocking::rpc_client::RpcClient, rpc_request::TokenAccountsFilter};
use solana_sdk::{commitment_config::CommitmentConfig, pubkey};
use spl_token::ID as TOKEN_PROGRAM_ID;

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let client = RpcClient::new_with_commitment(
        String::from("http://127.0.0.1:8899"),
        CommitmentConfig::confirmed(),
    );

    let authority_address = pubkey!("G2FAbFQPFa5qKXCetoFZQEvF9BVvCKbvUZvodpVidnoY");

    let response = client
        .get_token_accounts_by_owner(
            &authority_address,
            TokenAccountsFilter::ProgramId(TOKEN_PROGRAM_ID),
        )
        .await?;

    for token in response {
        println!("pubkey: {}", token.pubkey);

        // ! gracefull handle the Options and don't unwrap as this is
        // only for demonstration purposes only
        if let UiAccountData::Json(parsed_data) = token.account.data {
            let parsed_value = match parsed_data.parsed.as_object() {
                Some(val) => val,
                None => {
                    eprintln!("failed to parsed token acc data");
                    continue;
                }
            };
            let info = parsed_value.get("info").unwrap().as_object().unwrap();

            let mint = info.get("mint").unwrap();
            let owner = info.get("owner").unwrap();

            let token_amount = info.get("tokenAmount").unwrap().as_object().unwrap();
            let decimals = token_amount.get("decimals").unwrap();
            let amount = token_amount.get("uiAmount").unwrap();

            println!("mint: {:?}", mint);
            println!("owner: {:?}", owner);
            println!("decimals: {:?}", decimals);
            println!("amount: {:?}", amount);

            println!("====================")
        }
    }

    Ok(())
}
```

</CodeTabs>

2. Filter By Mint

<CodeTabs >

```typescript !! title="Legacy"
import { TOKEN_2022_PROGRAM_ID } from "@solana/spl-token";
import { clusterApiUrl, Connection, PublicKey } from "@solana/web3.js";

(async () => {
  // connection
  const connection = new Connection(
    clusterApiUrl("http://127.0.0.1:8899"),
    "confirmed"
  );

  const owner = new PublicKey("G2FAbFQPFa5qKXCetoFZQEvF9BVvCKbvUZvodpVidnoY");
  const mint = new PublicKey("54dQ8cfHsW1YfKYpmdVZhWpb9iSi6Pac82Nf7sg3bVb");

  let response = await connection.getParsedTokenAccountsByOwner(owner, {
    mint: mint,
    programId: TOKEN_2022_PROGRAM_ID
  });

  response.value.forEach((accountInfo) => {
    console.log(`pubkey: ${accountInfo.pubkey.toBase58()}`);
    console.log(`mint: ${accountInfo.account.data["parsed"]["info"]["mint"]}`);
    console.log(
      `owner: ${accountInfo.account.data["parsed"]["info"]["owner"]}`
    );
    console.log(
      `decimals: ${accountInfo.account.data["parsed"]["info"]["tokenAmount"]["decimals"]}`
    );
    console.log(
      `amount: ${accountInfo.account.data["parsed"]["info"]["tokenAmount"]["amount"]}`
    );
    console.log("====================");
  });
})();
```

```rust !! title="Rust"
use solana_account_decoder_client_types::UiAccountData;
use solana_client::{nonblocking::rpc_client::RpcClient, rpc_request::TokenAccountsFilter};
use solana_sdk::{commitment_config::CommitmentConfig, pubkey};

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let client = RpcClient::new_with_commitment(
        String::from("https://api.devnet.solana.com"),
        CommitmentConfig::confirmed(),
    );

    let authority_address = pubkey!("G2FAbFQPFa5qKXCetoFZQEvF9BVvCKbvUZvodpVidnoY");
    let mint_address = pubkey!("54dQ8cfHsW1YfKYpmdVZhWpb9iSi6Pac82Nf7sg3bVb");

    let response = client
        .get_token_accounts_by_owner(&authority_address, TokenAccountsFilter::Mint(mint_address))
        .await?;

    for token in response {
        println!("pubkey: {}", token.pubkey);

        // ! gracefull handle the Options and don't unwrap as this is
        // only for demonstration purposes only
        if let UiAccountData::Json(parsed_data) = token.account.data {
            let parsed_value = match parsed_data.parsed.as_object() {
                Some(val) => val,
                None => {
                    eprintln!("failed to parsed token acc data");
                    continue;
                }
            };
            let info = parsed_value.get("info").unwrap().as_object().unwrap();

            let mint = info.get("mint").unwrap();
            let owner = info.get("owner").unwrap();

            let token_amount = info.get("tokenAmount").unwrap().as_object().unwrap();
            let decimals = token_amount.get("decimals").unwrap();
            let amount = token_amount.get("uiAmount").unwrap();

            println!("mint: {:?}", mint);
            println!("owner: {:?}", owner);
            println!("decimals: {:?}", decimals);
            println!("amount: {:?}", amount);

            println!("====================")
        }
    }

    Ok(())
}
```

</CodeTabs>
