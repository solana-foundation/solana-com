---
title: 安装
seoTitle: 安装Solana CLI和Anchor
description:
  设置本地Solana开发环境的指南。学习如何在Windows（WSL）、Linux
  和Mac上安装Rust、Solana CLI和Anchor框架。
---

本节介绍为Solana开发设置本地环境的步骤。

## 快速安装

在Mac和Linux上，运行这个单一命令来安装所有依赖项。

```terminal
$ curl --proto '=https' --tlsv1.2 -sSfL https://solana-install.solana.workers.dev | bash
```

<Callout type="warn">
  Windows用户：您必须首先安装WSL（请参阅[安装依赖项](#install-dependencies)）。然后在Ubuntu（Linux）终端中运行上述命令。
</Callout>

安装后，您应该看到类似以下的输出：

```
Installed Versions:
Rust: rustc 1.86.0 (05f9846f8 2025-03-31)
Solana CLI: solana-cli 2.2.12 (src:0315eb6a; feat:1522022101, client:Agave)
Anchor CLI: anchor-cli 0.31.1
Node.js: v23.11.0
Yarn: 1.22.1
```

<Callout>
  如果快速安装命令不起作用，请参阅下面的[安装依赖项](#install-dependencies)部分，了解单独安装每个依赖项的说明。

如果快速安装命令成功运行，请跳至下面的[Solana CLI基础](#install-dependencies)和

安装依赖项[Solana CLI Basics](#solana-cli-basics) and
[Anchor CLI Basics](#anchor-cli-basics) sections below.

</Callout>

## Install Dependencies

The instructions below guides you through installing each dependency
individually.

* Windows users must first install WSL (Windows subsystem for Linux) and then
  install the dependencies specified in the Linux section below.
* Linux users should first install the dependencies specified in the Linux
  section below.
* Mac users should start with the Rust installation instructions below.

<Accordions>
<Accordion title="Windows Subsystem for Linux (WSL)">

After installing WSL, install the dependencies specified in the Linux section
below before proceeding to install Rust, Solana CLI, and Anchor CLI.**您必须使用
[WSL](https://learn.microsoft.com/en-us/windows/wsl/install)**
(Windows的Linux子系统)。通过Linux终端安装所有其他依赖项。

To install WSL, run the following command in Windows PowerShell:

要安装WSL，请在Windows PowerShell中运行以下命令：

```terminal
$ wsl --install
```

安装过程会提示您创建一个默认用户账户。

![WSL Install](/assets/docs/intro/installation/wsl-install.png)

默认情况下，WSL安装Ubuntu。您可以通过在搜索栏中搜索"Ubuntu"来打开Linux终端。

![WSL Ubuntu](/assets/docs/intro/installation/wsl-ubuntu-search.png)

如果您的Ubuntu终端看起来像下图，您可能会遇到一个问题，即`ctrl + v`（粘贴键盘快捷键）在终端中不起作用。

![Ubuntu Terminal](/assets/docs/intro/installation/wsl-ubuntu-terminal-1.png)

如果您遇到此问题，请通过在搜索栏中搜索"Terminal"来打开Windows Terminal。

![Windows Terminal](/assets/docs/intro/installation/wsl-windows-terminal.png)

接下来，关闭Windows
Terminal并通过再次搜索Ubuntu重新打开Linux终端。现在终端应该看起来像下图，其中
`ctrl + v`（粘贴键盘快捷键）可以正常工作。

![Ubuntu Terminal](/assets/docs/intro/installation/wsl-ubuntu-terminal-2.png)

如果您使用VS Code，
[WSL扩展](https://code.visualstudio.com/docs/remote/wsl-tutorial)使您能够将WSL和VS
Code一起使用。

![WSL Setup in VS Code](/assets/docs/intro/installation/wsl-vscode.png)

然后您应该在VS Code状态栏中看到以下内容：

![WSL: Ubuntu](/assets/docs/intro/installation/wsl-vscode-ubuntu.png)

To install the required Solana dependencies, first try running the

要安装所需的Solana依赖项，首先尝试在Ubuntu（Linux）终端中运行
[快速安装](#quick-installation)命令。

<Callout>

If the quick install command runs successfully, skip to the

如果快速安装命令成功运行，请跳到下面的 [Solana CLI基础](#solana-cli-basics)和
[Anchor CLI基础](#anchor-cli-basics)部分。

</Accordion>
<Accordion title="Linux">

</Accordion>
<Accordion title="Linux">

Anchor CLI 基础

首先，运行以下命令：

```terminal
$ sudo apt-get update
```

接下来，安装以下依赖项：

```terminal
$ sudo apt-get install -y \
    build-essential \
    pkg-config \
    libudev-dev llvm libclang-dev \
    protobuf-compiler libssl-dev
```

如果在安装`protobuf-compiler`时遇到以下错误，请确保先运行*shell`sudo apt-get update`*：

```
</Accordion>
</Accordions>
```

  </Step>

<Steps>
<Step>

### Developers build Solana programs using the&#xA;

Install Rust with [rustup](https://www.rust-lang.org/)上的JavaScript示例。

Run the following command to install
Rust:[rustup](https://www.rust-lang.org/tools/install)。

运行以下命令安装Rust：

```terminal
$ curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
```

安装完成后，您应该看到以下消息：

<Accordions>
<Accordion title="Rust安装成功消息">

```
</Accordion>
</Accordions>
```

</Accordion>
</Accordions>

运行以下命令重新加载PATH环境变量，以包含Cargo的bin目录：

```terminal
$ . "$HOME/.cargo/env"
```

要验证安装是否成功，请检查Rust版本：

```terminal
$ rustc --version
```

您应该看到类似以下的输出：

```
</Step>
<Step>
```

</Step>
<Step>

### The Solana CLI provides all the tools required to build and deploy Solana&#xA;programs.

Install the Solana CLI tool suite using the official install command:

使用官方安装命令安装Solana CLI工具套件：

```terminal
$ sh -c "$(curl -sSfL https://release.anza.xyz/stable/install)"
```

For a first-time installation of the Solana CLI, you may see the following
message prompting you to add a `stable` environment
variable:`v2.0.3`)，或使用三个符号通道名称之一：`stable`、`beta`或`edge`。

首次安装Solana CLI时，您可能会看到以下消息，提示您添加`PATH`环境变量：

```
Close and reopen your terminal to apply the PATH changes or run the following in your existing shell:

export PATH="/Users/test/.local/share/solana/install/active_release/bin:$PATH"
```

If you are using <Tab value="Linux">

First, run the following command to check which shell you are using:**Linux** 或
**WSL**，您需要将 Solana CLI 二进制文件添加到您的
`PATH`，以便在终端中可以使用该命令。

首先，运行以下命令以检查您正在使用的 shell 类型：

```terminal
$ echo $SHELL
```

* 如果输出包含 `/bash`，请使用 `.bashrc`。
* 如果输出包含 `/zsh`，请使用 `.zshrc`。

For Bash (

对于 Bash（`bashrc`）：

```terminal
$ echo 'export PATH="$HOME/.local/share/solana/install/active_release/bin:$PATH"' >> ~/.bashrc
$ source ~/.bashrc
```

对于 Zsh（`zshrc`）：

```terminal
$ echo 'export PATH="$HOME/.local/share/solana/install/active_release/bin:$PATH"' >> ~/.zshrc
$ source ~/.zshrc
```

然后运行以下命令以刷新终端会话或重新启动您的终端。

```terminal
</Tab>
<Tab value="Mac">
```

</Tab>
<Tab value="Mac">

Instead, you can add the PATH to your shell configuration file by running the
following command:`zsh`，运行安装过程中记录的默认 `export PATH`
命令在关闭终端后不会持久化。

相反，您可以通过运行以下命令将 PATH 添加到您的 shell 配置文件中：

```terminal
$ echo 'export PATH="$HOME/.local/share/solana/install/active_release/bin:$PATH"' >> ~/.zshrc
```

然后运行以下命令以刷新终端会话或重新启动您的终端。

```terminal
</Tab>
</Tabs>
```

</Tab>
</Tabs>

要验证安装是否成功，请检查 Solana CLI 的版本：

```terminal
$ solana --version
```

你应该会看到类似以下的输出：

```
solana-cli 2.2.12 (src:0315eb6a; feat:1522022101, client:Agave)
```

你可以在
[Agave Github 仓库](https://github.com/anza-xyz/agave/releases)上查看所有可用版本。

<Callout>

Agave 是来自 [Anza](https://www.anza.xyz/) 的validator客户端，前身为 Solana Labs
validator客户端。

</Callout>

要将 Solana CLI 更新到最新版本，你可以使用以下命令：

```terminal
</Step>
<Step>
```

</Step>
<Step>

### 安装 Anchor CLI

[Anchor](https://www.anchor-lang.com/)
是一个用于开发 Solana 程序的框架。Anchor 框架利用 Rust 宏来简化编写 Solana 程序的过程。

你可以通过两种方式安装 Anchor CLI 和工具：

1. Anchor 版本管理器 (AVM) - 推荐的安装方法
2. 不使用 AVM - 直接从 GitHub 安装

The Anchor version manager (AVM) allows you to install and manage different
Anchor versions on your system and easily update Anchor versions in the
future.<Tab value="AVM">

Install AVM with the following command:

使用以下命令安装 AVM：

```terminal
$ cargo install --git https://github.com/coral-xyz/anchor avm --force
```

确认 AVM 安装成功：

```terminal
$ avm --version
```

使用 AVM 安装最新版本的 Anchor CLI：

```terminal
$ avm install latest
$ avm use latest
```

你可以通过指定版本号来安装特定版本的 Anchor CLI：

```terminal
<Callout type="info">
```

<Callout type="info">

别忘了运行 *shell`avm use`* 命令来声明要在您的系统上运行的Anchor CLI版本。

* 如果您安装了 `latest` 版本，请运行 *shell`avm use latest`*。
* 如果您安装了版本 `0.30.1`，请运行 *shell`avm use 0.30.1`*。

</Tab>

<Tab value="Without AVM">

<Tab value="Without AVM">

使用以下命令安装特定版本的Anchor CLI：

```terminal
</Tab>
</Tabs>
```

</Tab>
</Tabs>

要验证安装是否成功，请检查Anchor CLI版本：

```terminal
$ anchor --version
```

您应该看到类似以下的输出：

```
<Callout type="warn">
```

<Callout type="warn">

在Linux或WSL上安装Anchor CLI时，您可能会遇到此错误：

```
error: could not exec the linker cc = note: Permission denied (os error 13)
```

如果您看到此错误消息：

1. 安装本页顶部[Linux](/docs/intro/installation#install-dependencies)
   部分中列出的依赖项。
2. 重新尝试安装Anchor CLI。

</Callout>

#### The default Anchor project test file (TypeScript) created with the&#xA;

使用*shell`anchor init`*
命令创建的默认Anchor项目测试文件（TypeScript）需要Node.js和Yarn。（使用*shell`anchor init --test-template rust`*)

<Accordions>
<Accordion title="节点安装">

Install nvm using the following
command:[Node 版本管理器 (nvm)](https://github.com/nvm-sh/nvm)。

使用以下命令安装 nvm：

```terminal
$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/master/install.sh | bash
```

重启终端并确认 nvm 命令能成功运行：

```terminal
$ command -v nvm
```

接下来，使用 `nvm` 来安装 node：

```terminal
$ nvm install node
```

要验证安装是否成功，请检查 Node 版本：

```terminal
$ node --version
```

你应该看到类似以下的输出：

```
</Accordion>
<Accordion title="Yarn Installation">
```

</Accordion>
<Accordion title="Yarn 安装">

安装 Yarn：

```terminal
$ npm install --global yarn
```

要验证安装是否成功，请检查 Yarn 版本：

```terminal
$ yarn --version
```

你应该看到以下输出：

```
</Accordion>
</Accordions>
```

<Callout type="warn">

<Callout type="warn">

运行 `anchor build` 时，如果遇到以下错误：

<Accordions>
<Accordion title="error: not a directory">

```
error: not a directory: '.../solana-release/bin/sdk/sbf/dependencies/platform-tools/rust/lib'
```

尝试这些解决方案：

1. 使用以下命令强制安装：

```terminal
$ cargo build-sbf --force-tools-install
```

2. 如果上述解决方案不起作用，请清除 Solana 缓存：

```terminal
</Accordion>
```

<Accordion title="lock file version 4 requires `-Znext-lockfile-bump">
You can fix this by changing the version field of `Cargo.lock` file from 4 to 3:

<Accordion title="lock file version 4 requires `-Znext-lockfile-bump">
你可以通过将 `Cargo.lock` 文件中的版本字段从 4 改为 3 来修复这个问题：

```diff title="Cargo.lock"
-version = 4
+version = 3
```

参见 [这个问题](https://github.com/coral-xyz/anchor/issues/3392) 获取更多信息。

</Accordions>

</Accordions>

应用上述解决方案后，尝试再次运行 *shell`anchor build`*。

<Callout type="warn">

<Callout type="warn">

在创建新的Anchor项目后，如果您在Linux或WSL上运行 *shell`anchor test`*
时，如果没有安装Node.js或Yarn，可能会遇到以下错误：

```
Permission denied (os error 13)
```

```
</Callout>
```

</Step>
</Steps>

</Step>
</Steps>

## This section walks through some common Solana CLI commands to get you started.

本节将介绍一些常用的Solana CLI命令，帮助您入门。

<Steps>
<Step>

### To see your current config:

查看当前配置：

```terminal
$ solana config get
```

您应该会看到类似以下的输出：

```
Config File: /Users/test/.config/solana/cli/config.yml
RPC URL: https://api.mainnet-beta.solana.com
WebSocket URL: wss://api.mainnet-beta.solana.com/ (computed)
Keypair Path: /Users/test/.config/solana/id.json
Commitment: confirmed
```

You can update the Solana CLI cluster using the following commands:

您可以使用以下命令更新Solana CLI集群：

```terminal
$ solana config set --url mainnet-beta
$ solana config set --url devnet
$ solana config set --url localhost
$ solana config set --url testnet
```

您也可以使用以下简短选项：

```terminal
$ solana config set -um    # For mainnet-beta
$ solana config set -ud    # For devnet
$ solana config set -ul    # For localhost
$ solana config set -ut    # For testnet
```

密钥对路径指向Solana
CLI用于支付交易费用和部署程序的默认Solana钱包（密钥对）。默认情况下，该文件存储在
`~/.config/solana/id.json` 中。

</Step>
<Step>

### To send transactions using the Solana CLI, you need a Solana wallet funded with&#xA;SOL.

To generate a keypair at the default Keypair Path, run the following command:

要在默认密钥对路径生成密钥对，请运行以下命令：

```terminal
$ solana-keygen new
```

您应该会看到类似以下的输出：

```
<Callout type="info">
```

<Callout type="info">

如果您已经在默认位置保存了文件系统钱包，除非您使用 `--force`
标志显式强制覆盖，否则此命令不会覆盖它。

</Callout>

要查看您钱包的地址（公钥），请运行：

```terminal
</Step>
<Step>
```

</Step>
<Step>

### Request an airdrop of SOL to your wallet to pay for transactions and program&#xA;deployments.

Set your cluster to the devnet:

将您的集群设置为开发网（devnet）：

```terminal
$ solana config set -ud
```

然后请求开发网SOL的空投：

```terminal
<Callout>
```

<Callout>

开发网空投限制每次请求5个SOL。如果您遇到速率限制或错误，请尝试使用[网页水龙头](https://faucet.solana.com)代替。

</Callout>

要检查您钱包的SOL余额，请运行以下命令：

```terminal
</Step>
<Step>
```

</Step>
<Step>

### The Solana CLI includes a built-in&#xA;

In a separate terminal, run the following command to start a local
validator:[测试验证器](https://docs.anza.xyz/cli/examples/test-validator)进行本地开发。

在另一个终端中，运行以下命令启动本地验证器：

```terminal
<Callout>
```

<Callout>

在运行Solana CLI命令之前，请记得将您的CLI更新为使用localhost：

```terminal
</Callout>
```

</Step>
</Steps>

</Step>
</Steps>

This section walks through some common Anchor CLI commands to get you started.
For more information on the Anchor CLI, see the

本节介绍一些常用的Anchor CLI命令，帮助您入门。有关Anchor
CLI的更多信息，请参阅[Anchor文档](https://www.anchor-lang.com/docs)。

<Steps>
<Step>

### To create a new Anchor project, run the following command:

要创建新的Anchor项目，请运行以下命令：

```terminal
$ anchor init <project-name>
```

例如，要创建一个名为`my-project`的项目，请运行：

```terminal
$ anchor init my-project
```

Navigate to the project directory:

导航到项目目录：

```terminal
$ cd <project-name>
```

查看Anchor项目的
[文件结构](https://www.anchor-lang.com/docs/quickstart/local#project-file-structure)。

<Step>
### Build Program

<Step>
### 构建程序

要构建您的项目，请运行以下命令：

```terminal
$ anchor build
```

您可以在`/target/deploy`目录中找到编译好的程序。

</Step>
<Step>

### To deploy your project, run the following command:

要部署您的项目，请运行以下命令：

```terminal
$ anchor deploy
```

此命令将您的程序部署到`cluster`中指定的
[`Anchor.toml`](https://www.anchor-lang.com/docs/references/anchor-toml)文件。

</Step>
<Step>

### To test your project, run the following command:

要测试您的项目，请运行以下命令：

```terminal
<Callout>
```

<Callout>

When using&#x20;

当在`localnet`中使用`cluster`作为`Anchor.toml`时，Anchor会自动启动本地validator，部署您的程序，运行测试，然后停止validator。

</Step>
</Steps>

</Step>
</Steps>
