---
title: Solana上的代币
description: 了解Solana的代币程序。
---

代币是代表各种资产所有权的数字资产。代币化使财产权利数字化成为可能。Solana上的代币被称为SPL
([Solana程序库](https://github.com/solana-program)) 代币。

本节涵盖了Solana上代币表示的基本概念。请参阅[SPL代币基础](/docs/tokens/basics)部分获取代码示例。

## 要点

* [代币程序](#token-program)包含了在网络上与代币（包括同质化和非同质化代币）交互的所有指令逻辑。

* [铸币账户](#mint-account)代表特定代币并存储关于该代币的全局元数据，如总供应量和铸币权限（被授权创建新代币单位的地址）。

* [代币账户](#token-account)为特定所有者跟踪特定铸币账户的代币个人所有权。

* [关联代币账户](#associated-token-account)是一种代币账户，其地址是从所有者和铸币账户地址派生出来的。

## 代币程序

Solana生态系统有两个主要的代币程序。以下是两个程序的源代码。

<Cards>
  <Card title="代币程序（原始）" href="https://github.com/solana-program/token">
    * 基本代币功能（铸造、转账等）
    * 不可变且广泛使用
  </Card>

  <Card title="代币扩展程序（Token 2022）" href="https://github.com/solana-program/token-2022">
    * 包含所有原始代币程序功能
    * 通过"扩展"添加功能
  </Card>
</Cards>

代币程序包含了与网络上代币（包括同质化和非同质化代币）交互的所有指令逻辑。Solana上的所有代币实际上都是[数据账户](/docs/core/accounts#data-account)，由代币程序所拥有。

![Token Program](/assets/docs/core/tokens/token-program.svg)

### 铸币账户

Solana上的代币由代币程序拥有的[铸币账户](https://github.com/solana-program/token/blob/6d18ff73b1dd30703a30b1ca941cb0f1d18c2b2a/program/src/state.rs#L16-L30)地址唯一标识。该账户作为特定代币的全局计数器，并存储以下数据：

* **供应量**：代币的总供应量
* **小数位**：代币的小数精度
* **铸币权限**：授权创建新代币单位的账户，增加供应量
* **冻结权限**：授权冻结代币账户中代币的账户，防止它们被转移或销毁

![Mint Account](/assets/docs/core/tokens/mint-account.svg)

每个铸币账户存储的完整详细信息包括以下内容：

```rust title="Mint Account State"
pub struct Mint {
    /// Optional authority used to mint new tokens. The mint authority may only
    /// be provided during mint creation. If no mint authority is present
    /// then the mint has a fixed supply and no further tokens may be
    /// minted.
    pub mint_authority: COption<Pubkey>,
    /// Total supply of tokens.
    pub supply: u64,
    /// Number of base 10 digits to the right of the decimal place.
    pub decimals: u8,
    /// Is `true` if this structure has been initialized
    pub is_initialized: bool,
    /// Optional authority to freeze token accounts.
    pub freeze_authority: COption<Pubkey>,
}
```

参考链接，这是Solana
Explorer上的[USDC铸币账户](https://explorer.solana.com/address/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v)。

### 代币账户

代币程序创建[代币账户](https://github.com/solana-program/token/blob/6d18ff73b1dd30703a30b1ca941cb0f1d18c2b2a/program/src/state.rs#L87-L108)
用于跟踪每个代币单位的个人所有权。代币账户存储的数据包括：

* **铸币**：代币账户持有单位的代币
* **所有者**：授权从代币账户转移代币的账户
* **数量**：代币账户当前持有的代币数量

![Token Account](/assets/docs/core/tokens/token-account.svg)

每个代币账户存储的完整详细信息包括以下内容：

```rust title="Token Account State"
pub struct Account {
    /// The mint associated with this account
    pub mint: Pubkey,
    /// The owner of this account.
    pub owner: Pubkey,
    /// The amount of tokens this account holds.
    pub amount: u64,
    /// If `delegate` is `Some` then `delegated_amount` represents
    /// the amount authorized by the delegate
    pub delegate: COption<Pubkey>,
    /// The account's state
    pub state: AccountState,
    /// If is_native.is_some, this is a native token, and the value logs the
    /// rent-exempt reserve. An Account is required to be rent-exempt, so
    /// the value is used by the Processor to ensure that wrapped SOL
    /// accounts do not drop below this threshold.
    pub is_native: COption<u64>,
    /// The amount delegated
    pub delegated_amount: u64,
    /// Optional authority to close the account.
    pub close_authority: COption<Pubkey>,
}
```

钱包需要为其想要持有的每种代币（铸币）设置一个代币账户，并将钱包地址设置为代币账户所有者。每个钱包可以拥有同一代币（铸币）的多个代币账户，但一个代币账户只能有一个所有者，并且只能持有一种代币（铸币）的单位。

![Account Relationship](/assets/docs/core/tokens/token-account-relationship.svg)

<Callout type="info">
  请注意，每个代币账户的数据包括一个`owner`字段，用于标识谁对代币账户拥有权限。这与基础中指定的程序所有者不同[账户](/docs/core/accounts#account-type)类型，对于所有代币账户来说，这是代币程序。
</Callout>

### 关联代币账户

关联代币账户简化了为特定铸币和所有者查找代币账户地址的过程。可以将关联代币账户视为特定铸币和所有者的"默认"代币账户。

关联代币账户的地址是由所有者地址和铸币账户地址派生而来的。重要的是要理解，关联代币账户只是一个具有特定地址的代币账户。

这引入了Solana开发中的一个关键概念：[程序派生地址（PDA）](/docs/core/pda)。PDA使用预定义的输入确定性地派生地址，使查找账户地址变得容易。

![Associated Token Account](/assets/docs/core/tokens/associated-token-account.svg)

请注意，每个钱包都需要自己的代币账户来持有来自同一铸币的代币。

![Accounts Relationship Expanded](/assets/docs/core/tokens/token-account-relationship-ata.svg)

## 代币CLI示例

*sh`spl-token`*&#x43;LI帮助你试验SPL代币。以下示例使用[Solana Playground](https://beta.solpg.io/)终端直接在浏览器中运行CLI命令，无需本地安装。

创建代币和账户需要SOL用于账户租金存款和交易费用。对于首次使用Solana
Playground的用户，创建一个Playground钱包并在Playground终端中运行*sh`solana airdrop`*&#x547D;令。你也可以从公共[网页水龙头](https://faucet.solana.com/)获取devnet
SOL。

```terminal
$ solana airdrop 2
```

运行*sh`spl-token --help`* 查看所有可用命令。

```terminal
$ spl-token --help
```

要在本地安装 *sh`spl-token`* CLI，请运行：

```terminal
$ cargo install spl-token-cli
```

在 *sh`spl-token`* [文档](https://www.solana-program.com/docs/token)
中查找更多示例。

<Callout type="info">
  您终端输出中显示的账户地址与下面的示例不同。跟随操作时请使用您的 Playground
  终端中的地址。例如，*sh`create-token`* 命令会输出一个铸币账户地址，您的
  Playground 钱包作为铸币权限持有者。
</Callout>

### 创建新代币

要创建新代币（铸币账户），请运行：

```terminal
$ spl-token create-token
```

输出如下：

```sh title="Terminal Output"
Creating token 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg

Address:  99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg
Decimals:  9

Signature: 44fvKfT1ezBUwdzrCys3fvCdFxbLMnNvBstds76QZyE6cXag5NupBprSXwxPTzzjrC3cA6nvUZaLFTvmcKyzxrm1
```

新的铸币账户初始供应量为零。使用以下命令检查当前供应量：

```terminal
$ spl-token supply <TOKEN_ADDRESS>
```

对于新代币，*sh`supply`*&#x547D;令返回`0`：

```sh title="Example"
spl-token supply 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg
```

创建新的铸币账户需要一个包含两个指令的交易。以下是在[Solana Playground](https://beta.solpg.io/660ce32ecffcf4b13384d00f)上的JavaScript示例。

1. 系统程序创建一个新账户，为铸币账户数据分配空间，并将所有权转移给代币程序。

2. 代币程序将新账户的数据初始化为铸币账户

### 创建代币账户

要持有特定铸币的代币，请创建代币账户：

```terminal
$ spl-token create-account <TOKEN_ADDRESS>
```

示例命令：

```sh title="Example"
spl-token create-account 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg
```

输出：

```sh title="Terminal Output"
Creating account AfB7uwBEsGtrrBqPTVqEgzWed5XdYfM1psPNLmf7EeX9

Signature: 2BtrynuCLX9CNofFiaw6Yzbx6hit66pup9Sk7aFjwU2NEbFz7NCHD9w9sWhrCfEd73XveAGK1DxFpJoQZPXU9tS1
```

*sh`create-account`*&#x547D;令创建一个关联代币账户，以您的钱包地址作为所有者。

要创建具有不同所有者的代币账户：

```terminal
$ spl-token create-account --owner <OWNER_ADDRESS> <TOKEN_ADDRESS>
```

注意：`<TOKEN_ADDRESS>`指定代币账户的铸币账户。

示例命令：

```sh title="Example"
spl-token create-account --owner 2i3KvjDCZWxBsqcxBHpdEaZYQwQSYE6LXUMx5VjY5XrR 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg
```

输出：

```shell title="Terminal Output" /Hmyk3FSw4cfsuAes7sanp2oxSkE9ivaH6pMzDzbacqmt/
Creating account Hmyk3FSw4cfsuAes7sanp2oxSkE9ivaH6pMzDzbacqmt

Signature: 44vqKdfzspT592REDPY4goaRJH3uJ3Ce13G4BCuUHg35dVUbHuGTHvqn4ZjYF9BGe9QrjMfe9GmuLkQhSZCBQuEt
```

创建关联代币账户需要一条调用[关联代币程序](https://github.com/solana-program/associated-token-account)的指令。以下是在[Solana Playground](https://beta.solpg.io/660ce868cffcf4b13384d011)上的JavaScript示例。

关联代币程序使用[跨程序调用](/docs/core/cpi) 来：

* [调用系统程序](https://github.com/solana-program/associated-token-account/blob/9d94201e8158f06015ff80ad47fefac62a2ec450/program/src/tools/account.rs#L19)
  使用提供的PDA作为地址创建新账户
* [调用代币程序](https://github.com/solana-program/associated-token-account/blob/9d94201e8158f06015ff80ad47fefac62a2ec450/program/src/processor.rs#L138-L161)
  初始化代币账户数据

要使用新密钥对而不是关联代币账户地址创建新的代币账户，请发送包含两条指令的交易。以下是在[Solana Playground](https://beta.solpg.io/660ce716cffcf4b13384d010)上的JavaScript示例。

1. 系统程序创建一个新账户，为代币账户数据分配空间，并将所有权转移给代币程序。

2. 代币程序将数据初始化为代币账户

### 铸造代币

要创建代币的新单位，将代币铸造到代币账户中：

```terminal
$ spl-token mint [选项] <代币地址> <代币数量> [--] [接收方代币账户地址]
```

示例命令：

```sh title="Example"
spl-token mint 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg 100
```

输出：

```shell title="Terminal Output"
Minting 100 tokens
  Token: 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg
  Recipient: AfB7uwBEsGtrrBqPTVqEgzWed5XdYfM1psPNLmf7EeX9

Signature: 2NJ1m7qCraPSBAVxbr2ssmWZmBU9Jc8pDtJAnyZsZJRcaYCYMqq1oRY1gqA4ddQno3g3xcnny5fzr1dvsnFKMEqG
```

要铸造代币到不同的代币账户：

```sh title="Example"
spl-token mint 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg 100 -- Hmyk3FSw4cfsuAes7sanp2oxSkE9ivaH6pMzDzbacqmt
```

输出：

```shell title="Terminal Output"
Minting 100 tokens
  Token: 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg
  Recipient: Hmyk3FSw4cfsuAes7sanp2oxSkE9ivaH6pMzDzbacqmt

Signature: 3SQvNM3o9DsTiLwcEkSPT1Edr14RgE2wC54TEjonEP2swyVCp2jPWYWdD6RwXUGpvDNUkKWzVBZVFShn5yntxVd7
```

代币程序上的*rs`MintTo`*&#x6307;令用于创建新代币。铸造权限持有者必须对交易进行签名。该指令将代币铸造到代币账户中，并增加铸币账户上的总供应量。以下是在[Solana Playground](https://beta.solpg.io/660cea45cffcf4b13384d012)上的JavaScript示例。

### 转移代币

要在代币账户之间转移代币：

```sh title="Terminal"
spl-token transfer [选项] <代币地址> <代币数量> <接收方地址或接收方代币账户地址>
```

示例命令：

```sh title="Example"
spl-token transfer 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg 100 Hmyk3FSw4cfsuAes7sanp2oxSkE9ivaH6pMzDzbacqmt
```

输出：

```shell title="Terminal Output"
Transfer 100 tokens
  Sender: AfB7uwBEsGtrrBqPTVqEgzWed5XdYfM1psPNLmf7EeX9
  Recipient: Hmyk3FSw4cfsuAes7sanp2oxSkE9ivaH6pMzDzbacqmt

Signature: 5y6HVwV8V2hHGLTVmTmdySRiEUCZnWmkasAvJ7J6m7JR46obbGKCBqUFgLpZu5zQGwM4Xy6GZ4M5LKd1h6Padx3o
```

该*rs`转账`*
指令在Token程序上处理代币转账。发送方Token账户的所有者必须签署交易。该指令在Token账户之间移动代币。以下是在[Solana Playground](https://beta.solpg.io/660ced84cffcf4b13384d013)上的JavaScript示例。

发送方和接收方都需要特定代币（铸币）的代币账户。发送方可以在同一交易中包含创建接收方代币账户的指令。

### 创建代币元数据

Token Extensions程序允许您直接在铸币账户上存储元数据（名称、符号、图像链接）。

要创建带有元数据扩展的代币：

```sh title="Example"
spl-token create-token --program-id TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb --enable-metadata
```

输出：

```shell title="Terminal Output"
Creating token BdhzpzhTD1MFqBiwNdrRy4jFo2FHFufw3n9e8sVjJczP under program TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb
To initialize metadata inside the mint, please run `spl-token initialize-metadata BdhzpzhTD1MFqBiwNdrRy4jFo2FHFufw3n9e8sVjJczP <YOUR_TOKEN_NAME> <YOUR_TOKEN_SYMBOL> <YOUR_TOKEN_URI>`, and sign with the mint authority.

Address:  BdhzpzhTD1MFqBiwNdrRy4jFo2FHFufw3n9e8sVjJczP
Decimals:  9

Signature: 5iQofFeXdYhMi9uTzZghcq8stAaa6CY6saUwcdnELST13eNSifiuLbvR5DnRt311frkCTUh5oecj8YEvZSB3wfai
```

初始化元数据：

```sh title="Terminal"
spl-token initialize-metadata <TOKEN_MINT_ADDRESS> <YOUR_TOKEN_NAME> <YOUR_TOKEN_SYMBOL> <YOUR_TOKEN_URI>
```

代币URI链接到链下元数据。查看JSON格式示例[点击这里](https://raw.githubusercontent.com/solana-developers/opos-asset/main/assets/DeveloperPortal/metadata.json)。

示例命令：

```sh title="Example"
spl-token initialize-metadata BdhzpzhTD1MFqBiwNdrRy4jFo2FHFufw3n9e8sVjJczP "TokenName" "TokenSymbol" "https://raw.githubusercontent.com/solana-developers/opos-asset/main/assets/DeveloperPortal/metadata.json"
```

在[Solana Explorer](https://explorer.solana.com/address/BdhzpzhTD1MFqBiwNdrRy4jFo2FHFufw3n9e8sVjJczP?cluster=devnet)上查看元数据。

在[元数据扩展指南](/developers/guides/token-extensions/metadata-pointer)中了解更多。有关Token
Extensions的详细信息，请参阅Token
Extensions[入门指南](/developers/guides/token-extensions/getting-started) 和

[SPL 文档](https://www.solana-program.com/docs/token-2022/extensions)。
