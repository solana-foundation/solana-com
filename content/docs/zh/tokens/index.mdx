---
title: Solana上的代币
description: 了解Solana的代币程序。
---

代币是代表各种资产所有权的数字资产。代币化使财产权利数字化成为可能。Solana上的代币被称为SPL
([Solana程序库](https://github.com/solana-program)) 代币。

本节涵盖了Solana上代币表示的基本概念。请参阅[SPL代币基础](/docs/tokens/basics)部分获取代码示例。

## 要点

* [代币程序](#token-program)包含了在网络上与代币（包括同质化和非同质化代币）交互的所有指令逻辑。

* A
  [铸币账户](#mint-account)代表特定代币并存储关于该代币的全局元数据，如总供应量和铸币权限（被授权创建新代币单位的地址）。

* A [Token Account](#token-account) tracks individual ownership of tokens for a
  specific mint account for a specific owner.

* An
  [关联代币账户](#associated-token-account)是一种代币账户，其地址是从所有者和铸币账户地址派生出来的。

## 代币程序

Solana生态系统有两个主要的代币程序。以下是两个程序的源代码。

<Cards>
  <Card title="代币程序（原始）" href="https://github.com/solana-program/token">
    * 基本代币功能（铸造、转账等）
    * 不可变且广泛使用
  </Card>

  <Card title="代币扩展程序（Token 2022）" href="https://github.com/solana-program/token-2022">
    * 包含所有原始代币程序功能
    * 通过"扩展"添加功能
  </Card>
</Cards>

代币程序包含了与网络上代币（包括同质化和非同质化代币）交互的所有指令逻辑。Solana上的所有代币实际上都是[数据账户](/docs/core/accounts#data-account)，由代币程序所拥有。

![Token Program](/assets/docs/core/tokens/token-program.svg)

### 铸币账户

Solana上的代币由代币程序拥有的[铸币账户](https://github.com/solana-program/token/blob/6d18ff73b1dd30703a30b1ca941cb0f1d18c2b2a/program/src/state.rs#L16-L30)地址唯一标识。该账户作为特定代币的全局计数器，并存储以下数据：

* **供应量**：代币的总供应量
* **小数位**：代币的小数精度
* **铸币权限**：授权创建新代币单位的账户，增加供应量
* **冻结权限**：授权冻结代币账户中代币的账户，防止它们被转移或销毁

![Mint Account](/assets/docs/core/tokens/mint-account.svg)

每个铸币账户存储的完整详细信息包括以下内容：

```rust title="Mint Account State"
pub struct Mint {
    /// Optional authority used to mint new tokens. The mint authority may only
    /// be provided during mint creation. If no mint authority is present
    /// then the mint has a fixed supply and no further tokens may be
    /// minted.
    pub mint_authority: COption<Pubkey>,
    /// Total supply of tokens.
    pub supply: u64,
    /// Number of base 10 digits to the right of the decimal place.
    pub decimals: u8,
    /// Is `true` if this structure has been initialized
    pub is_initialized: bool,
    /// Optional authority to freeze token accounts.
    pub freeze_authority: COption<Pubkey>,
}
```

参考链接，这是Solana
Explorer上的[USDC铸币账户](https://explorer.solana.com/address/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v)。

### 代币账户

代币程序创建[代币账户](https://github.com/solana-program/token/blob/6d18ff73b1dd30703a30b1ca941cb0f1d18c2b2a/program/src/state.rs#L87-L108)
用于跟踪每个代币单位的个人所有权。代币账户存储的数据包括：

* **铸币**：代币账户持有单位的代币
* **所有者**：授权从代币账户转移代币的账户
* **数量**：代币账户当前持有的代币数量

![Token Account](/assets/docs/core/tokens/token-account.svg)

每个代币账户存储的完整详细信息包括以下内容：

```rust title="Token Account State"
pub struct Account {
    /// The mint associated with this account
    pub mint: Pubkey,
    /// The owner of this account.
    pub owner: Pubkey,
    /// The amount of tokens this account holds.
    pub amount: u64,
    /// If `delegate` is `Some` then `delegated_amount` represents
    /// the amount authorized by the delegate
    pub delegate: COption<Pubkey>,
    /// The account's state
    pub state: AccountState,
    /// If is_native.is_some, this is a native token, and the value logs the
    /// rent-exempt reserve. An Account is required to be rent-exempt, so
    /// the value is used by the Processor to ensure that wrapped SOL
    /// accounts do not drop below this threshold.
    pub is_native: COption<u64>,
    /// The amount delegated
    pub delegated_amount: u64,
    /// Optional authority to close the account.
    pub close_authority: COption<Pubkey>,
}
```

钱包需要为其想要持有的每种代币（铸币）设置一个代币账户，并将钱包地址设置为代币账户所有者。每个钱包可以拥有同一代币（铸币）的多个代币账户，但一个代币账户只能有一个所有者，并且只能持有一种代币（铸币）的单位。

![Account Relationship](/assets/docs/core/tokens/token-account-relationship.svg)

<Callout type="info">
  请注意，每个代币账户的数据包括一个`owner`字段，用于标识谁对代币账户拥有权限。这与基础中指定的程序所有者不同[账户](/docs/core/accounts#account-type)类型，对于所有代币账户来说，这是代币程序。
</Callout>

关联代币账户`owner` field identifying who has authority over the Token Account.
This differs from the program owner specified in the base
[Account](/docs/core/accounts#account-type) type, which is the Token Program for
all Token Accounts.

</Callout>

### 关联代币账户的地址是由所有者地址和铸币账户地址派生而来的。重要的是要理解，关联代币账户只是一个具有特定地址的代币账户。

这引入了Solana开发中的一个关键概念：

An Associated Token Account is created with an address derived from the owner's
address and the mint account's address. It's important to understand that an
Associated Token Account is just a token account with a specific address.

请注意，每个钱包都需要自己的代币账户来持有来自同一铸币的代币。[Program Derived Address (PDA)](/docs/core/pda).
A PDA derives an address deterministically using predefined inputs, making it
easy to find the address of an account.

![Associated Token Account](/assets/docs/core/tokens/associated-token-account.svg)

代币CLI示例

![Accounts Relationship Expanded](/assets/docs/core/tokens/token-account-relationship-ata.svg)

创建代币和账户需要SOL用于账户租金存款和交易费用。对于首次使用Solana
Playground的用户，创建一个Playground钱包并在Playground终端中运行

***

The *sh`spl-token`*
CLI帮助你试验SPL代币。以下示例使用[Solana Playground](https://beta.solpg.io/)终端直接在浏览器中运行CLI命令，无需本地安装。

The *sh`solana airdrop`* CLI helps you experiment with SPL tokens. The examples
below use the [Solana Playground](https://faucet.solana.com/) terminal to run
CLI commands directly in the browser without local installation.

```terminal
$ solana airdrop 2
```

运行*sh`spl-token --help`*&#x67E5;看所有可用命令。

```terminal
$ spl-token --help
```

要在本地安装*sh`spl-token`* CLI，请运行：

```terminal
$ cargo install spl-token-cli
```

在*sh`spl-token`*
[文档](https://www.solana-program.com/docs/token)中查找更多示例。

<Callout type="info">

你终端输出中显示的账户地址与下面的示例不同。跟随操作时请使用你的Playground终端中的地址。例如，*sh`create-token`*&#x547D;令输出的mint
account地址将你的Playground钱包作为铸币权限。

</Callout>

### 创建新代币

Create a New Token

```terminal
$ spl-token create-token
```

输出看起来像：

```sh title="Terminal Output"
Creating token 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg

Address:  99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg
Decimals:  9

Signature: 44fvKfT1ezBUwdzrCys3fvCdFxbLMnNvBstds76QZyE6cXag5NupBprSXwxPTzzjrC3cA6nvUZaLFTvmcKyzxrm1
```

新的mint account初始供应量为零。使用以下命令检查当前供应量：

```terminal
$ spl-token supply <TOKEN_ADDRESS>
```

The *sh`supply`* 命令对于新代币返回 `0`:

```sh title="Example"
spl-token supply 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg
```

创建新的Mint
Account需要一个包含两条指令的交易。以下是在[Solana Playground](https://beta.solpg.io/660ce32ecffcf4b13384d00f)上的Javascript示例。

1. System Program创建一个新账户，为Mint Account数据分配空间并将所有权转移给Token
   Program。

2. Token Program将新账户的数据初始化为Mint Account

### 创建Token Account

Create Token Account

```terminal
$ spl-token create-account <TOKEN_ADDRESS>
```

示例命令:

```sh title="Example"
spl-token create-account 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg
```

输出:

```sh title="Terminal Output"
Creating account AfB7uwBEsGtrrBqPTVqEgzWed5XdYfM1psPNLmf7EeX9

Signature: 2BtrynuCLX9CNofFiaw6Yzbx6hit66pup9Sk7aFjwU2NEbFz7NCHD9w9sWhrCfEd73XveAGK1DxFpJoQZPXU9tS1
```

The *sh`create-account`* 命令创建一个associated token
account，以您的钱包地址作为所有者。

示例命令：

```terminal
$ spl-token create-account --owner <OWNER_ADDRESS> <TOKEN_ADDRESS>
```

注意: `<TOKEN_ADDRESS>` 指定token account的mint account。

Note:&#x20;

```sh title="Example"
spl-token create-account --owner 2i3KvjDCZWxBsqcxBHpdEaZYQwQSYE6LXUMx5VjY5XrR 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg
```

输出:

```shell title="Terminal Output" /Hmyk3FSw4cfsuAes7sanp2oxSkE9ivaH6pMzDzbacqmt/
Creating account Hmyk3FSw4cfsuAes7sanp2oxSkE9ivaH6pMzDzbacqmt

Signature: 44vqKdfzspT592REDPY4goaRJH3uJ3Ce13G4BCuUHg35dVUbHuGTHvqn4ZjYF9BGe9QrjMfe9GmuLkQhSZCBQuEt
```

创建Associated Token Account需要一条调用
[Associated Token Program](https://github.com/solana-program/associated-token-account)的指令。以下是在
[Solana Playground](https://beta.solpg.io/660ce868cffcf4b13384d011)上的Javascript示例。

Creating an Associated Token Account requires one instruction that invokes the
[Associated Token Program](/docs/core/cpi). Here's a Javascript example on

* [调用System Program](https://github.com/solana-program/associated-token-account/blob/9d94201e8158f06015ff80ad47fefac62a2ec450/program/src/tools/account.rs#L19)
  使用提供的PDA作为地址创建新账户
* [调用Token Program](https://github.com/solana-program/associated-token-account/blob/9d94201e8158f06015ff80ad47fefac62a2ec450/program/src/processor.rs#L138-L161)
  初始化代币账户数据

要使用新的密钥对而不是关联代币账户地址创建新的代币账户，请发送包含两个指令的交易。以下是在[Solana Playground](https://beta.solpg.io/660ce716cffcf4b13384d010)上的JavaScript示例。

1. 系统程序创建一个新账户，为代币账户数据预留空间，并将所有权转移给代币程序。

2. 代币程序将数据初始化为代币账户

### 铸造代币

Mint Tokens

```terminal
$ spl-token mint [OPTIONS] <TOKEN_ADDRESS> <TOKEN_AMOUNT> [--] [RECIPIENT_TOKEN_ACCOUNT_ADDRESS]
```

示例命令：

```sh title="Example"
spl-token mint 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg 100
```

输出：

```shell title="Terminal Output"
Minting 100 tokens
  Token: 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg
  Recipient: AfB7uwBEsGtrrBqPTVqEgzWed5XdYfM1psPNLmf7EeX9

Signature: 2NJ1m7qCraPSBAVxbr2ssmWZmBU9Jc8pDtJAnyZsZJRcaYCYMqq1oRY1gqA4ddQno3g3xcnny5fzr1dvsnFKMEqG
```

向不同的代币账户铸造代币：

```sh title="Example"
spl-token mint 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg 100 -- Hmyk3FSw4cfsuAes7sanp2oxSkE9ivaH6pMzDzbacqmt
```

输出：

```shell title="Terminal Output"
Minting 100 tokens
  Token: 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg
  Recipient: Hmyk3FSw4cfsuAes7sanp2oxSkE9ivaH6pMzDzbacqmt

Signature: 3SQvNM3o9DsTiLwcEkSPT1Edr14RgE2wC54TEjonEP2swyVCp2jPWYWdD6RwXUGpvDNUkKWzVBZVFShn5yntxVd7
```

代币程序上的*rs`MintTo`*&#x6307;令用于创建新代币。铸造权限持有者必须签署交易。该指令将代币铸造到代币账户中，并增加铸币账户上的总供应量。以下是在[Solana Playground](https://beta.solpg.io/660cea45cffcf4b13384d012)上的JavaScript示例。

### 示例命令：

Transfer Tokens

```sh title="Terminal"
spl-token transfer [OPTIONS] <TOKEN_ADDRESS> <TOKEN_AMOUNT> <RECIPIENT_ADDRESS or RECIPIENT_TOKEN_ACCOUNT_ADDRESS>
```

示例命令：

```sh title="Example"
spl-token transfer 99zqUzQGohamfYxyo8ykTEbi91iom3CLmwCA75FK5zTg 100 Hmyk3FSw4cfsuAes7sanp2oxSkE9ivaH6pMzDzbacqmt
```

输出：

```shell title="Terminal Output"
Transfer 100 tokens
  Sender: AfB7uwBEsGtrrBqPTVqEgzWed5XdYfM1psPNLmf7EeX9
  Recipient: Hmyk3FSw4cfsuAes7sanp2oxSkE9ivaH6pMzDzbacqmt

Signature: 5y6HVwV8V2hHGLTVmTmdySRiEUCZnWmkasAvJ7J6m7JR46obbGKCBqUFgLpZu5zQGwM4Xy6GZ4M5LKd1h6Padx3o
```

代币程序上的*rs`Transfer`*&#x6307;令处理代币转账。发送方代币账户的所有者必须签署交易。该指令在代币账户之间移动代币。以下是在[Solana Playground](https://beta.solpg.io/660ced84cffcf4b13384d013)上的JavaScript示例。

要创建带有元数据扩展的代币：

### Both sender and recipient need token accounts for the specific token (mint). The&#xA;sender can include instructions to create the recipient's token account in the&#xA;same transaction.

输出：

The Token Extensions Program lets you store metadata (name, symbol, image link)
directly on the Mint Account.

```sh title="Example"
spl-token create-token --program-id TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb --enable-metadata
```

输出：

```shell title="Terminal Output"
Creating token BdhzpzhTD1MFqBiwNdrRy4jFo2FHFufw3n9e8sVjJczP under program TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb
To initialize metadata inside the mint, please run `spl-token initialize-metadata BdhzpzhTD1MFqBiwNdrRy4jFo2FHFufw3n9e8sVjJczP <YOUR_TOKEN_NAME> <YOUR_TOKEN_SYMBOL> <YOUR_TOKEN_URI>`, and sign with the mint authority.

Address:  BdhzpzhTD1MFqBiwNdrRy4jFo2FHFufw3n9e8sVjJczP
Decimals:  9

Signature: 5iQofFeXdYhMi9uTzZghcq8stAaa6CY6saUwcdnELST13eNSifiuLbvR5DnRt311frkCTUh5oecj8YEvZSB3wfai
```

初始化元数据：

```sh title="Terminal"
spl-token initialize-metadata <TOKEN_MINT_ADDRESS> <YOUR_TOKEN_NAME> <YOUR_TOKEN_SYMBOL> <YOUR_TOKEN_URI>
```

代币URI链接到链下元数据。查看JSON格式示例
[这里](https://raw.githubusercontent.com/solana-developers/opos-asset/main/assets/DeveloperPortal/metadata.json)。

在

```sh title="Example"
spl-token initialize-metadata BdhzpzhTD1MFqBiwNdrRy4jFo2FHFufw3n9e8sVjJczP "TokenName" "TokenSymbol" "https://raw.githubusercontent.com/solana-developers/opos-asset/main/assets/DeveloperPortal/metadata.json"
```

在
[Solana浏览器](https://explorer.solana.com/address/BdhzpzhTD1MFqBiwNdrRy4jFo2FHFufw3n9e8sVjJczP?cluster=devnet)上查看元数据。

View the metadata on
[Solana Explorer](/developers/guides/token-extensions/metadata-pointer).[入门指南](/developers/guides/token-extensions/getting-started)和
[SPL文档](https://www.solana-program.com/docs/token-2022/extensions)。
