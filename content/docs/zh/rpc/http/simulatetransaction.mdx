---
title: simulateTransaction
hideTableOfContents: true
h1: simulateTransaction RPC 方法
---

模拟发送交易

<APIMethod>

```jsonc !!request curl
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "simulateTransaction",
  "params": [
    // !hover(1:2) transaction
    "AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEDArczbMia1tLmq7zz4DinMNN0pJ1JtLdqIJPUw3YrGCzYAMHBsgN27lcgB6H2WQvFgyZuJYHa46puOQo9yQ8CVQbd9uHXZaGT2cvhRs7reawctIXtX1s3kTqM9YV+/wCp20C7Wj2aiuk5TReAXo+VTVg8QTHjs0UjNMMKCvpzZ+ABAgEBARU=",
    // !hover(1:3) config
    {
      // !hover encoding
      "encoding": "base64"
    }
  ]
}
```

### !参数

#### !! transaction

!类型 string  
!必填

交易，作为编码字符串。

<Callout type="info">交易必须包含有效的区块哈希，但不需要签名。</Callout>

#### !! config

!类型 object  
!可选

包含以下字段的配置对象：

##### !! commitment

!类型 string

模拟交易时的承诺级别。请参阅
[配置状态承诺](/docs/rpc/index.mdx#configuring-state-commitment)。默认值 `finalized`。

##### !! sigVerify

!类型 bool  
!默认值 false

如果 `true`，交易签名将被验证（与 `replaceRecentBlockhash` 冲突）。

##### !! replaceRecentBlockhash

!类型 bool  
!默认值 false

如果 `true`，交易的最近区块哈希将被替换为最新的区块哈希（与 `sigVerify` 冲突）。

##### !! minContextSlot

!类型 number  
!可选

请求可以被评估的最小 slot。

##### !! encoding

!类型 string  
!值 base58 base64  
!默认值 base58

用于交易数据的编码。值：`base58`（_较慢_，
**已弃用**），或 `base64`。

##### !! innerInstructions

!类型 bool  
!默认值 false

如果 `true`，响应将包含[内部指令](/docs/rpc/json-structures#inner-instructions)。这些内部指令将在可能的情况下 `jsonParsed`，否则为 `json`。

##### !! accounts

!类型 object  
!可选

包含以下字段的账户配置对象：

- `addresses`：一个账户数组，作为 base-58 编码的字符串返回
- `encoding`：返回账户数据的编码。注意：`jsonParsed` 编码尝试使用程序特定的状态解析器返回更具可读性和明确性的账户状态数据。如果请求了 `jsonParsed`，但
  [无法找到解析器](https://github.com/solana-labs/solana/blob/cfd0a00ae2ba85a6d76757df8b4fa38ed242d185/account-decoder/src/parse_account_data.rs#L98-L100)，该字段将回退到 `base64` 编码，可通过返回的 `accounts.data` 字段类型为 `string` 检测到。

### !!result

```jsonc !response
{
  "jsonrpc": "2.0",
  "result": {
    "context": { "slot": 218 },
    // !hover(1:28) value
    "value": {
      // !hover err
      "err": null,
      // !hover accounts
      "accounts": null,
      // !hover(1:6) logs
      "logs": [
        "Program 83astBRguLMdt2h5U1Tpdq5tjFoJ6noeGwaY3mDLVcri invoke [1]",
        "Program 83astBRguLMdt2h5U1Tpdq5tjFoJ6noeGwaY3mDLVcri consumed 2366 of 1400000 compute units",
        "Program return: 83astBRguLMdt2h5U1Tpdq5tjFoJ6noeGwaY3mDLVcri KgAAAAAAAAA=",
        "Program 83astBRguLMdt2h5U1Tpdq5tjFoJ6noeGwaY3mDLVcri success"
      ],
      // !hover(1:4) returnData
      "returnData": {
        "data": ["Kg==", "base64"],
        "programId": "83astBRguLMdt2h5U1Tpdq5tjFoJ6noeGwaY3mDLVcri"
      },
      // !hover unitsConsumed
      "unitsConsumed": 2366
    }
  },
  "id": 1
}
```

!类型 object

结果将包含：

##### !! err

!类型 object|string|null

如果交易失败则为错误信息，如果交易成功则为 null。请参阅[TransactionError 定义](https://github.com/solana-labs/solana/blob/c0c60386544ec9a9ec7119229f37386d9f070523/sdk/src/transaction/error.rs#L13)

##### !! logs

!类型 array|null

交易指令在执行期间输出的日志消息数组，如果模拟在交易执行前失败则为 null

##### !! accounts

!类型 array|null

与请求中 `accounts.addresses` 数组长度相同的账户数组。每个元素为：

- `null` - 如果账户不存在或 `err` 不为 null
- 一个包含以下内容的对象：
  - `lamports: <u64>` - 分配给此账户的 lamports 数量
  - `owner: <string>` - 分配给此账户的程序的 base-58 编码 Pubkey
  - `data: <[string, encoding]|object>` - 与账户关联的数据，可以是编码的二进制数据或 JSON 格式 `{<program>: <state>}`
  - `executable: <bool>` - 一个布尔值，指示账户是否包含程序
  - `rentEpoch: <u64>` - 此账户下一次需要支付租金的 epoch

##### !! 消耗的单位

!type u64|undefined

在处理此交易过程中消耗的计算预算单位数量

##### !! 返回数据

!type object|null

交易中某个指令生成的最新返回数据，包含：

- `programId: <string>` - 生成返回数据的程序，以 base-58 编码的 Pubkey 表示
- `data: <[string, encoding]>` - 返回数据本身，以 base-64 编码的二进制数据表示

##### !! 内部指令

!type object|undefined

仅当 `innerInstructions` 被设置为 `true` 时定义。其值是一个
[内部指令](/docs/rpc/json-structures#inner-instructions) 的列表。

</APIMethod>
