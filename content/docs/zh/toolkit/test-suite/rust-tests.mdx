---
title: Rust 测试
seoTitle: 如何使用 Rust 测试 Solana 程序
description: 如何使用 LiteSVM 在 Rust 中为 Solana 程序编写测试
keywords:
  - solana rust 测试
  - solana litesvm
  - litesvm 测试
  - rust 测试
  - litesvm
  - litesvm 示例
  - solana 测试示例
h1: Solana 的 Rust 测试框架
---

> 这是 [Solana 工具包](/docs/toolkit/)
> 的测试版，仍在开发中（WIP）。请将所有反馈作为 GitHub 问题发布
> [这里](https://github.com/solana-foundation/mucho/issues/new?title=%5Btoolkit%5D%20)。

## 添加依赖

导航到您的程序目录并运行：

```shell
cargo add --dev litesvm
```

## LiteSVM 概述

[LiteSVM](https://github.com/LiteSVM/litesvm)
是一个快速且轻量级的库，用于测试 Solana 程序。它通过创建一个针对程序开发者优化的进程内 Solana
VM 来工作。这使得它比其他替代方案（如
[`solana-program-test`](/docs/toolkit/test-suite/basics)
和
[`solana-test-validator`](/docs/toolkit/local-validator)）运行和编译速度更快。此外，它还提供了符合人体工学的 API，具有合理的默认设置，并为需要的用户提供了广泛的可配置性。

## 最小示例

```rust
use litesvm::LiteSVM;
use solana_program::{message::Message, pubkey::Pubkey, system_instruction::transfer};
use solana_sdk::{signature::Keypair, signer::Signer, transaction::Transaction};

let from_keypair = Keypair::new();
let from = from_keypair.pubkey();
let to = Pubkey::new_unique();

let mut svm = LiteSVM::new();
svm.airdrop(&from, 10_000).unwrap();

let instruction = transfer(&from, &to, 64);
let tx = Transaction::new(
    &[&from_keypair],
    Message::new(&[instruction], Some(&from)),
    svm.latest_blockhash(),
);
let tx_res = svm.send_transaction(tx).unwrap();

let from_account = svm.get_account(&from);
let to_account = svm.get_account(&to);
assert_eq!(from_account.unwrap().lamports, 4936);
assert_eq!(to_account.unwrap().lamports, 64);

```

## 其他资源

- [源代码](https://github.com/LiteSVM/litesvm)
- [完整项目示例](https://github.com/cavemanloverboy/nawnce/blob/main/src/lib.rs)
- [更复杂的项目示例](https://github.com/pyth-network/per)
