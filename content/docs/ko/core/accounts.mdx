---
title: 솔라나 계정 모델
description:
  솔라나의 계정 모델에 대해 배우고, 계정이 데이터를 저장하는 방법과
  프로그램, 임대 메커니즘, 계정 소유권, 프로그램과 데이터 계정 간의 관계를
  이해하세요. 솔라나의 키-값 저장 시스템의 핵심 개념을 이해하세요.
---

솔라나에서는 모든 데이터가 "계정"이라고 부르는 것에 포함됩니다. 솔라나의
데이터를 단일 "계정" 테이블을 가진 공개 데이터베이스로 생각할 수 있으며,
이 테이블의 각 항목은 동일한 기본
[계정 유형](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/account/src/lib.rs#L48-L60)을 가진 개별 계정입니다.

![계정](/assets/docs/core/accounts/accounts.png)

## 주요 사항

- 계정은 최대
  [10MiB](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/program/src/system_instruction.rs#L85)
  의 데이터를 저장할 수 있으며, 이 데이터는 실행 가능한 프로그램 코드 또는
  프로그램 상태를 포함합니다.
- 계정은 저장된 데이터 양에 비례하는
  [임대 보증금](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/rent/src/lib.rs#L93-L97)
  (람포트(SOL))이 필요하며, 계정이 닫힐 때 전액 환불됩니다.
- 모든 계정은 프로그램
  [소유자](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/account/src/lib.rs#L55)를 가집니다.
  계정을 소유한 프로그램만이 해당 데이터 수정이나 람포트 잔액 차감이 가능합니다.
  그러나 누구나 잔액을 증가시킬 수 있습니다.
- **Sysvar 계정**은 네트워크 클러스터 상태를 저장하는 특별한 계정입니다.
- **프로그램 계정**은 스마트 계약의 실행 가능한 코드를 저장합니다.
- **데이터 계정**은 프로그램에 의해 생성되어 프로그램 상태를 저장하고 관리합니다.

## 계정

솔라나의 모든 계정은 고유한 32바이트 주소로 식별되며, 일반적으로
base58로 인코딩된 문자열로 표시됩니다 (예: `14grJpemFaf88c8tiVb77W7TYg2W3ir6pfkKz3YjhhZ5`).

계정과 그 주소 간의 관계는 키-값 쌍으로 생각할 수 있으며,
주소는 해당 계정의 온체인 데이터를 찾기 위한 키 역할을 합니다.

![계정 주소](/assets/docs/core/accounts/account-address.svg)

대부분의 솔라나 계정은 [Ed25519](https://ed25519.cr.yp.to/) 공개 키를
주소로 사용합니다.

공개 키가 일반적으로 계정 주소로 사용되지만, 솔라나는 프로그램 유도 주소(PDA)라는
기능도 지원합니다. PDA는 프로그램 ID와 선택적 입력(시드)에서 결정론적으로 유도된
특별한 주소입니다. 자세한 내용은 [프로그램 유도 주소](/docs/core/pda) 페이지에서 확인할 수 있습니다.

### 계정 유형

계정은 최대 크기가
[10MiB](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/program/src/system_instruction.rs#L85)
이며, 솔라나의 모든 계정은 동일한 기본
[계정](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/account/src/lib.rs#L48-L60)
유형을 가집니다.

![계정 유형](/assets/docs/core/accounts/account-type.svg)

솔라나의 모든 계정은 다음과 같은 필드를 가집니다:

- `data`: 계정을 위한 임의의 데이터를 저장하는 바이트 배열입니다. 실행 불가능한
  계정의 경우, 일반적으로 읽기 전용 상태를 저장합니다. 프로그램 계정(스마트 계약)의 경우,
  실행 가능한 프로그램 코드를 포함합니다. 데이터 필드는 일반적으로 "계정 데이터"라고
  불립니다.
- `executable`: 계정이 프로그램인지 여부를 나타내는 불리언 플래그입니다.
- `lamports`: 계정의 람포트 잔액으로, SOL의 가장 작은 단위입니다 (1 SOL = 10억 람포트).
- `owner`: 이 계정을 소유한 프로그램의 프로그램 ID(공개 키)입니다. 소유자 프로그램만이
  계정의 데이터 수정이나 람포트 잔액 차감이 가능합니다.
- `rent_epoch`: 솔라나가 주기적으로 계정에서 람포트를 차감하던 시절의 레거시 필드입니다.
  이 필드는 여전히 계정 유형에 존재하지만, 임대 수집이 더 이상 사용되지 않기 때문에 더 이상 사용되지 않습니다.

```rust title="기본 계정 유형"
pub struct Account {
    /// 계정의 람포트
    pub lamports: u64,
    /// 이 계정에 저장된 데이터
    #[cfg_attr(feature = "serde", serde(with = "serde_bytes"))]
    pub data: Vec<u8>,
    /// 이 계정을 소유하는 프로그램. 실행 가능한 경우, 이 계정을 로드하는 프로그램입니다.
    pub owner: Pubkey,
    /// 이 계정의 데이터는 로드된 프로그램을 포함하며(현재 읽기 전용)
    pub executable: bool,
    /// 이 계정이 다음에 임대료를 지불해야 하는 에포크
    pub rent_epoch: Epoch,
}
```

### 임대

온체인에 데이터를 저장하려면, 계정은 저장된 데이터 양(바이트)에 비례하는
최소 람포트(SOL) 잔액을 유지해야 합니다. 이 최소 잔액을 "임대"라고 하며,
계정이 닫힐 때 전액 회수 가능하므로 보증금과 유사하게 작동합니다. 계산은
[여기](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/rent/src/lib.rs#L93-L97)
에서 확인할 수 있으며, 이
[상수](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/rent/src/lib.rs#L47-L70)를 사용합니다.

"임대"라는 용어는 임대 기준 이하로 떨어진 계정에서 주기적으로 람포트를 차감하던
더 이상 활성화되지 않은 레거시 메커니즘에서 유래되었습니다.

### 프로그램 소유자

솔라나에서 "스마트 계약"은 [프로그램](/docs/core/programs)이라고 불립니다.
프로그램 소유권은 솔라나 계정 모델의 핵심 요소입니다. 모든 계정은 지정된
프로그램을 소유자로 가집니다. 오직 소유자 프로그램만이:

- 계정의 `data` 필드를 수정할 수 있습니다.
- 계정의 잔액에서 람포트를 차감할 수 있습니다.

## 시스템 프로그램

기본적으로 모든 새로운 계정은
[시스템 프로그램](https://github.com/anza-xyz/agave/tree/v2.1.13/programs/system/src)의 소유입니다.
시스템 프로그램은 여러 주요 작업을 수행합니다:

- [새 계정 생성](https://github.com/anza-xyz/agave/blob/v2.1.13/programs/system/src/system_processor.rs#L146):
  오직 시스템 프로그램만이 새로운 계정을 생성할 수 있습니다.
- [공간 할당](https://github.com/anza-xyz/agave/blob/v2.1.13/programs/system/src/system_processor.rs#L71):
  각 계정의 데이터 필드에 대한 바이트 용량을 설정합니다.
- [프로그램 소유권 전송 / 할당](https://github.com/anza-xyz/agave/blob/v2.1.13/programs/system/src/system_processor.rs#L113):
  시스템 프로그램이 계정을 생성한 후, 지정된 프로그램 소유자를 다른 프로그램 계정으로
  재할당할 수 있습니다. 이것이 사용자 정의 프로그램이 시스템 프로그램에 의해 생성된
  새로운 계정을 소유하는 방법입니다.

솔라나의 모든 "지갑" 계정은 단순히 시스템 프로그램이 소유한 계정입니다.
이 계정에 저장된 람포트 잔액은 지갑이 소유한 SOL의 양을 나타냅니다. 오직 시스템 프로그램이 소유한 계정만이
거래 수수료 지불자로 사용될 수 있습니다.

![시스템 계정](/assets/docs/core/accounts/system-account.svg)

## Sysvar 계정

Sysvar 계정은 클러스터 상태 데이터에 대한 접근을 제공하는 미리 정의된 주소에
위치한 특별한 계정입니다. 이 계정은 네트워크 클러스터에 대한 데이터로 동적으로 업데이트됩니다.
Sysvar 계정의 전체 목록은 [여기](https://docs.anza.xyz/runtime/sysvars)에서 확인할 수 있습니다.

## 프로그램 계정

로더-v3를 제외한 모든 로더는 관리하는 프로그램의 실행 가능한 코드를
프로그램 계정이라고 하는 곳에 저장합니다:
![프로그램 계정](/assets/docs/core/accounts/program-account-simple.svg)

단순화를 위해 프로그램 계정을 프로그램 자체로 생각할 수 있습니다. 프로그램의
명령을 호출할 때 프로그램 계정의 주소(일반적으로 "프로그램 ID"라고 불림)를
지정합니다.

### 버퍼 계정

로더-v3는 배포 또는 재배포/업그레이드 중 프로그램 업로드를 임시로
스테이징하기 위한 특별한 계정 유형을 가지고 있습니다. 로더-v4에서도 여전히 버퍼가 있지만,
그들은 단순히 일반 프로그램 계정입니다.

### 프로그램 데이터 계정

로더-v3는 모든 다른 로더와 다르게 작동하며, 각 프로그램에 대해 하나의 간접 참조를
가집니다. 프로그램 계정은 프로그램 데이터 계정의 주소만 포함하며, 이 계정은 실제
실행 가능한 코드를 보유합니다:
![프로그램 데이터 계정](/assets/docs/core/accounts/program-account-expanded.svg)

이 프로그램 데이터 계정은 프로그램의 데이터 계정과 혼동해서는 안 됩니다
(아래 참조).

## 데이터 계정

솔라나에서 프로그램의 실행 가능한 코드는 프로그램 상태와는 다른 계정에 저장됩니다.
이는 운영 체제가 일반적으로 프로그램 자체와 그 데이터에 대해 별도의 파일을
가지는 방식과 유사합니다.

상태를 유지하기 위해 프로그램은 프로그램이 소유하는 별도의 계정을 생성하는
명령을 정의합니다. 이러한 각 계정은 고유한 주소를 가지며, 프로그램에 의해 정의된
임의의 데이터를 저장할 수 있습니다.

![데이터 계정](/assets/docs/core/accounts/data-account.svg)

오직 [시스템 프로그램](/docs/core/accounts#system-program)만이
새로운 계정을 생성할 수 있다는 점에 유의하세요. 시스템 프로그램이 계정을 생성하면,
그 후에 새로운 계정의 소유권을 다른 프로그램으로 이전/할당할 수 있습니다.

다시 말해, 사용자 정의 프로그램을 위한 데이터 계정을 생성하려면 두 단계가 필요합니다:

1. 시스템 프로그램을 호출하여 계정을 생성하고, 그 후 사용자 정의 프로그램으로
   소유권을 이전합니다.
2. 이제 계정을 소유한 사용자 정의 프로그램을 호출하여 프로그램의 명령에 따라
   계정 데이터를 초기화합니다.

이 계정 생성 과정은 종종 단일 단계로 추상화되지만, 기본 프로세스를 이해하는 것이
도움이 됩니다.
