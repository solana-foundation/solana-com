---
title: 솔라나 계정 모델
description:
  솔라나의 계정 모델에 대해 알아보세요. 계정이 데이터와 프로그램을 저장하는
  방법, 렌트 메커니즘, 계정 소유권, 그리고 프로그램과 데이터 계정 간의 관계를
  포함합니다. 솔라나의 키-값 저장 시스템의 핵심 개념을 이해하세요.
---

솔라나에서는 모든 데이터가 "계정"이라고 부르는 곳에 포함되어 있습니다. 솔라나의
데이터는 단일 "계정" 테이블이 있는 공개 데이터베이스로 생각할 수 있으며, 이
테이블의 각 항목은 동일한 기본
[계정 유형](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/account/src/lib.rs#L48-L60)을
가진 개별 계정입니다.

![계정](/assets/docs/core/accounts/accounts.png)

## 주요 포인트

- 계정은 최대
  [10MiB](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/program/src/system_instruction.rs#L85)의
  데이터를 저장할 수 있으며, 실행 가능한 프로그램 코드나 프로그램 상태를
  포함합니다.
- 계정은 저장된 데이터의 양에 비례하는 lamports(SOL)로
  [임대료 예치금](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/rent/src/lib.rs#L93-L97)이
  필요하며, 계정이 닫힐 때 완전히 환불됩니다.
- 모든 계정에는 프로그램
  [소유자](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/account/src/lib.rs#L55)가
  있습니다. 계정을 소유한 프로그램만 해당 데이터를 수정하거나 lamport 잔액을
  차감할 수 있습니다. 그러나 누구나 잔액을 증가시킬 수 있습니다.
- **Sysvar 계정**은 네트워크 클러스터 상태를 저장하는 특별한 계정입니다.
- **프로그램 계정**은 스마트 컨트랙트의 실행 가능한 코드를 저장합니다.
- **데이터 계정**은 프로그램이 프로그램 상태를 저장하고 관리하기 위해
  생성합니다.

## 계정

솔라나의 모든 계정은 고유한 32바이트 주소로 식별할 수 있으며, 일반적으로
base58로 인코딩된 문자열(예: `14grJpemFaf88c8tiVb77W7TYg2W3ir6pfkKz3YjhhZ5`)로
표시됩니다.

계정과 그 주소 간의 관계는 키-값 쌍으로 생각할 수 있으며, 주소는 계정의 온체인
데이터를 찾기 위한 키 역할을 합니다.

![계정 주소](/assets/docs/core/accounts/account-address.svg)

대부분의 솔라나 계정은 [Ed25519](https://ed25519.cr.yp.to/) 공개 키를 주소로
사용합니다.

공개 키가 계정 주소로 일반적으로 사용되지만, 솔라나는 프로그램 파생
주소(PDA)라는 기능도 지원합니다. PDA는 프로그램 ID와 선택적 입력(시드)에서
결정론적으로 파생된 특별한 주소입니다. 자세한 내용은
[프로그램 파생 주소](/docs/core/pda) 페이지에서 다룹니다.

### 계정 유형

계정의 최대 크기는

[10MiB](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/program/src/system_instruction.rs#L85)

이며 솔라나의 모든 계정은 동일한 기본

[Account](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/account/src/lib.rs#L48-L60)

유형을 가집니다.

![계정 유형](/assets/docs/core/accounts/account-type.svg)

솔라나의 모든 계정은 다음 필드를 가집니다:

- `data`: 계정의 임의 데이터를 저장하는 바이트 배열입니다. 실행 불가능한 계정의
  경우, 일반적으로 읽기 전용으로 사용되는 상태를 저장합니다. 프로그램
  계정(스마트 컨트랙트)의 경우, 실행 가능한 프로그램 코드를 포함합니다. 데이터
  필드는 일반적으로 "계정 데이터"라고 불립니다.
- `executable`: 계정이 프로그램인지 나타내는 불리언 플래그입니다.
- `lamports`: 계정의 잔액(lamports 단위)으로, SOL의 최소 단위입니다(1 SOL = 10억
  lamports).
- `owner`: 이 계정을 소유한 프로그램의 ID(공개 키)입니다. 소유자 프로그램만
  계정의 데이터를 수정하거나 lamports 잔액을 차감할 수 있습니다.
- `rent_epoch`: 솔라나가 주기적으로 계정에서 lamports를 차감하는 메커니즘을
  가졌을 때의 레거시 필드입니다. 이 필드는 Account 유형에 여전히 존재하지만,
  임대료 수집이 더 이상 사용되지 않기 때문에 현재는 사용되지 않습니다.

```rust title="기본 계정 유형"
pub struct Account {
    /// 계정의 lamports
    pub lamports: u64,
    /// 이 계정에 보관된 데이터
    #[cfg_attr(feature = "serde", serde(with = "serde_bytes"))]
    pub data: Vec<u8>,
    /// 이 계정을 소유한 프로그램. 실행 가능한 경우, 이 계정을 로드하는 프로그램.
    pub owner: Pubkey,
    /// 이 계정의 데이터에 로드된 프로그램이 포함됨(이제 읽기 전용)
    pub executable: bool,
    /// 이 계정이 다음에 임대료를 지불해야 하는 에포크
    pub rent_epoch: Epoch,
}
```

### 렌트

온체인에 데이터를 저장하기 위해, 계정은 저장된 데이터 양(바이트 단위)에 비례하는
최소 램포트(SOL) 잔액을 유지해야 합니다. 이 최소 잔액을 "렌트"라고 하지만,
계정이 닫힐 때 전체 금액을 회수할 수 있기 때문에 보증금에 가깝게 작동합니다.
계산 방법은

[여기](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/rent/src/lib.rs#L93-L97)

에서 이러한
[상수](https://github.com/anza-xyz/agave/blob/v2.1.13/sdk/rent/src/lib.rs#L47-L70)를
사용하여 확인할 수 있습니다.

"렌트"라는 용어는 렌트 임계값 미만인 계정에서 정기적으로 램포트를 공제하는 더
이상 사용되지 않는 메커니즘 때문입니다. 이 메커니즘은 더 이상 활성화되어 있지
않습니다.

### 프로그램 소유자

솔라나에서 "스마트 컨트랙트"는 [프로그램](/docs/core/programs)이라고 합니다.
프로그램 소유권은 솔라나 계정 모델의 핵심 측면입니다. 모든 계정에는 소유자로
지정된 프로그램이 있습니다. 소유자 프로그램만이 다음을 수행할 수 있습니다:

- 계정의 `data` 필드 수정
- 계정 잔액에서 램포트 차감

## 시스템 프로그램

기본적으로 모든 새 계정은
[시스템 프로그램](https://github.com/anza-xyz/agave/tree/v2.1.13/programs/system/src)이
소유합니다. 시스템 프로그램은 다음과 같은 주요 작업을 수행합니다:

- [새 계정 생성](https://github.com/anza-xyz/agave/blob/v2.1.13/programs/system/src/system_processor.rs#L146):
  시스템 프로그램만이 새 계정을 생성할 수 있습니다.
- [공간 할당](https://github.com/anza-xyz/agave/blob/v2.1.13/programs/system/src/system_processor.rs#L71):
  각 계정의 데이터 필드에 대한 바이트 용량을 설정합니다.
- [프로그램 소유권 이전/할당](https://github.com/anza-xyz/agave/blob/v2.1.13/programs/system/src/system_processor.rs#L113):
  시스템 프로그램이 계정을 생성한 후, 지정된 프로그램 소유자를 다른 프로그램
  계정으로 재할당할 수 있습니다. 이것이 커스텀 프로그램이 시스템 프로그램에 의해
  생성된 새 계정의 소유권을 가져가는 방식입니다.

솔라나의 모든 "지갑" 계정은 단순히 시스템 프로그램이 소유한 계정입니다. 이러한
계정에 저장된 램포트 잔액은 지갑이 소유한 SOL 양을 나타냅니다. 시스템 프로그램이
소유한 계정만 트랜잭션 수수료 지불자로 사용될 수 있습니다.

![시스템 계정](/assets/docs/core/accounts/system-account.svg)

## Sysvar 계정

Sysvar 계정은 미리 정의된 주소에 위치한 특별한 계정으로 클러스터 상태 데이터에
접근할 수 있게 해줍니다. 이 계정들은 네트워크 클러스터에 관한 데이터로 동적으로
업데이트됩니다. Sysvar 계정의 전체 목록은
[여기](https://docs.anza.xyz/runtime/sysvars)에서 확인할 수 있습니다.

## 프로그램 계정

loader-v3를 제외한 모든 로더는 관리하는 프로그램의 실행 가능한 코드를 프로그램
계정이라고 불리는 곳에 저장합니다:

![프로그램 계정](/assets/docs/core/accounts/program-account-simple.svg)

간단히 말해서, 프로그램 계정을 프로그램 자체로 생각할 수 있습니다. 프로그램의
명령을 호출할 때, 프로그램 계정의 주소(일반적으로 "프로그램 ID"라고 함)를
지정합니다.

### 버퍼 계정

Loader-v3는 배포 또는 재배포/업그레이드 중에 프로그램 업로드를 임시로 준비하기
위한 특별한 계정 유형을 가지고 있습니다. loader-v4에서도 버퍼가 있지만, 이들은
단지 일반 프로그램 계정일 뿐입니다.

### 프로그램데이터 계정

loader-v3는 다른 모든 로더와 다르게 작동하며 각 프로그램마다 하나의 간접 참조를
가집니다. 프로그램 계정은 실제 실행 가능한 코드를 보유하는 programdata 계정의
주소만 포함합니다:

![프로그램데이터 계정](/assets/docs/core/accounts/program-account-expanded.svg)

이러한 프로그램데이터 계정은 프로그램의 데이터 계정(아래 참조)과 혼동하지 않아야
합니다.

## 데이터 계정

솔라나에서 프로그램의 실행 가능한 코드는 프로그램의 상태가 저장되는 계정과 다른
계정에 저장됩니다. 이는 일반적으로 운영 체제가 프로그램 자체와 해당 데이터를
별도의 파일로 유지하는 방식과 유사합니다.

상태를 유지하기 위해 프로그램은 프로그램이 소유한 별도의 계정을 생성하는 명령을
정의합니다. 이러한 각 계정은 고유한 주소를 가지며 프로그램에 의해 정의된 임의의
데이터를 저장할 수 있습니다.

![데이터 계정](/assets/docs/core/accounts/data-account.svg)

[시스템 프로그램](/docs/core/accounts#system-program)만이 새 계정을 생성할 수
있다는 점에 유의하세요. 시스템 프로그램이 계정을 생성하면, 새 계정의 소유권을
다른 프로그램으로 이전/할당할 수 있습니다.

다시 말해, 커스텀 프로그램을 위한 데이터 계정을 생성하려면 두 단계가 필요합니다:

1. 시스템 프로그램을 호출하여 계정을 생성하고, 이후 소유권을 커스텀 프로그램으로
   이전합니다
2. 이제 계정을 소유한 커스텀 프로그램을 호출하여, 프로그램의 명령에 정의된 대로
   계정 데이터를 초기화합니다

이 계정 생성 과정은 종종 단일 단계로 추상화되지만, 기본 프로세스를 이해하는 것이
도움이 됩니다.
