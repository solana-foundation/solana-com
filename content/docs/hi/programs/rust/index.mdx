---
title: Rust प्रोग्राम्स
description:
  Rust का उपयोग करके Solana प्रोग्राम विकसित करना सीखें, जिसमें Solana ब्लॉकचेन
  पर स्मार्ट कॉन्ट्रैक्ट्स बनाने, बिल्ड करने, टेस्ट करने और डिप्लॉय करने के लिए
  चरण-दर-चरण निर्देश शामिल हैं।
h1: Rust में प्रोग्राम विकसित करना
---

Solana प्रोग्राम मुख्य रूप से Rust प्रोग्रामिंग भाषा का उपयोग करके विकसित किए
जाते हैं। यह पेज Anchor फ्रेमवर्क का उपयोग किए बिना Rust में Solana प्रोग्राम
लिखने पर केंद्रित है, इस दृष्टिकोण को अक्सर "नेटिव Rust" प्रोग्राम लिखने के रूप
में जाना जाता है।

नेटिव Rust विकास डेवलपर्स को उनके Solana प्रोग्राम पर सीधा नियंत्रण प्रदान करता
है। हालांकि, इस दृष्टिकोण में Anchor फ्रेमवर्क का उपयोग करने की तुलना में अधिक
मैनुअल सेटअप और बॉयलरप्लेट कोड की आवश्यकता होती है। यह विधि उन डेवलपर्स के लिए
अनुशंसित है जो:

- प्रोग्राम लॉजिक और ऑप्टिमाइज़ेशन पर विस्तृत नियंत्रण चाहते हैं
- उच्च-स्तरीय फ्रेमवर्क पर जाने से पहले अंतर्निहित अवधारणाओं को सीखना चाहते हैं

शुरुआती लोगों के लिए, हम Anchor फ्रेमवर्क से शुरुआत करने की सलाह देते हैं। अधिक
जानकारी के लिए [Anchor](https://www.anchor-lang.com/docs) अनुभाग देखें।

## पूर्वापेक्षाएँ

विस्तृत इंस्टॉलेशन निर्देशों के लिए, [इंस्टॉलेशन](/docs/intro/installation) पेज
पर जाएँ।

शुरू करने से पहले, सुनिश्चित करें कि आपके पास निम्नलिखित इंस्टॉल हैं:

- Rust: Solana प्रोग्राम बनाने के लिए प्रोग्रामिंग भाषा।
- Solana CLI: Solana विकास के लिए कमांड-लाइन टूल।

## शुरुआत करना

नीचे दिया गया उदाहरण Rust में लिखे अपने पहले Solana प्रोग्राम को बनाने के लिए
बुनियादी चरणों को कवर करता है। हम एक न्यूनतम प्रोग्राम बनाएंगे जो प्रोग्राम लॉग
में "Hello, world!" प्रिंट करता है।

<Steps>
<Step>

### एक नया प्रोग्राम बनाएँ

सबसे पहले, मानक `cargo init` कमांड का उपयोग करके `--lib` फ्लैग के साथ एक नया
Rust प्रोजेक्ट बनाएँ।

```shell title="Terminal"
cargo init hello_world --lib
```

प्रोजेक्ट डायरेक्टरी में नेविगेट करें। आपको डिफ़ॉल्ट `src/lib.rs` और
`Cargo.toml` फाइलें दिखाई देंगी

```shell title="Terminal"
cd hello_world
```

अगला, `solana-program` डिपेंडेंसी जोड़ें। यह Solana प्रोग्राम बनाने के लिए
आवश्यक न्यूनतम डिपेंडेंसी है।

```shell title="Terminal"
cargo add solana-program@1.18.26
```

अगला, निम्नलिखित स्निपेट को `Cargo.toml` में जोड़ें। यदि आप इस कॉन्फ़िग को शामिल
नहीं करते हैं, तो जब आप प्रोग्राम को बिल्ड करेंगे तब `target/deploy` डायरेक्टरी
उत्पन्न नहीं होगी।

```toml title="Cargo.toml"
[lib]
crate-type = ["cdylib", "lib"]
```

आपकी `Cargo.toml` फ़ाइल निम्नलिखित जैसी दिखनी चाहिए:

```toml title="Cargo.toml"
[package]
name = "hello_world"
version = "0.1.0"
edition = "2021"

[lib]
crate-type = ["cdylib", "lib"]

[dependencies]
solana-program = "1.18.26"
```

अगला, `src/lib.rs` की सामग्री को निम्नलिखित कोड से बदलें। यह एक न्यूनतम Solana
प्रोग्राम है जो प्रोग्राम के आह्वान पर प्रोग्राम लॉग में "Hello, world!" प्रिंट
करता है।

`msg!` मैक्रो का उपयोग Solana प्रोग्राम में प्रोग्राम लॉग में संदेश प्रिंट करने
के लिए किया जाता है।

```rs title="lib.rs"
use solana_program::{
    account_info::AccountInfo, entrypoint, entrypoint::ProgramResult, msg, pubkey::Pubkey,
};

entrypoint!(process_instruction);

pub fn process_instruction(
    _program_id: &Pubkey,
    _accounts: &[AccountInfo],
    _instruction_data: &[u8],
) -> ProgramResult {
    msg!("Hello, world!");
    Ok(())
}
```

</Step>
<Step>

### प्रोग्राम को बिल्ड करें

अगला, `cargo build-sbf` कमांड का उपयोग करके प्रोग्राम को बिल्ड करें।

```shell title="Terminal"
cargo build-sbf
```

यह कमांड दो महत्वपूर्ण फ़ाइलों वाली एक `target/deploy` डायरेक्टरी उत्पन्न करती
है:

1. एक `.so` फ़ाइल (जैसे, `hello_world.so`): यह कंपाइल किया गया Solana प्रोग्राम
   है जिसे "smart contract" के रूप में नेटवर्क पर डिप्लॉय किया जाएगा।
2. एक keypair फ़ाइल (जैसे, `hello_world-keypair.json`): इस keypair की पब्लिक की
   का उपयोग प्रोग्राम को डिप्लॉय करते समय प्रोग्राम आईडी के रूप में किया जाता
   है।

प्रोग्राम आईडी देखने के लिए, अपने टर्मिनल में निम्नलिखित कमांड चलाएं। यह कमांड
निर्दिष्ट फ़ाइल पथ पर keypair की पब्लिक की प्रिंट करता है:

```shell title="Terminal"
solana address -k ./target/deploy/hello_world-keypair.json
```

आउटपुट उदाहरण:

```
4Ujf5fXfLx2PAwRqcECCLtgDxHKPznoJpa43jUBxFfMz
```

</Step>
<Step>

### प्रोग्राम का परीक्षण करें

अगला, `solana-program-test` क्रेट का उपयोग करके प्रोग्राम का परीक्षण करें।
निम्नलिखित निर्भरताओं को `Cargo.toml` में जोड़ें।

```shell title="Terminal"
cargo add solana-program-test@1.18.26 --dev
cargo add solana-sdk@1.18.26 --dev
cargo add tokio --dev
```

निम्नलिखित परीक्षण को `src/lib.rs` में, प्रोग्राम कोड के नीचे जोड़ें। यह एक
परीक्षण मॉड्यूल है जो हेलो वर्ल्ड प्रोग्राम को आमंत्रित करता है।

```rs title="lib.rs"
#[cfg(test)]
mod test {
    use solana_program_test::*;
    use solana_sdk::{
        instruction::Instruction, pubkey::Pubkey, signature::Signer, transaction::Transaction,
    };

    #[tokio::test]
    async fn test_hello_world() {
        let program_id = Pubkey::new_unique();
        let mut program_test = ProgramTest::default();
        program_test.add_program("hello_world", program_id, None);
        let (mut banks_client, payer, recent_blockhash) = program_test.start().await;
        // Create instruction
        let instruction = Instruction {
            program_id,
            accounts: vec![],
            data: vec![],
        };
        // Create transaction with instruction
        let mut transaction = Transaction::new_with_payer(&[instruction], Some(&payer.pubkey()));

        // Sign transaction
        transaction.sign(&[&payer], recent_blockhash);

        let transaction_result = banks_client.process_transaction(transaction).await;
        assert!(transaction_result.is_ok());
    }
}
```

`cargo test-sbf` कमांड का उपयोग करके परीक्षण चलाएं। प्रोग्राम लॉग "Hello,
world!" प्रदर्शित करेगा।

```shell title="Terminal"
cargo test-sbf
```

उदाहरण आउटपुट:

```shell title="Terminal" {4} /Program log: Hello, world!/
running 1 test
[2024-10-18T21:24:54.889570000Z INFO  solana_program_test] "hello_world" SBF program from /hello_world/target/deploy/hello_world.so, modified 35 seconds, 828 ms, 268 µs and 398 ns ago
[2024-10-18T21:24:54.974294000Z DEBUG solana_runtime::message_processor::stable_log] Program 1111111QLbz7JHiBTspS962RLKV8GndWFwiEaqKM invoke [1]
[2024-10-18T21:24:54.974814000Z DEBUG solana_runtime::message_processor::stable_log] Program log: Hello, world!
[2024-10-18T21:24:54.976848000Z DEBUG solana_runtime::message_processor::stable_log] Program 1111111QLbz7JHiBTspS962RLKV8GndWFwiEaqKM consumed 140 of 200000 compute units
[2024-10-18T21:24:54.976868000Z DEBUG solana_runtime::message_processor::stable_log] Program 1111111QLbz7JHiBTspS962RLKV8GndWFwiEaqKM success
test test::test_hello_world ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.13s
```

</Step>
<Step>

### प्रोग्राम को डिप्लॉय करें

अगला, प्रोग्राम को डिप्लॉय करें। स्थानीय रूप से विकास करते समय, हम
`solana-test-validator` का उपयोग कर सकते हैं।

सबसे पहले, स्थानीय Solana क्लस्टर का उपयोग करने के लिए Solana CLI को कॉन्फ़िगर
करें।

```shell title="Terminal"
solana config set -ul
```

उदाहरण आउटपुट:

```
Config File: /.config/solana/cli/config.yml
RPC URL: http://localhost:8899
WebSocket URL: ws://localhost:8900/ (computed)
Keypair Path: /.config/solana/id.json
Commitment: confirmed
```

एक नया टर्मिनल खोलें और स्थानीय validator शुरू करने के लिए
`solana-test-validators` कमांड चलाएं।

```shell title="Terminal"
solana-test-validator
```

जबकि टेस्ट validator चल रहा है, अलग टर्मिनल में `solana program deploy` कमांड
चलाकर प्रोग्राम को स्थानीय validator पर डिप्लॉय करें।

```shell title="Terminal"
solana program deploy ./target/deploy/hello_world.so
```

उदाहरण आउटपुट:

```
Program Id: 4Ujf5fXfLx2PAwRqcECCLtgDxHKPznoJpa43jUBxFfMz
Signature:
5osMiNMiDZGM7L1e2tPHxU8wdB8gwG8fDnXLg5G7SbhwFz4dHshYgAijk4wSQL5cXiu8z1MMou5kLadAQuHp7ybH
```

आप प्रोग्राम आईडी और ट्रांजैक्शन सिग्नेचर को
[Solana Explorer](https://explorer.solana.com/?cluster=custom&customUrl=http%3A%2F%2Flocalhost%3A8899)
पर देख सकते हैं। ध्यान दें कि Solana Explorer पर क्लस्टर भी localhost होना
चाहिए। Solana Explorer पर "Custom RPC URL" विकल्प डिफ़ॉल्ट रूप से
`http://localhost:8899` है।

</Step>
<Step>

### प्रोग्राम को इनवोक करें

अगला, हम Rust क्लाइंट का उपयोग करके प्रोग्राम को इनवोक करने का प्रदर्शन करेंगे।

पहले एक `examples` डायरेक्टरी और एक `client.rs` फ़ाइल बनाएं।

```shell title="Terminal"
mkdir -p examples
touch examples/client.rs
```

`Cargo.toml` में निम्नलिखित जोड़ें।

```toml title="Cargo.toml"
[[example]]
name = "client"
path = "examples/client.rs"
```

`solana-client` निर्भरता जोड़ें।

```shell title="Terminal"
cargo add solana-client@1.18.26 --dev
```

निम्नलिखित कोड को `examples/client.rs` में जोड़ें। यह एक Rust क्लाइंट स्क्रिप्ट
है जो लेनदेन शुल्क का भुगतान करने के लिए एक नए keypair को फंड करती है और फिर
हैलो वर्ल्ड प्रोग्राम को आमंत्रित करती है।

```rs title="example/client.rs"
use solana_client::rpc_client::RpcClient;
use solana_sdk::{
    commitment_config::CommitmentConfig,
    instruction::Instruction,
    pubkey::Pubkey,
    signature::{Keypair, Signer},
    transaction::Transaction,
};
use std::str::FromStr;

#[tokio::main]
async fn main() {
    // Program ID (replace with your actual program ID)
    let program_id = Pubkey::from_str("4Ujf5fXfLx2PAwRqcECCLtgDxHKPznoJpa43jUBxFfMz").unwrap();

    // Connect to the Solana devnet
    let rpc_url = String::from("http://127.0.0.1:8899");
    let client = RpcClient::new_with_commitment(rpc_url, CommitmentConfig::confirmed());

    // Generate a new keypair for the payer
    let payer = Keypair::new();

    // Request airdrop
    let airdrop_amount = 1_000_000_000; // 1 SOL
    let signature = client
        .request_airdrop(&payer.pubkey(), airdrop_amount)
        .expect("Failed to request airdrop");

    // Wait for airdrop confirmation
    loop {
        let confirmed = client.confirm_transaction(&signature).unwrap();
        if confirmed {
            break;
        }
    }

    // Create the instruction
    let instruction = Instruction::new_with_borsh(
        program_id,
        &(),    // Empty instruction data
        vec![], // No accounts needed
    );

    // Add the instruction to new transaction
    let mut transaction = Transaction::new_with_payer(&[instruction], Some(&payer.pubkey()));
    transaction.sign(&[&payer], client.get_latest_blockhash().unwrap());

    // Send and confirm the transaction
    match client.send_and_confirm_transaction(&transaction) {
        Ok(signature) => println!("Transaction Signature: {}", signature),
        Err(err) => eprintln!("Error sending transaction: {}", err),
    }
}
```

स्क्रिप्ट चलाने से पहले, ऊपर दिए गए कोड स्निपेट में प्रोग्राम आईडी को अपने
प्रोग्राम के लिए वाले से बदलें।

आप निम्न कमांड चलाकर अपना प्रोग्राम आईडी प्राप्त कर सकते हैं।

```shell title="Terminal"
solana address -k ./target/deploy/hello_world-keypair.json
```

```diff
#[tokio::main]
async fn main() {
-     let program_id = Pubkey::from_str("4Ujf5fXfLx2PAwRqcECCLtgDxHKPznoJpa43jUBxFfMz").unwrap();
+     let program_id = Pubkey::from_str("YOUR_PROGRAM_ID).unwrap();
    }
}
```

निम्न कमांड के साथ क्लाइंट स्क्रिप्ट चलाएं।

```shell title="Terminal"
cargo run --example client
```

आउटपुट उदाहरण:

```
Transaction Signature: 54TWxKi3Jsi3UTeZbhLGUFX6JQH7TspRJjRRFZ8NFnwG5BXM9udxiX77bAACjKAS9fGnVeEazrXL4SfKrW7xZFYV
```

आप
[Solana Explorer](https://explorer.solana.com/?cluster=custom&customUrl=http%3A%2F%2Flocalhost%3A8899)
(स्थानीय क्लस्टर) पर लेनदेन हस्ताक्षर का निरीक्षण करके प्रोग्राम लॉग में "Hello,
world!" देख सकते हैं।

</Step>
<Step>

### प्रोग्राम अपडेट करें

Solana प्रोग्राम को उसी प्रोग्राम आईडी पर पुनः डिप्लॉय करके अपडेट किया जा सकता
है। `src/lib.rs` में प्रोग्राम को अपडेट करें ताकि "Hello, world!" के बजाय
"Hello, Solana!" प्रिंट हो।

```diff title="lib.rs"
pub fn process_instruction(
    _program_id: &Pubkey,
    _accounts: &[AccountInfo],
    _instruction_data: &[u8],
) -> ProgramResult {
-   msg!("Hello, world!");
+   msg!("Hello, Solana!");
    Ok(())
}
```

`cargo test-sbf` कमांड चलाकर अपडेट किए गए प्रोग्राम का परीक्षण करें।

```shell title="Terminal"
cargo test-sbf
```

आपको प्रोग्राम लॉग में "Hello, Solana!" दिखाई देना चाहिए।

```shell title="Terminal" {4}
running 1 test
[2024-10-23T19:28:28.842639000Z INFO  solana_program_test] "hello_world" SBF program from /code/misc/delete/hello_world/target/deploy/hello_world.so, modified 4 minutes, 31 seconds, 435 ms, 566 µs and 766 ns ago
[2024-10-23T19:28:28.934854000Z DEBUG solana_runtime::message_processor::stable_log] Program 1111111QLbz7JHiBTspS962RLKV8GndWFwiEaqKM invoke [1]
[2024-10-23T19:28:28.936735000Z DEBUG solana_runtime::message_processor::stable_log] Program log: Hello, Solana!
[2024-10-23T19:28:28.938774000Z DEBUG solana_runtime::message_processor::stable_log] Program 1111111QLbz7JHiBTspS962RLKV8GndWFwiEaqKM consumed 140 of 200000 compute units
[2024-10-23T19:28:28.938793000Z DEBUG solana_runtime::message_processor::stable_log] Program 1111111QLbz7JHiBTspS962RLKV8GndWFwiEaqKM success
test test::test_hello_world ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.14s
```

अपडेट किए गए `.so` फ़ाइल को जनरेट करने के लिए `cargo build-sbf` कमांड चलाएं।

```shell title="Terminal"
cargo build-sbf
```

`solana program deploy` कमांड का उपयोग करके प्रोग्राम को फिर से डिप्लॉय करें।

```shell title="Terminal"
solana program deploy ./target/deploy/hello_world.so
```

क्लाइंट कोड को फिर से चलाएं और Solana Explorer पर लेनदेन हस्ताक्षर का निरीक्षण
करके प्रोग्राम लॉग में "Hello, Solana!" देखें।

```shell title="Terminal"
cargo run --example client
```

</Step>
<Step>

### प्रोग्राम को बंद करें

आप अपने Solana प्रोग्राम को बंद करके खाते में आवंटित SOL को वापस प्राप्त कर सकते
हैं। प्रोग्राम को बंद करना अपरिवर्तनीय है, इसलिए इसे सावधानी से किया जाना चाहिए।

प्रोग्राम को बंद करने के लिए, `solana program close <PROGRAM_ID>` कमांड का उपयोग
करें। उदाहरण के लिए:

```shell title="Terminal"
solana program close 4Ujf5fXfLx2PAwRqcECCLtgDxHKPznoJpa43jUBxFfMz
--bypass-warning
```

आउटपुट का उदाहरण:

```
Closed Program Id 4Ujf5fXfLx2PAwRqcECCLtgDxHKPznoJpa43jUBxFfMz, 0.1350588 SOL
reclaimed
```

ध्यान दें कि एक बार प्रोग्राम बंद होने के बाद, उसके प्रोग्राम ID का पुन: उपयोग
नहीं किया जा सकता। पहले से बंद किए गए प्रोग्राम ID के साथ प्रोग्राम को डिप्लॉय
करने का प्रयास करने पर त्रुटि होगी।

```
Error: Program 4Ujf5fXfLx2PAwRqcECCLtgDxHKPznoJpa43jUBxFfMz has been closed, use
a new Program Id
```

यदि आपको प्रोग्राम बंद करने के बाद उसी सोर्स कोड के साथ प्रोग्राम को फिर से
डिप्लॉय करने की आवश्यकता है, तो आपको एक नया प्रोग्राम ID बनाना होगा। प्रोग्राम
के लिए एक नया keypair जनरेट करने के लिए, निम्न कमांड चलाएँ:

```shell title="Terminal"
solana-keygen new -o ./target/deploy/hello_world-keypair.json --force
```

वैकल्पिक रूप से, आप मौजूदा keypair फ़ाइल (जैसे
`./target/deploy/hello_world-keypair.json`) को हटा सकते हैं और फिर से
`cargo build-sbf` चला सकते हैं, जो एक नई keypair फ़ाइल जनरेट करेगा।

</Step>
</Steps>
