---
title: Οδηγός ενσωμάτωσης κλιμακούμενου ποσού UI
description:
  Μάθετε πώς να ενσωματώσετε ένα token που χρησιμοποιεί την επέκταση Scaled UI
  Amount στην εφαρμογή σας.
---

# Υποστήριξη της επέκτασης Scaled UI Amount στο Solana

## Υπόβαθρο

Πρόσφατα κυκλοφόρησε μια νέα επέκταση token με την ονομασία "Scaled UI Amount"
που επιτρέπει στους εκδότες token να καθορίσουν έναν πολλαπλασιαστή που θα
χρησιμοποιείται κατά τον υπολογισμό του ποσού UI του υπολοίπου token ενός
χρήστη. Αυτό επιτρέπει στους εκδότες να δημιουργούν tokens επανακαθορισμού βάσης
και να ενεργοποιούν πράγματα όπως διασπάσεις μετοχών. Αυτή η επέκταση, όπως η
επέκταση token που φέρει τόκο, παρέχει ένα καθαρά διακοσμητικό ποσό UI. Οι
υποκείμενοι υπολογισμοί και μεταφορές πραγματοποιούνται όλοι χρησιμοποιώντας τα
ακατέργαστα ποσά στο πρόγραμμα.

### Πόροι:

- [Τεκμηρίωση για προγραμματιστές](https://www.solana-program.com/docs/token-2022/extensions#scaled-ui-amount)
- [Κώδικας Rust επέκτασης](https://github.com/solana-program/token-2022/tree/main/program/src/extension/scaled_ui_amount)
- [Κώδικας Rust μετατροπής ποσού σε ποσό UI](https://github.com/solana-program/token-2022/blob/main/program/src/processor.rs#L1425)

## Στόχοι

- Παροχή της καλύτερης εμπειρίας χρήστη για τους τελικούς χρήστες
- Παροχή σαφών και απλών κατευθυντήριων γραμμών για τις ομάδες ώστε να
  δημιουργήσουν μια ενιαία εμπειρία των tokens που φέρουν τόκο σε όλο το
  οικοσύστημα
- Εντοπισμός και σχεδιασμός εργασιών για τη μείωση της δουλειάς που πρέπει να
  κάνουν οι ομάδες για να ενσωματωθούν με την επέκταση κλιμακούμενου ποσού UI

## Περίληψη

- Οι τελικοί χρήστες θα πρέπει να αλληλεπιδρούν με το UIAmount (ακατέργαστο
  ποσό \* πολλαπλασιαστής) για την τιμή του token, το υπόλοιπο του token και τα
  ποσά του token όποτε είναι δυνατόν
- Οι dApps και οι πάροχοι υπηρεσιών θα πρέπει να χρησιμοποιούν το ακατέργαστο
  ποσό και τις μη κλιμακούμενες τιμές για όλους τους υπολογισμούς και να
  μετατρέπουν για τους χρήστες στο τελικό στάδιο
- Οι ιστορικές ροές τιμών πρέπει να παρέχονται τόσο για κλιμακούμενα όσο και για
  μη κλιμακούμενα ποσά για ευκολότερη ενσωμάτωση
- Οι ιστορικές τιμές πολλαπλασιαστή πρέπει να είναι προσβάσιμες για ακριβή
  ιστορικά δεδομένα

## Ορισμοί όρων

- Πολλαπλασιαστής: στατικός ενημερώσιμος πολλαπλασιαστής που χρησιμοποιείται για
  υπολογισμούς ποσών UI
- UIAmount: πολλαπλασιαστής \* ακατέργαστο ποσό (γνωστό και ως: κλιμακωμένο
  ποσό)
- Ακατέργαστο ποσό: ποσό (γνωστό και ως: μη κλιμακωμένο ποσό)

## Τρέχον υπόλοιπο

### Τρέχον ποσό για προβολή

- Κάθε φορά που εμφανίζετε ποσά για tokens που χρησιμοποιούν την επέκταση
  κλιμακωμένου ποσού UI στους τελικούς χρήστες, θα πρέπει να χρησιμοποιείτε
  είτε:
  - UIAmount/UIAmountString (**_προτιμώμενο_**)
  - Έναν χειροκίνητο υπολογισμό του ακατέργαστου ποσού \* πολλαπλασιαστή
  - Συνιστούμε την περικοπή αυτής της τιμής με βάση τον αριθμό των δεκαδικών
    ψηφίων που έχει το token
    - Παράδειγμα: αν το yUSD έχει 6 δεκαδικά ψηφία και ένας χρήστης έχει
      UIAmount 1.123456789, θα πρέπει να εμφανίζεται "1.123456"

### Πού θα βρείτε αυτά τα δεδομένα:

- Για το ζωντανό υπόλοιπο ενός χρήστη μπορείτε να λάβετε ενημερωμένες
  πληροφορίες για τα παραπάνω ποσά καλώντας είτε το getTokenAccountBalance είτε
  το getAccountInfo
- Αν χρειάζεστε να γνωρίζετε το UI Amount για ένα αυθαίρετο ποσό, μπορείτε να
  πάρετε αυτόν τον υπολογισμό καλώντας τη συνάρτηση
  [`amountToUiAmountForMintWithoutSimulation`](https://github.com/solana-program/token-2022/blob/main/clients/js-legacy/src/actions/amountToUiAmount.ts#L164)
  (web3.js v1) ή προσομοιώνοντας μια συναλλαγή χρησιμοποιώντας το
  amountToUiAmount.
  - Σημείωση: το amountToUiAmount απαιτεί προσομοίωση συναλλαγής, που σημαίνει
    ότι χρειάζεται επίσης έναν έγκυρο πληρωτή τελών με υπόλοιπο. Για αυτό το
    λόγο, αυτός δεν θα πρέπει να είναι ο προεπιλεγμένος τρόπος λήψης υπολοίπου.

### Ενημέρωση του τρέχοντος ποσού

Επειδή οι εκδότες μπορούν να ενημερώσουν τον πολλαπλασιαστή οποιαδήποτε στιγμή,
μπορείτε να εξετάσετε την περιοδική ανίχνευση για να διατηρείτε ενημερωμένο το
υπόλοιπο του λογαριασμού. Οι εκδότες είναι απίθανο να ενημερώνουν αυτόν τον
πολλαπλασιαστή περισσότερο από μία φορά την ημέρα. Αν ένας πολλαπλασιαστής έχει
οριστεί για μια μελλοντική ημερομηνία, μπορείτε να κάνετε αυτόματη ανίχνευση σε
αυτόν τον χρόνο ενημέρωσης

## Ποσά token σε συναλλαγές (μεταφορές / ανταλλαγές κλπ)

- Οι χρήστες θα πρέπει να εισάγουν ποσά που θα ερμηνεύονται ως κλιμακωμένο
  "UIAmount". Η εφαρμογή που πρέπει να επεξεργαστεί αυτό θα πρέπει να μετατρέπει
  στο ακατέργαστο ποσό token για τη συναλλαγή.
  - Εάν υπάρχουν ζητήματα στρογγυλοποίησης, στρογγυλοποιήστε προς τα κάτω και
    προτιμήστε να αφήσετε μια μικρή ποσότητα υπολείμματος παρά να
    διακινδυνεύσετε την αποτυχία της συναλλαγής
  - Για να κάνετε αυτή τη μετατροπή μπορείτε να χρησιμοποιήσετε τη συνάρτηση
    [`uiAmountToAmountForMintWithoutSimulation`](https://github.com/solana-program/token-2022/blob/main/clients/js-legacy/src/actions/amountToUiAmount.ts#L312C23-L312C63)
    (web3.js v1) ή να προσομοιώσετε μια συναλλαγή χρησιμοποιώντας το
    amountToUiAmount.
- Οι εφαρμογές θα πρέπει να χρησιμοποιούν το συνολικό ακατέργαστο ποσό όταν ένας
  χρήστης ζητά να κάνει μια ενέργεια με "max" ή "all" του υπολοίπου του. Αυτό
  διασφαλίζει ότι δεν απομένει υπόλειμμα.
  - Προαιρετικά: Μπορείτε να εξετάσετε το αυτόματο κλείσιμο ενός λογαριασμού
    όταν χρησιμοποιείται το "max" για να επιστραφεί στον χρήστη η κατάθεση
    αποθήκευσής του

## Τιμή token

- Η τιμή του token θα πρέπει πάντα να εμφανίζεται ως η κλιμακωμένη τιμή όπου
  είναι δυνατόν.
- Εάν είστε πάροχος υπηρεσίας τροφοδοσίας τιμών, όπως ένα oracle, θα πρέπει να
  εκθέτετε τόσο την κλιμακωμένη όσο και τη μη κλιμακωμένη τιμή.
  - Όπου είναι δυνατόν, παρέχετε ένα SDK/API που αφαιρεί τις πολυπλοκότητες της
    επέκτασης κλιμακωμένου UI amount.

## Τρέχων πολλαπλασιαστής

- Ο τρέχων πολλαπλασιαστής μπορεί να διαβαστεί από το token mint οποιαδήποτε
  στιγμή καλώντας `getAccountInfo`. Επιπλέον, εάν έχει οριστεί ένας μελλοντικός
  πολλαπλασιαστής, αυτή η πληροφορία είναι επίσης διαθέσιμη από το token mint.
  Συνιστούμε να μην εμφανίζετε αυτόν τον πολλαπλασιαστή καθώς μπορεί να
  προκαλέσει σύγχυση στην εμπειρία χρήστη.

## Ιστορικά δεδομένα

### Ιστορικά δεδομένα για τροφοδοσία τιμών

- Οι υπηρεσίες που παρέχουν ιστορικά δεδομένα θα πρέπει να αποθηκεύουν και να
  **εμφανίζουν τόσο τις κλιμακωμένες όσο και τις μη κλιμακωμένες τιμές για την
  επέκταση κλιμακωμένου UI amount**.
- Αναμένουμε ότι τα κλιμακωμένα ποσά θα χρησιμοποιούνται συχνότερα καθώς αυτό
  ευθυγραμμίζεται με τον τρόπο που ο παραδοσιακός χρηματοοικονομικός κόσμος
  αντιμετωπίζει τα γραφήματα που σχετίζονται με tokens με διασπάσεις μετοχών.

### Ιστορικά δεδομένα για ποσά

- Αν θέλετε να εμφανίσετε το υπόλοιπο που μεταφέρθηκε στο παρελθόν, χρειάζεστε
  πρόσβαση στον πολλαπλασιαστή σε εκείνο το συγκεκριμένο slot. Μπορείτε επίσης
  να αποθηκεύσετε το UiAmount για μεταφορές καθώς επεξεργάζεστε συναλλαγές για
  να αποφύγετε αυτόν τον υπολογισμό στο μέλλον.

## Συμβατότητα με προηγούμενες εκδόσεις

- Από προεπιλογή, τα πορτοφόλια και οι εφαρμογές που δεν κατανοούν την επέκταση
  κλιμακωμένου ποσού UI θα εμφανίζουν τη σωστή συνολική τιμή μιας δραστηριότητας
  πολλαπλασιάζοντας τη μη κλιμακωμένη τιμή \* ακατέργαστο ποσό.
- Ωστόσο, θα εμφανίζουν τη μη κλιμακωμένη τιμή προκαλώντας κάποια σύγχυση στους
  χρήστες.
- Ελπίζουμε ότι αυτό θα ενθαρρύνει τις ομάδες να ενημερώσουν τις dapps τους ώστε
  να είναι συμβατές με tokens που χρησιμοποιούν την επέκταση κλιμακωμένου ποσού
  UI και είμαστε πρόθυμοι να παρέχουμε υποστήριξη κατά τη διάρκεια αυτής της
  διαδικασίας.

## Βοηθητικές λειτουργίες για προσθήκη στη βιβλιοθήκη SPL-Token:

- **\[Ολοκληρώθηκε\]** Amount to UIAmount: Παροχή συνάρτησης για λήψη του
  UIAmount στην τρέχουσα χρονική στιγμή με βάση το mint και το ακατέργαστο ποσό
- **\[Ολοκληρώθηκε\]** UIAmount to Amount: Παροχή συνάρτησης για λήψη του
  ακατέργαστου ποσού στην τρέχουσα χρονική στιγμή με βάση το mint και το
  UIAmount
- **\[Ολοκληρώθηκε\]** Amount to UIAmount for: Παροχή συνάρτησης για λήψη του
  UIAmount για δεδομένο πολλαπλασιαστή και δεκαδικό και ακατέργαστο ποσό
- **\[Ολοκληρώθηκε\]** UIAmount to Amount: Παροχή συνάρτησης για λήψη του
  ακατέργαστου ποσού για δεδομένο πολλαπλασιαστή και δεκαδικό και UIAmount
- **\[TODO\]** Όλες οι παραπάνω βοηθητικές λειτουργίες για το @solana/kit

## Κριτήρια αποδοχής ανά πλατφόρμα

### **Γενικές απαιτήσεις**

| Απαίτηση                                | Περιγραφή                                                                                                                                                                                                                                         | Προτεραιότητα |
| :-------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :------------ |
| Υποστήριξη ενεργειών χρήστη με UiAmount | Όλες οι ενέργειες χρήστη θα πρέπει να εισάγονται σε UiAmount όταν το UiAmount είναι ενεργοποιημένο σε όλη την εφαρμογή. Αν το UiAmount δεν είναι ορατό στην εφαρμογή, θα πρέπει να χρησιμοποιούν ακατέργαστα ποσά μέχρι να ενημερωθεί η εφαρμογή. | **P0**        |

---

### **Πορτοφόλια**

| Απαίτηση                                                    | Περιγραφή                                                                                                                                              | Προτεραιότητα |
| :---------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| Εμφάνιση κλιμακωμένου υπολοίπου                             | Εμφάνιση του κλιμακωμένου ποσού (uiAmount) ως κύριο υπόλοιπο.                                                                                          | **P0**        |
| Υποστήριξη για μεταφορές token                              | Οι τελικοί χρήστες θα πρέπει να εισάγουν ποσά μεταφοράς με τα κλιμακωμένα υπόλοιπά τους (ακατέργαστο ποσό \* υπόλοιπο).                                | **P0**        |
| Εμφάνιση τρέχουσας τιμής                                    | Εμφάνιση της κλιμακωμένης τρέχουσας τιμής για τους χρήστες                                                                                             | **P0**        |
| Μεταδεδομένα ιστορικού συναλλαγών                           | Εμφάνιση του κλιμακωμένου ποσού (UIAmount) για κάθε μεταφορά όπου είναι δυνατόν.                                                                       | **P1**        |
| Εμφάνιση ενημερώσεων πολλαπλασιαστή στο ιστορικό συναλλαγών | Όταν συμβαίνουν ενημερώσεις πολλαπλασιαστή, εμφάνιση αυτού ως συμβάν στο ιστορικό συναλλαγών του χρήστη συμπεριλαμβανομένου του ποσού που κερδήθηκε    | **P2**        |
| Εμφάνιση γραφήματος ιστορικού τιμών                         | Αντανάκλαση των κλιμακωμένων τιμών στο γράφημα τιμών                                                                                                   | **P1**        |
| Εισαγωγή/Επεξηγηματικά εργαλεία                             | Προσφορά επεξηγηματικών εργαλείων ή εισαγωγής για την εκπαίδευση των χρηστών σχετικά με τα tokens που χρησιμοποιούν την επέκταση κλιμακωμένου ποσού ui | **P2**        |

---

### **Εξερευνητές**

| Απαίτηση                                                        | Περιγραφή                                                                                             | Προτεραιότητα |
| :-------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------- | :------------ |
| Βελτιώσεις σελίδας λεπτομερειών token                           | Εμφάνιση μεταδεδομένων όπως η συνολική κλιμακωμένη κεφαλαιοποίηση αγοράς και ο τρέχων πολλαπλασιαστής | **P0**        |
| Εμφάνιση κλιμακωμένου υπολοίπου για υπόλοιπα                    | Εμφάνιση κλιμακωμένων υπολοίπων (UiAmount) για τρέχοντα υπόλοιπα.                                     | **P0**        |
| Εμφάνιση κλιμακωμένου υπολοίπου για συναλλαγές                  | Εμφάνιση κλιμακωμένων υπολοίπων (UiAmount) για ποσά μεταφοράς για ιστορικές συναλλαγές.               | **P0**        |
| Εμφάνιση κλιμακωμένης τιμής για συναλλαγές                      | Εμφάνιση κλιμακωμένων τιμών για προηγούμενες συναλλαγές                                               | **P1**        |
| Σωστή ανάλυση και εμφάνιση συναλλαγών ενημέρωσης πολλαπλασιαστή | Σωστή εμφάνιση λεπτομερειών σχετικά με την ενημέρωση του πολλαπλασιαστή                               | **P2**        |

---

### **Συναθροιστές Δεδομένων Αγοράς (Π.χ.: CoinGecko)**

| Απαίτηση                                    | Περιγραφή                                                                                                                                         | Προτεραιότητα |
| :------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------ | :------------ |
| Ενημερώσεις API για Κλιμακωμένα Δεδομένα    | Επέκταση λειτουργικότητας API ώστε να συμπεριλαμβάνει αλλαγές πολλαπλασιαστή με την πάροδο του χρόνου καθώς και την κλιμακωμένη τροφοδοσία τιμών. | **P0**        |
| Συνολική Προσφορά με Κλιμακωμένη Προσαρμογή | Κατά την εμφάνιση της συνολικής προσφοράς και της συνολικής κεφαλαιοποίησης αγοράς, να λαμβάνονται υπόψη τα κλιμακωμένα υπόλοιπα                  | **P0**        |
| Παρακολούθηση Ιστορικού Τιμών               | Παροχή ιστορικού διαγράμματος τιμών χρησιμοποιώντας την κλιμακωμένη τιμή με την πάροδο του χρόνου.                                                | **P1**        |
| Παρακολούθηση Ιστορικού Πολλαπλασιαστή      | Παροχή ιστορικών δεικτών ενημερώσεων πολλαπλασιαστή για τα τοκοφόρα tokens.                                                                       | **P2**        |
| Εκπαιδευτικό Περιεχόμενο ή Επεξηγήσεις      | Συμπερίληψη σύντομων περιγραφών ή επεξηγηματικών συμβουλών που εξηγούν πώς λειτουργούν τα κλιμακωμένα tokens.                                     | **P2**        |

---

### **Πάροχοι Τροφοδοσίας Τιμών**

| Απαίτηση                                         | Περιγραφή                                                                               | Προτεραιότητα |
| :----------------------------------------------- | :-------------------------------------------------------------------------------------- | :------------ |
| Κλιμακωμένες & μη-κλιμακωμένες Τροφοδοσίες Τιμών | Παροχή τροφοδοσιών τιμών τόσο για κλιμακωμένες όσο και για μη-κλιμακωμένες τιμές.       | **P0**        |
| Δεδομένα Ιστορικού Πολλαπλασιαστή                | Προσφορά APIs με ιστορικές αλλαγές πολλαπλασιαστή.                                      | **P0**        |
| Δεδομένα Ιστορικού Τιμών                         | Προσφορά APIs με ιστορικές τιμές βάσει τόσο κλιμακωμένων όσο και μη-κλιμακωμένων ποσών. | **P0**        |

---

### **DEXes**

| Απαίτηση                                      | Περιγραφή                                                                                                                                     | Προτεραιότητα |
| :-------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| Εμφάνιση Επαναπροσδιορισμένων Υπολοίπων Token | Εμφάνιση κλιμακωμένων υπολοίπων για συναλλαγές ή παροχή ρευστότητας στο UI. (το backend μπορεί ακόμα να χρησιμοποιεί ακατέργαστα ποσά)        | **P0**        |
| Υποστήριξη για Ενέργειες Token                | Οι τελικοί χρήστες θα πρέπει να εισάγουν ποσά ενεργειών με τα υπόλοιπα UiAmount τους (πολλαπλασιαστής \* ακατέργαστο ποσό).                   | **P0**        |
| Προσαρμογή Τροφοδοσίας Τιμών                  | Οπουδήποτε χρησιμοποιείται μια τροφοδοσία τιμών για την εμφάνιση της τρέχουσας τιμής, να παρέχεται η κλιμακωμένη τιμή στους τελικούς χρήστες. | **P1**        |
| Εμφάνιση Γραφήματος Ιστορικού Τιμών           | Αντανάκλαση των κλιμακωμένων τιμών στο γράφημα τιμών                                                                                          | **P1**        |
